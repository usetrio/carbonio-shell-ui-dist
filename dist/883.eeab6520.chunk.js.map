{"version":3,"file":"883.eeab6520.chunk.js","mappings":"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","sources":["webpack://@zextras/carbonio-shell-ui/./src/boot/app/app-error-catcher.tsx","webpack://@zextras/carbonio-shell-ui/./src/constants/index.ts","webpack://@zextras/carbonio-shell-ui/./src/store/account/store.ts","webpack://@zextras/carbonio-shell-ui/./src/store/account/hooks.ts","webpack://@zextras/carbonio-shell-ui/./src/store/i18n/store.ts","webpack://@zextras/carbonio-shell-ui/./src/store/i18n/hooks.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/app/app-context-provider.tsx","webpack://@zextras/carbonio-shell-ui/./src/store/app/utils.tsx","webpack://@zextras/carbonio-shell-ui/./src/store/app/store.ts","webpack://@zextras/carbonio-shell-ui/./src/store/app/hooks.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/app/app-loader-mounter.tsx","webpack://@zextras/carbonio-shell-ui/./src/reporting/store.ts","webpack://@zextras/carbonio-shell-ui/./src/reporting/functions.ts","webpack://@zextras/carbonio-shell-ui/./src/store/boards/store.ts","webpack://@zextras/carbonio-shell-ui/./src/store/boards/hooks.tsx","webpack://@zextras/carbonio-shell-ui/./src/reporting/feedback.tsx","webpack://@zextras/carbonio-shell-ui/./src/search/search-store.tsx","webpack://@zextras/carbonio-shell-ui/./src/search/search-app-view.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/utils.ts","webpack://@zextras/carbonio-shell-ui/./src/settings/components/account-settings/accounts-list.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/hooks/use-reset.ts","webpack://@zextras/carbonio-shell-ui/./src/settings/components/account-settings/delegates.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/account-settings/persona-settings.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/account-settings/primary-account-settings.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/account-settings/settings-sent-messages.tsx","webpack://@zextras/carbonio-shell-ui/./src/ui-extras/nav-guard.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/settings-header.tsx","webpack://@zextras/carbonio-shell-ui/./src/network/user-agent.ts","webpack://@zextras/carbonio-shell-ui/./src/network/utils.ts","webpack://@zextras/carbonio-shell-ui/./src/store/network/store.ts","webpack://@zextras/carbonio-shell-ui/./src/store/network/hooks.ts","webpack://@zextras/carbonio-shell-ui/./src/workers/index.ts","webpack://@zextras/carbonio-shell-ui/./src/store/folder/store.ts","webpack://@zextras/carbonio-shell-ui/./src/store/folder/utils.ts","webpack://@zextras/carbonio-shell-ui/./src/store/folder/hooks.ts","webpack://@zextras/carbonio-shell-ui/./src/store/tags/store.ts","webpack://@zextras/carbonio-shell-ui/./src/store/tags/hooks.ts","webpack://@zextras/carbonio-shell-ui/./src/store/network/utils.ts","webpack://@zextras/carbonio-shell-ui/./src/network/fetch.ts","webpack://@zextras/carbonio-shell-ui/./src/settings/accounts-settings.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/general-settings-sub-sections.ts","webpack://@zextras/carbonio-shell-ui/./src/settings/components/general-settings/appearance-settings.tsx","webpack://@zextras/carbonio-shell-ui/./src/store/login/store.ts","webpack://@zextras/carbonio-shell-ui/./src/dark-mode/use-dark-reader-result-value.ts","webpack://@zextras/carbonio-shell-ui/./src/dark-mode/utils.ts","webpack://@zextras/carbonio-shell-ui/./src/dark-mode/use-dark-mode.ts","webpack://@zextras/carbonio-shell-ui/./src/utils/utils.ts","webpack://@zextras/carbonio-shell-ui/./src/shell/hooks/useLocalStorage.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/theme-provider.tsx","webpack://@zextras/carbonio-shell-ui/./src/boot/use-get-primary-color.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/general-settings/dark-theme-settings-section.tsx","webpack://@zextras/carbonio-shell-ui/./src/network/logout.ts","webpack://@zextras/carbonio-shell-ui/./src/settings/components/general-settings/logout.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/general-settings/module-version-settings.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/general-settings/out-of-office-time-period-section.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/general-settings/out-of-office-settings.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/general-settings/scaling-setting-section.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/general-settings/search-settings.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/components/general-settings/user-quota.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/language-and-timezone-settings.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/general-settings.tsx","webpack://@zextras/carbonio-shell-ui/./src/settings/settings-sidebar.tsx","webpack://@zextras/carbonio-shell-ui/./src/boot/app/default-views.ts","webpack://@zextras/carbonio-shell-ui/./src/settings/settings-app-view.tsx","webpack://@zextras/carbonio-shell-ui/./src/store/context-bridge.ts","webpack://@zextras/carbonio-shell-ui/./src/history/hooks.ts","webpack://@zextras/carbonio-shell-ui/./src/network/tags.ts","webpack://@zextras/carbonio-shell-ui/./src/store/login/getters.ts","webpack://@zextras/carbonio-shell-ui/./src/notification/NotificationManager.ts","webpack://@zextras/carbonio-shell-ui/./src/search/run-search.ts","webpack://@zextras/carbonio-shell-ui/./src/shell/shell-context.ts","webpack://@zextras/carbonio-shell-ui/./src/shell/hooks/useIsMobile.ts","webpack://@zextras/carbonio-shell-ui/./src/store/integrations/composer.tsx","webpack://@zextras/carbonio-shell-ui/./src/store/integrations/store.ts","webpack://@zextras/carbonio-shell-ui/./src/store/integrations/getters.tsx","webpack://@zextras/carbonio-shell-ui/./src/store/integrations/hooks.tsx","webpack://@zextras/carbonio-shell-ui/./src/network/edit-settings.ts","webpack://@zextras/carbonio-shell-ui/./src/ui-extras/app-link.tsx","webpack://@zextras/carbonio-shell-ui/./src/ui-extras/spinner.tsx","webpack://@zextras/carbonio-shell-ui/./src/boot/app/load-app.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/app/load-apps.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/app/shared-libraries.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/app/app-loader-setters.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/app/app-loader-functions.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/loader.tsx","webpack://@zextras/carbonio-shell-ui/./src/network/login-config.ts","webpack://@zextras/carbonio-shell-ui/./src/network/get-components.ts","webpack://@zextras/carbonio-shell-ui/./src/network/get-info.ts","webpack://@zextras/carbonio-shell-ui/./src/store/account/normalization.ts","webpack://@zextras/carbonio-shell-ui/./src/boot/shell-i18n-provider.tsx","webpack://@zextras/carbonio-shell-ui/./src/notification/NotificationPermissionChecker.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/app-view-container.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/boards/board.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/boards/board-tab.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/boards/board-tab-list.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/hooks/useResize.ts","webpack://@zextras/carbonio-shell-ui/./src/shell/boards/resizable-container.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/boards/board-container.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/hooks/useMove.ts","webpack://@zextras/carbonio-shell-ui/./src/shell/shell-context-provider.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/creation-button.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/logo.tsx","webpack://@zextras/carbonio-shell-ui/./src/search/module-selector.tsx","webpack://@zextras/carbonio-shell-ui/./src/search/search-bar.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/shell-header.tsx","webpack://@zextras/carbonio-shell-ui/./src/store/login/hooks.ts","webpack://@zextras/carbonio-shell-ui/./src/shell/shell-mobile-nav.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/badge-wrap.tsx","webpack://@zextras/carbonio-shell-ui/./src/utility-bar/utils.ts","webpack://@zextras/carbonio-shell-ui/./src/shell/shell-primary-bar.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/collapser.tsx","webpack://@zextras/carbonio-shell-ui/./src/utility-bar/store.ts","webpack://@zextras/carbonio-shell-ui/./src/shell/shell-secondary-bar.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/shell-navigation-bar.tsx","webpack://@zextras/carbonio-shell-ui/./src/utility-bar/bar.tsx","webpack://@zextras/carbonio-shell-ui/./src/utility-bar/panel.tsx","webpack://@zextras/carbonio-shell-ui/./src/shell/shell-view.tsx","webpack://@zextras/carbonio-shell-ui/./src/boot/bootstrapper.tsx","webpack://@zextras/carbonio-shell-ui/./node_modules/date-fns/locale/ lazy \\.[/\\\\](de%7Cen-US%7Ces%7Cfr%7Chi%7Cit%7Cja%7Cnl%7Cpl%7Cpt%7Cpt-BR%7Cro%7Cru%7Cth%7Ctr%7Cvi%7Czh-CN)[/\\\\]index\\.js$ namespace object","webpack://@zextras/carbonio-shell-ui/./node_modules/moment/locale/ sync ^\\.\\/.*$"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC, useCallback } from 'react';\n\nimport { Catcher } from '@zextras/carbonio-design-system';\n\nconst AppErrorCatcher: FC = ({ children }) => {\n\tconst onError = useCallback((error) => {\n\t\tconsole.error(error);\n\t\t// ({event: 'report-exception',data: { exception: error }});\n\t}, []);\n\treturn <Catcher onError={onError}>{children}</Catcher>;\n};\nexport default AppErrorCatcher;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { DynamicThemeFix } from 'darkreader';\n\n/*\n\treference: https://zextras.atlassian.net/wiki/spaces/IRIS/pages/223215854/UI+Guidelines+and+theming\n*/\nexport const ZIMBRA_STANDARD_COLORS = [\n\t{ zValue: 0, hex: '#000000', zLabel: 'black' },\n\t{ zValue: 1, hex: '#2b73d2', zLabel: 'blue' },\n\t{ zValue: 2, hex: '#29B6F6', zLabel: 'cyan' },\n\t{ zValue: 3, hex: '#66BB6A', zLabel: 'green' },\n\t{ zValue: 4, hex: '#7e57c2', zLabel: 'purple' },\n\t{ zValue: 5, hex: '#ef5350', zLabel: 'red' },\n\t{ zValue: 6, hex: '#ffc107', zLabel: 'yellow' },\n\t{ zValue: 7, hex: '#edaeab', zLabel: 'pink' },\n\t{ zValue: 8, hex: '#828282', zLabel: 'gray' },\n\t{ zValue: 9, hex: '#FF7043', zLabel: 'orange' }\n];\n\nexport const FOLDERS = {\n\tUSER_ROOT: '1',\n\tINBOX: '2',\n\tTRASH: '3',\n\tSPAM: '4',\n\tSENT: '5',\n\tDRAFTS: '6',\n\tCONTACTS: '7',\n\tTAGS: '8',\n\tCONVERSATIONS: '9',\n\tCALENDAR: '10',\n\tROOT: '11',\n\tNOTEBOOK: '12', // no longer created in new mailboxes since Helix (bug 39647).  old mailboxes may still contain a system folder with id 12\n\tAUTO_CONTACTS: '13',\n\tIM_LOGS: '14',\n\tTASKS: '15',\n\tBRIEFCASE: '16',\n\tLAST_SYSTEM_FOLDER_POSITION: '16.1'\n};\n\nexport const SHELL_APP_ID = 'carbonio-shell-ui';\nexport const SETTINGS_APP_ID = 'settings';\nexport const ACCOUNTS_APP_ID = 'accounts';\nexport const SEARCH_APP_ID = 'search';\nexport const ACTION_TYPES = {\n\tCONVERSATION: 'conversation',\n\tCONVERSATION_lIST: 'conversation_list',\n\tMESSAGE: 'message',\n\tMESSAGE_lIST: 'message_list',\n\tCONTACT: 'contact',\n\tCONTACT_lIST: 'contact_list',\n\tINVITE: 'invite',\n\tINVITE_lIST: 'invite_list',\n\tAPPOINTMENT: 'appointment',\n\tAPPOINTMENT_lIST: 'appointment_list',\n\tFOLDER: 'folder',\n\tFOLDER_lIST: 'folder_list',\n\tCALENDAR: 'calendar',\n\tCALENDAR_lIST: 'calendar_list',\n\tNEW: 'new'\n};\n\nexport const darkReaderDynamicThemeFixes: DynamicThemeFix = {\n\tignoreImageAnalysis: ['.no-dr-invert *'],\n\tinvert: [],\n\tcss: `\n\t\t.tox, .force-white-bg, .tox-swatches-menu, .tox .tox-edit-area__iframe {\n\t\t\tbackground-color: #fff !important;\n\t\t\tbackground: #fff !important;\n\t\t}\n\t`,\n\tignoreInlineStyle: ['.tox-menu *'],\n\tdisableStyleSheetsProxy: false\n};\n\nconst base = '/carbonio/';\n\nconst standaloneBase = `${base}standalone`;\n\nexport const IS_STANDALONE = window.location.pathname.startsWith(standaloneBase);\nexport const BASENAME = IS_STANDALONE ? standaloneBase : base;\nexport const EMAIL_VALIDATION_REGEX =\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars, max-len, no-control-regex\n\t/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/;\n\nexport const ROOT_NAME = 'USER_ROOT';\n\nexport const DARK_READER_VALUES = ['auto', 'enabled', 'disabled'] as const;\n\nexport const FOLDER_VIEW = {\n\tsearch_folder: 'search folder',\n\ttag: 'tag',\n\tconversation: 'conversation',\n\tmessage: 'message',\n\tcontact: 'contact',\n\tdocument: 'document',\n\tappointment: 'appointment',\n\tvirtual_conversation: 'virtual conversation',\n\tremote_folder: 'remote folder',\n\twiki: 'wiki',\n\ttask: 'task',\n\tchat: 'chat'\n};\nexport const LOCAL_STORAGE_SETTINGS_KEY = 'settings';\nexport const LOCAL_STORAGE_LAST_PRIMARY_KEY = 'config';\nexport const LOCAL_STORAGE_SEARCH_KEY = 'search_suggestions';\nexport const LOCAL_STORAGE_BOARD_SIZE = 'board_size';\nexport const SCALING_OPTIONS = [\n\t{ value: 75, label: 'xs' },\n\t{ value: 87.5, label: 's' },\n\t{ value: 100, label: 'm' },\n\t{ value: 112.5, label: 'l' },\n\t{ value: 125, label: 'xl' }\n] as const;\nexport const BASE_FONT_SIZE = 100;\nexport const SCALING_LIMIT = {\n\tWIDTH: 1400,\n\tHEIGHT: 900,\n\tDPR: 2 // device pixel ratio\n} as const;\n\nexport const LOGIN_V3_CONFIG_PATH = '/zx/login/v3/config';\nexport const DARK_READER_PROP_KEY = 'zappDarkreaderMode';\nexport const SENTRY_SHELL_DSN = 'https://0ce2448c05b94f0182c47ae52c7ff52c@feedback.zextras.tools/6';\nexport const SENTRY_FEEDBACK_DNS =\n\t'https://1b6b3e2bbdc64a73bf45c72b725c56b4@feedback.zextras.tools/8';\n\nexport enum ResultLabelType {\n\tNORMAL = 'normal',\n\tWARNING = 'warning',\n\tERROR = 'error'\n}\n\nexport const HEADER_BAR_HEIGHT = '3.75rem';\nexport const PRIMARY_BAR_WIDTH = '3.0625rem';\nexport const BOARD_HEADER_HEIGHT = '3rem';\nexport const BOARD_TAB_WIDTH = 'calc(3rem + 15ch)';\nexport const BOARD_CONTAINER_ZINDEX = 10;\nexport const BOARD_MIN_VISIBILITY = {\n\ttop: 50,\n\tleft: 30\n};\n\nexport const DELEGATED_SEND_SAVE_TARGET = ['owner', 'sender', 'both', 'none'];\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { create } from 'zustand';\n\nimport type { AccountState } from '../../../types';\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useAccountStore = create<AccountState>()(() => ({\n\tauthenticated: false,\n\taccount: undefined,\n\tversion: '',\n\tsettings: {\n\t\tprefs: {},\n\t\tattrs: {},\n\t\tprops: []\n\t},\n\tusedQuota: 0,\n\tlastNotificationTime: Date.now()\n}));\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { useMemo } from 'react';\n\nimport { find, get, join } from 'lodash';\n\nimport { useAccountStore } from './store';\nimport {\n\tAccount,\n\tAccountRightName,\n\tAccountRights,\n\tAccountRightTarget,\n\tAccountSettings\n} from '../../../types';\n\nexport const useUserAccount = (): Account => useAccountStore((s) => s.account as Account);\nexport const useUserAccounts = (): Array<Account> => {\n\tconst acct = useAccountStore((s) => s.account);\n\treturn useMemo(() => (acct ? [acct as Account] : []), [acct]);\n};\n\nexport const useUserRights = (): AccountRights =>\n\tuseAccountStore((s) => s.account?.rights ?? { targets: [] });\n\nexport const useUserRight = (right: AccountRightName): Array<AccountRightTarget> => {\n\tconst { targets } = useUserRights();\n\treturn useMemo(\n\t\t() => find(targets, ['right', right])?.target ?? ([] as Array<AccountRightTarget>),\n\t\t[right, targets]\n\t);\n};\nexport const useUserSettings = (): AccountSettings => useAccountStore((s) => s.settings);\nexport const useUserSetting = <T = void>(...path: Array<string>): string | T =>\n\tuseAccountStore((s) => get(s.settings, join(path, '.')));\n\nexport const getUserAccount = (): Account => useAccountStore.getState().account as Account;\nexport const getUserAccounts = (): Array<Account> => [\n\tuseAccountStore.getState().account as Account\n];\nexport const getUserSettings = (): AccountSettings => useAccountStore.getState().settings;\nexport const getUserSetting = <T = void>(...path: Array<string>): string | T =>\n\tget(useAccountStore.getState().settings, join(path, '.'));\n\nexport const getUserRights = (): AccountRights =>\n\tuseAccountStore.getState().account?.rights ?? { targets: [] };\n\nexport const getUserRight = (right: AccountRightName): Array<AccountRightTarget> =>\n\tfind(getUserRights().targets, ['right', right])?.target ?? ([] as Array<AccountRightTarget>);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport i18next, { i18n, InitOptions } from 'i18next';\nimport Backend from 'i18next-http-backend';\nimport produce from 'immer';\nimport { dropRight, forEach, reduce } from 'lodash';\nimport { initReactI18next } from 'react-i18next';\nimport { create } from 'zustand';\n\nimport type { CarbonioModule, I18nState } from '../../../types';\nimport { SHELL_APP_ID } from '../../constants';\nimport { useAccountStore } from '../account';\n\nconst addShell = (apps: Array<CarbonioModule>): Array<CarbonioModule> => [\n\t...apps,\n\t{\n\t\tcommit: '',\n\t\tdescription: '',\n\t\tjs_entrypoint: '',\n\t\tname: SHELL_APP_ID,\n\t\tpriority: -1,\n\t\tversion: '',\n\t\ttype: 'shell',\n\t\tattrKey: '',\n\t\ticon: '',\n\t\tdisplay: 'Shell'\n\t}\n];\n\nconst { settings } = useAccountStore.getState();\n\nconst defaultLng =\n\t(settings?.prefs?.zimbraPrefLocale as string) ??\n\t(settings?.attrs?.zimbraLocale as string) ??\n\t'en';\n\nconst defaultI18n = i18next.createInstance({ lng: defaultLng });\n\nconst defaultI18nInitOptions: InitOptions = {\n\treturnEmptyString: true,\n\treturnNull: false,\n\tcompatibilityJSON: 'v3',\n\tlng: defaultLng,\n\tfallbackLng: 'en',\n\tdebug: false,\n\tinterpolation: {\n\t\tescapeValue: false // not needed for react as it escapes by default\n\t},\n\tmissingKeyHandler: (_, __, key) => {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.warn(`Missing translation with key '${key}'`);\n\t},\n\tbackend: {\n\t\tloadPath: `${BASE_PATH}/i18n/{{lng}}.json`\n\t}\n};\n\nexport const useI18nStore = create<I18nState>()((set) => ({\n\tinstances: {},\n\tdefaultI18n,\n\tlocale: 'en',\n\tsetters: {\n\t\tsetLocale: (locale: string): void => {\n\t\t\tset(\n\t\t\t\tproduce((state: I18nState) => {\n\t\t\t\t\tstate.locale = locale;\n\t\t\t\t\tforEach(state.instances, (i18nInst) => i18nInst.changeLanguage(locale));\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t},\n\tgetters: {\n\t\tgetLocale: (state: I18nState): string => state.locale\n\t},\n\tactions: {\n\t\taddI18n: (apps: Array<CarbonioModule>, locale: string): void => {\n\t\t\tconst appsWithShell = addShell(apps);\n\t\t\tset(\n\t\t\t\tproduce((state: I18nState) => {\n\t\t\t\t\tstate.instances = reduce<CarbonioModule, Record<string, i18n>>(\n\t\t\t\t\t\tappsWithShell,\n\t\t\t\t\t\t(acc, app): Record<string, i18n> => {\n\t\t\t\t\t\t\tconst newI18n = i18next.createInstance();\n\t\t\t\t\t\t\tnewI18n\n\t\t\t\t\t\t\t\t// load translation using http -> see /public/locales (i.e. https://github.com/i18next/react-i18next/tree/master/example/react/public/locales)\n\t\t\t\t\t\t\t\t// learn more: https://github.com/i18next/i18next-http-backend\n\t\t\t\t\t\t\t\t.use(Backend)\n\t\t\t\t\t\t\t\t// init i18next\n\t\t\t\t\t\t\t\t// for all options read: https://www.i18next.com/overview/configuration-options\n\t\t\t\t\t\t\t\t.init({\n\t\t\t\t\t\t\t\t\t...defaultI18nInitOptions,\n\t\t\t\t\t\t\t\t\tlng: locale,\n\t\t\t\t\t\t\t\t\tbackend: {\n\t\t\t\t\t\t\t\t\t\tloadPath:\n\t\t\t\t\t\t\t\t\t\t\tapp.name === SHELL_APP_ID\n\t\t\t\t\t\t\t\t\t\t\t\t? `${BASE_PATH}/i18n/{{lng}}.json`\n\t\t\t\t\t\t\t\t\t\t\t\t: `${dropRight(app.js_entrypoint.split('/')).join('/')}/i18n/{{lng}}.json`\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\t\tacc[app.name] = newI18n;\n\t\t\t\t\t\t\treturn acc;\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{}\n\t\t\t\t\t);\n\t\t\t\t\tstate.defaultI18n.t = state.instances[SHELL_APP_ID].t;\n\t\t\t\t\tstate.locale = locale;\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n}));\n\ndefaultI18n\n\t.use(Backend)\n\t// pass the i18n instance to react-i18next.\n\t.use(initReactI18next)\n\t// init i18next\n\t// for all options read: https://www.i18next.com/overview/configuration-options\n\t.init(defaultI18nInitOptions);\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { i18n, TFunction } from 'i18next';\n\nimport { useI18nStore } from './store';\nimport { SHELL_APP_ID } from '../../constants';\n\nexport const getI18n = (app: string) => (): i18n => {\n\tconst { instances, defaultI18n } = useI18nStore.getState();\n\treturn instances[app] ?? instances[SHELL_APP_ID] ?? defaultI18n;\n};\n\nexport const getTFunction = (app: string): TFunction => {\n\tconst { instances, defaultI18n } = useI18nStore.getState();\n\treturn instances[app]?.t ?? defaultI18n.t;\n};\n\nexport const getT = (): TFunction => {\n\tconst { instances, defaultI18n } = useI18nStore.getState();\n\treturn instances[SHELL_APP_ID]?.t ?? defaultI18n.t;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC } from 'react';\n\nimport { I18nextProvider } from 'react-i18next';\n\nimport AppErrorCatcher from './app-error-catcher';\nimport { SHELL_APP_ID } from '../../constants';\nimport { useI18nStore } from '../../store/i18n';\n\nconst AppContextProvider: FC<{ pkg: string }> = ({ pkg, children }) => {\n\tconst { instances, defaultI18n } = useI18nStore.getState();\n\tconst i18n = instances[pkg] ?? instances[SHELL_APP_ID] ?? defaultI18n;\n\treturn (\n\t\t<I18nextProvider i18n={i18n}>\n\t\t\t<AppErrorCatcher>{children}</AppErrorCatcher>\n\t\t</I18nextProvider>\n\t);\n};\n\nexport default AppContextProvider;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC } from 'react';\n\nimport { trim } from 'lodash';\n\nimport {\n\tAppRouteDescriptor,\n\tBadgeInfo,\n\tBoardView,\n\tCarbonioModule,\n\tPrimaryAccessoryView,\n\tSearchView,\n\tSecondaryAccessoryView,\n\tSettingsView,\n\tUtilityView\n} from '../../../types';\n\nexport const normalizeApp = (app: Partial<CarbonioModule>): CarbonioModule => ({\n\tcommit: app.commit ?? '',\n\tdescription: app.description ?? 'A carbonio Module',\n\t// eslint-disable-next-line camelcase\n\tjs_entrypoint: app.js_entrypoint ?? '',\n\tname: app.name ?? 'module',\n\tpriority: app.priority ?? 99,\n\tversion: app.version ?? '',\n\ttype: app.type ?? 'carbonio',\n\tattrKey: app.attrKey,\n\ticon: app.icon ?? 'Cube',\n\tdisplay: app.display ?? 'Module',\n\tsentryDsn: app.sentryDsn\n});\n\nconst FallbackView: FC = () => <p>Missing Component</p>;\n\nexport const normalizeBadgeInfo = (badge: Partial<BadgeInfo>): BadgeInfo => ({\n\tshow: badge.show ?? false,\n\tcount: badge.count ?? 0,\n\tshowCount: badge.showCount ?? false,\n\tcolor: badge.color ?? 'primary'\n});\n\nexport const normalizeRoute = (\n\tdata: Partial<AppRouteDescriptor>,\n\tapp: CarbonioModule\n): AppRouteDescriptor => {\n\tconst route = trim(data.route ?? app.name, '/');\n\treturn {\n\t\tapp: app.name,\n\t\troute,\n\t\tid: data.id ?? route,\n\t\tbadge: normalizeBadgeInfo(data?.badge ?? {}),\n\t\tposition: data?.position ?? app.priority,\n\t\tvisible: data?.visible ?? true,\n\t\tlabel: data?.label ?? '',\n\t\tprimaryBar: data.primaryBar ?? app.icon ?? 'CubeOutline',\n\t\tsecondaryBar: data.secondaryBar,\n\t\tappView: data.appView ?? FallbackView,\n\t\tstandalone: {\n\t\t\thidePrimaryBar: data?.standalone?.hidePrimaryBar,\n\t\t\thideShellHeader: data?.standalone?.hideShellHeader,\n\t\t\tallowUnauthenticated: data?.standalone?.allowUnauthenticated\n\t\t}\n\t};\n};\n\nexport const normalizeSettingsView = (\n\tdata: Partial<SettingsView>,\n\tapp: CarbonioModule\n): SettingsView => {\n\tconst route = trim(data.route ?? app.name, '/');\n\treturn {\n\t\tapp: app.name,\n\t\troute,\n\t\tid: data?.id ?? route,\n\t\tcomponent: data?.component ?? FallbackView,\n\t\tlabel: data.label ?? app.display,\n\t\ticon: data.icon ?? app.icon,\n\t\tposition: data.position ?? app.priority ?? 99,\n\t\tsubSections: data.subSections ?? []\n\t};\n};\nexport const normalizeSearchView = (data: Partial<SearchView>, app: CarbonioModule): SearchView => {\n\tconst route = trim(data.route ?? app.name, '/');\n\treturn {\n\t\tapp: app.name,\n\t\troute,\n\t\tid: data?.id ?? route,\n\t\tcomponent: data?.component ?? FallbackView,\n\t\tlabel: data.label ?? app.display,\n\t\ticon: data.icon ?? app.icon,\n\t\tposition: data.position ?? app.priority ?? 99\n\t};\n};\nexport const normalizeUtilityView = (\n\tdata: Partial<UtilityView>,\n\tapp: CarbonioModule\n): UtilityView => ({\n\tapp: app.name,\n\tid: data?.id ?? app.name,\n\twhitelistRoutes: data?.whitelistRoutes,\n\tblacklistRoutes: data?.blacklistRoutes,\n\tcomponent: data?.component ?? FallbackView,\n\tbutton: data?.button ?? 'Cube',\n\tbadge: normalizeBadgeInfo(data?.badge ?? {}),\n\tposition: data?.position ?? app.priority,\n\tlabel: data?.label ?? app.display\n});\nexport const normalizePrimaryAccessoryView = (\n\tdata: Partial<PrimaryAccessoryView>,\n\tapp: CarbonioModule\n): PrimaryAccessoryView => ({\n\tapp: app.name,\n\tonClick: data?.onClick,\n\tlabel: data?.label ?? app.display,\n\tposition: data?.position ?? app.priority,\n\twhitelistRoutes: data?.whitelistRoutes,\n\tblacklistRoutes: data?.blacklistRoutes,\n\tid: data?.id ?? app.name,\n\tcomponent: data?.component ?? FallbackView\n});\nexport const normalizeSecondaryAccessoryView = (\n\tdata: Partial<SecondaryAccessoryView>,\n\tapp: CarbonioModule\n): SecondaryAccessoryView => ({\n\tapp: app.name,\n\tposition: data?.position ?? app.priority,\n\twhitelistRoutes: data?.whitelistRoutes,\n\tblacklistRoutes: data?.blacklistRoutes,\n\tid: data?.id ?? app.name,\n\tcomponent: data?.component ?? FallbackView\n});\n\nexport const normalizeBoardView = (data: Partial<BoardView>, app: CarbonioModule): BoardView => {\n\tconst route = trim(data.route ?? app.name, '/');\n\treturn {\n\t\tapp: app.name,\n\t\troute,\n\t\tid: data?.id ?? route,\n\t\tcomponent: data?.component ?? FallbackView\n\t};\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport produce from 'immer';\nimport { filter, find, findIndex, merge, omit, reduce, sortBy, unionBy, unionWith } from 'lodash';\nimport { create } from 'zustand';\n\nimport { normalizeApp } from './utils';\nimport type {\n\tAppRouteDescriptor,\n\tAppState,\n\tAppView,\n\tBadgeInfo,\n\tBoardView,\n\tCarbonioModule,\n\tPrimaryAccessoryView,\n\tPrimaryBarView,\n\tSearchView,\n\tSecondaryAccessoryView,\n\tSecondaryBarView,\n\tSettingsView,\n\tUtilityView\n} from '../../../types';\nimport { SHELL_APP_ID } from '../../constants';\n\nconst filterById = <T extends { id: string }>(items: Array<T>, id: string): Array<T> =>\n\tfilter(items, (item) => item.id !== id);\n\nconst STANDALONE_RESPONSE = 'standalone';\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useAppStore = create<AppState>()((set, get) => ({\n\tstandalone: false,\n\tapps: {},\n\tappContexts: {},\n\tshell: {\n\t\tcommit: '',\n\t\tdescription: '',\n\t\tjs_entrypoint: '',\n\t\tname: SHELL_APP_ID,\n\t\tpriority: -1,\n\t\tversion: '',\n\t\ttype: 'shell',\n\t\tattrKey: '',\n\t\ticon: '',\n\t\tdisplay: 'Shell'\n\t},\n\tentryPoints: {},\n\troutes: {},\n\tviews: {\n\t\tprimaryBar: [],\n\t\tsecondaryBar: [],\n\t\tappView: [],\n\t\tboard: [],\n\t\tutilityBar: [],\n\t\tsettings: [],\n\t\tsearch: [],\n\t\tprimaryBarAccessories: [],\n\t\tsecondaryBarAccessories: []\n\t},\n\tsetters: {\n\t\taddApps: (apps: Array<Partial<CarbonioModule>>): void => {\n\t\t\tset((state) => ({\n\t\t\t\tapps: reduce(\n\t\t\t\t\tapps,\n\t\t\t\t\t(acc, app) =>\n\t\t\t\t\t\tapp.name && app.name !== SHELL_APP_ID\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t\t\t\t[app.name]: normalizeApp(app)\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: acc,\n\t\t\t\t\t{}\n\t\t\t\t),\n\t\t\t\tshell: {\n\t\t\t\t\t...state.shell,\n\t\t\t\t\t...(find(apps, (app) => app.name === SHELL_APP_ID) ?? {})\n\t\t\t\t},\n\t\t\t\tappContexts: reduce(apps, (acc, val) => (val.name ? { ...acc, [val.name]: {} } : acc), {})\n\t\t\t}));\n\t\t},\n\t\tsetAppContext:\n\t\t\t(app: string) =>\n\t\t\t(context: unknown): void => {\n\t\t\t\tset(\n\t\t\t\t\tproduce((state: AppState) => {\n\t\t\t\t\t\tstate.appContexts[app] = merge(state.appContexts[app], context);\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t},\n\t\t// add route (id route primaryBar secondaryBar app)\n\t\taddRoute: (routeData: AppRouteDescriptor): string => {\n\t\t\tconst { standalone } = get();\n\t\t\tif (standalone && routeData.route !== standalone) {\n\t\t\t\treturn STANDALONE_RESPONSE;\n\t\t\t}\n\t\t\tset(\n\t\t\t\tproduce((state: AppState) => {\n\t\t\t\t\tstate.routes[routeData.id] = routeData;\n\t\t\t\t\tif (routeData.primaryBar) {\n\t\t\t\t\t\tstate.views.primaryBar = sortBy(\n\t\t\t\t\t\t\tunionWith<PrimaryBarView>(\n\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tapp: routeData.app,\n\t\t\t\t\t\t\t\t\t\tid: routeData.id,\n\t\t\t\t\t\t\t\t\t\troute: routeData.route,\n\t\t\t\t\t\t\t\t\t\tcomponent: routeData.primaryBar,\n\t\t\t\t\t\t\t\t\t\tbadge: routeData.badge,\n\t\t\t\t\t\t\t\t\t\tposition: routeData.position,\n\t\t\t\t\t\t\t\t\t\tvisible: routeData.visible,\n\t\t\t\t\t\t\t\t\t\tlabel: routeData.label\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tstate.views.primaryBar,\n\t\t\t\t\t\t\t\t(a, b): boolean => a.id === b.id\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t'position'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (routeData.secondaryBar) {\n\t\t\t\t\t\tstate.views.secondaryBar = unionWith<SecondaryBarView>(\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tapp: routeData.app,\n\t\t\t\t\t\t\t\t\tid: routeData.id,\n\t\t\t\t\t\t\t\t\troute: routeData.route,\n\t\t\t\t\t\t\t\t\tcomponent: routeData.secondaryBar\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tstate.views.secondaryBar,\n\t\t\t\t\t\t\t(a, b): boolean => a.id === b.id\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (routeData.appView) {\n\t\t\t\t\t\tstate.views.appView = unionWith<AppView>(\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tapp: routeData.app,\n\t\t\t\t\t\t\t\t\tid: routeData.id,\n\t\t\t\t\t\t\t\t\troute: routeData.route,\n\t\t\t\t\t\t\t\t\tcomponent: routeData.appView\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tstate.views.appView,\n\t\t\t\t\t\t\t(a, b): boolean => a.id === b.id\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (routeData.app) {\n\t\t\t\t\t\tstate.apps[routeData.app].display = routeData.label;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn routeData.id;\n\t\t},\n\t\tsetRouteVisibility: (id: string, visible: boolean): void => {\n\t\t\tset(\n\t\t\t\tproduce((state: AppState) => {\n\t\t\t\t\tconst idx = findIndex(state.views.primaryBar, (view) => view.id === id);\n\t\t\t\t\tif (idx >= 0) {\n\t\t\t\t\t\tstate.views.primaryBar[idx].visible = visible;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\n\t\t// remove route (id | route)\n\t\tremoveRoute: (id: string): void => {\n\t\t\tset(\n\t\t\t\tproduce((state: AppState) => {\n\t\t\t\t\tstate.routes = omit(state.routes, [id]);\n\t\t\t\t\tstate.views.primaryBar = filterById(state.views.primaryBar, id);\n\t\t\t\t\tstate.views.secondaryBar = filterById(state.views.secondaryBar, id);\n\t\t\t\t\tstate.views.appView = filterById(state.views.appView, id);\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t// add board\n\t\taddBoardView: (data: BoardView): string => {\n\t\t\tset(\n\t\t\t\tproduce((state: AppState) => {\n\t\t\t\t\tstate.views.board = unionBy([data], state.views.board, 'id');\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn data.id;\n\t\t},\n\n\t\t// remove board\n\t\tremoveBoardView: (id: string): void => {\n\t\t\tset(\n\t\t\t\tproduce((state: AppState) => {\n\t\t\t\t\tstate.views.board = filterById(state.views.board, id);\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\n\t\t// add settings\n\t\taddSettingsView: (data: SettingsView): string => {\n\t\t\tconst { standalone } = get();\n\t\t\tif (standalone && data.route !== standalone) {\n\t\t\t\treturn STANDALONE_RESPONSE;\n\t\t\t}\n\t\t\tset(\n\t\t\t\tproduce((state: AppState) => {\n\t\t\t\t\tstate.views.settings = sortBy(unionBy([data], state.views.settings, 'id'), 'position');\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn data.id;\n\t\t},\n\n\t\t// remove settings\n\t\tremoveSettingsView: (id: string): void => {\n\t\t\tset(\n\t\t\t\tproduce((state: AppState) => {\n\t\t\t\t\tstate.views.settings = filterById(state.views.settings, id);\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t//\n\t\t// add search\n\t\taddSearchView: (data: SearchView): string => {\n\t\t\tconst { standalone } = get();\n\t\t\tif (standalone && data.route !== standalone) {\n\t\t\t\treturn STANDALONE_RESPONSE;\n\t\t\t}\n\t\t\tset(\n\t\t\t\tproduce((state: AppState) => {\n\t\t\t\t\tstate.views.search = sortBy(unionBy([data], state.views.search, 'id'), 'position');\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn data.id;\n\t\t},\n\t\t// remove search\n\t\tremoveSearchView: (id: string): void => {\n\t\t\tset(\n\t\t\t\tproduce((state: AppState) => {\n\t\t\t\t\tstate.views.search = filterById(state.views.search, id);\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t//\n\t\t// add utility\n\t\taddUtilityView: (data: UtilityView): string => {\n\t\t\tset(\n\t\t\t\tproduce((state: AppState) => {\n\t\t\t\t\tstate.views.utilityBar = sortBy(\n\t\t\t\t\t\tunionBy([data], state.views.utilityBar, 'id'),\n\t\t\t\t\t\t'position'\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn data.id;\n\t\t},\n\t\t// remove utility\n\t\tremoveUtilityView: (id: string): void => {\n\t\t\tset(\n\t\t\t\tproduce((state: AppState) => {\n\t\t\t\t\tstate.views.utilityBar = filterById(state.views.utilityBar, id);\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t//\n\t\t// add primaryAccessory\n\t\taddPrimaryAccessoryView: (data: PrimaryAccessoryView): string => {\n\t\t\tset(\n\t\t\t\tproduce((state: AppState) => {\n\t\t\t\t\tstate.views.primaryBarAccessories = unionBy(\n\t\t\t\t\t\t[data],\n\t\t\t\t\t\tstate.views.primaryBarAccessories,\n\t\t\t\t\t\t'id'\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn data.id;\n\t\t},\n\t\t// remove primaryAccessory\n\t\tremovePrimaryAccessoryView: (id: string): void => {\n\t\t\tset(\n\t\t\t\tproduce((state: AppState) => {\n\t\t\t\t\tstate.views.primaryBarAccessories = filterById(state.views.primaryBarAccessories, id);\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t//\n\t\t// add secondaryAccessory\n\t\taddSecondaryAccessoryView: (data: SecondaryAccessoryView): string => {\n\t\t\tset(\n\t\t\t\tproduce((state: AppState) => {\n\t\t\t\t\tstate.views.secondaryBarAccessories = unionBy(\n\t\t\t\t\t\t[data],\n\t\t\t\t\t\tstate.views.secondaryBarAccessories,\n\t\t\t\t\t\t'id'\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn data.id;\n\t\t},\n\t\t// remove secondaryAccessory\n\t\tremoveSecondaryAccessoryView: (id: string): void => {\n\t\t\tset(\n\t\t\t\tproduce((state: AppState) => {\n\t\t\t\t\tstate.views.secondaryBarAccessories = filterById(state.views.secondaryBarAccessories, id);\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\tupdatePrimaryBadge: (badge: Partial<BadgeInfo>, id: string): void => {\n\t\t\tset(\n\t\t\t\tproduce((state: AppState) => {\n\t\t\t\t\tconst idx = findIndex(state.views.primaryBar, (bar) => bar.id === id);\n\t\t\t\t\tif (idx >= 0) {\n\t\t\t\t\t\tstate.views.primaryBar[idx].badge = {\n\t\t\t\t\t\t\t...state.views.primaryBar[idx].badge,\n\t\t\t\t\t\t\t...badge\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\tupdateUtilityBadge: (badge: Partial<BadgeInfo>, id: string): void => {\n\t\t\tset(\n\t\t\t\tproduce((state: AppState) => {\n\t\t\t\t\tconst idx = findIndex(state.views.utilityBar, (bar) => bar.id === id);\n\t\t\t\t\tif (idx >= 0) {\n\t\t\t\t\t\tstate.views.utilityBar[idx].badge = {\n\t\t\t\t\t\t\t...state.views.utilityBar[idx].badge,\n\t\t\t\t\t\t\t...badge\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n}));\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\n/* eslint-disable react-hooks/rules-of-hooks */\n/* THIS FILE CONTAINS HOOKS, BUT ESLINT IS DUMB */\n\nimport { useMemo } from 'react';\n\nimport { sortBy } from 'lodash';\n\nimport { useAppStore } from './store';\nimport { AppRoute, CarbonioModule } from '../../../types';\n\nexport const useApp = (appId: string) => (): CarbonioModule => useAppStore((s) => s.apps[appId]);\nexport const useApps = (): Record<string, CarbonioModule> => useAppStore((s) => s.apps);\nexport const getAppViews = (): any => useAppStore((s) => s.views.appView);\nexport const useAppList = (): Array<CarbonioModule> => {\n\tconst apps = useApps();\n\treturn useMemo(() => sortBy(apps, (a) => a.priority), [apps]);\n};\nexport const getAppList = (): Array<CarbonioModule> =>\n\tsortBy(useAppStore.getState().apps, (a) => a.priority);\n\nexport const getApp = (appId: string) => (): CarbonioModule | undefined =>\n\tuseAppStore.getState().apps[appId];\nexport const getApps = (): Record<string, CarbonioModule> => useAppStore.getState().apps;\n\nexport const useAppContext = (appId: string) => (): unknown =>\n\tuseAppStore((s) => s.appContexts[appId]);\nexport const getAppContext = (appId: string) => (): unknown =>\n\tuseAppStore.getState().appContexts[appId];\nexport const getShell = (): CarbonioModule => useAppStore.getState().shell;\nexport const getRoutes = (): Record<string, AppRoute> => useAppStore.getState().routes;\nexport const useRoutes = (): Record<string, AppRoute> => useAppStore((s) => s.routes);\nexport const getRoute = (id: string): AppRoute => useAppStore.getState().routes[id];\nexport const useRoute = (id: string): AppRoute => useAppStore((s) => s.routes[id]);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC, Suspense, useMemo } from 'react';\n\nimport { map } from 'lodash';\n\nimport AppContextProvider from './app-context-provider';\nimport { useAppStore } from '../../store/app';\n\nconst Mounter: FC<{ appId: string }> = ({ children, appId }) => (\n\t<div key={appId} id={appId}>\n\t\t<AppContextProvider key={appId} pkg={appId}>\n\t\t\t<Suspense fallback={''}>{children}</Suspense>\n\t\t</AppContextProvider>\n\t</div>\n);\n\nconst AppLoaderMounter: FC = () => {\n\tconst entryPoints = useAppStore((s) => s.entryPoints);\n\tconst entries = useMemo(\n\t\t() =>\n\t\t\tmap(entryPoints, (Comp, appId) => (\n\t\t\t\t<Mounter key={appId} appId={appId}>\n\t\t\t\t\t<Comp />\n\t\t\t\t</Mounter>\n\t\t\t)),\n\t\t[entryPoints]\n\t);\n\n\treturn (\n\t\t<div\n\t\t\tdata-testid=\"app-mounter\"\n\t\t\tkey=\"app-mounter\"\n\t\t\thidden\n\t\t\tstyle={{ height: 0, overflow: 'hidden' }}\n\t\t>\n\t\t\t{entries}\n\t\t</div>\n\t);\n};\n\nexport default AppLoaderMounter;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport {\n\tBrowserClient,\n\tdefaultIntegrations,\n\tdefaultStackParser,\n\tHub,\n\tmakeFetchTransport\n} from '@sentry/browser';\nimport { reduce } from 'lodash';\nimport { create } from 'zustand';\n\nimport type { CarbonioModule } from '../../types';\nimport { SENTRY_FEEDBACK_DNS, SENTRY_SHELL_DSN, SHELL_APP_ID } from '../constants';\n\ntype ReporterState = {\n\tclients: Record<string, Hub>;\n\tsetClients: (apps: Array<CarbonioModule>) => void;\n};\n\nexport const useReporter = create<ReporterState>()((set) => ({\n\tclients: {\n\t\t[SHELL_APP_ID]: new Hub(\n\t\t\tnew BrowserClient({\n\t\t\t\ttransport: makeFetchTransport,\n\t\t\t\tstackParser: defaultStackParser,\n\t\t\t\tintegrations: defaultIntegrations,\n\t\t\t\tdsn: SENTRY_SHELL_DSN,\n\t\t\t\trelease: '0',\n\t\t\t\tmaxValueLength: 500\n\t\t\t})\n\t\t),\n\t\tfeedbacks: new Hub(\n\t\t\tnew BrowserClient({\n\t\t\t\ttransport: makeFetchTransport,\n\t\t\t\tstackParser: defaultStackParser,\n\t\t\t\tintegrations: defaultIntegrations,\n\t\t\t\tdsn: SENTRY_FEEDBACK_DNS,\n\t\t\t\trelease: '0',\n\t\t\t\tmaxValueLength: 500\n\t\t\t})\n\t\t)\n\t},\n\tsetClients: (apps): void => {\n\t\tset((s) => ({\n\t\t\tclients: reduce(\n\t\t\t\tapps,\n\t\t\t\t(acc, app) => {\n\t\t\t\t\tif (app.sentryDsn) {\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\ts.clients[app.name] = new Hub(\n\t\t\t\t\t\t\tnew BrowserClient({\n\t\t\t\t\t\t\t\ttransport: makeFetchTransport,\n\t\t\t\t\t\t\t\tstackParser: defaultStackParser,\n\t\t\t\t\t\t\t\tintegrations: defaultIntegrations,\n\t\t\t\t\t\t\t\tdsn: app.sentryDsn,\n\t\t\t\t\t\t\t\trelease: app.version,\n\t\t\t\t\t\t\t\tmaxValueLength: 500\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\ts.clients\n\t\t\t)\n\t\t}));\n\t}\n}));\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport type { Event, EventHint } from '@sentry/browser';\n\nimport { useReporter } from './store';\n\nexport const report =\n\t(appId: string) =>\n\t(error: Event, hint?: EventHint): string => {\n\t\tconst reporter = useReporter.getState();\n\t\tconst eventId = reporter.clients[appId]?.captureException(error, { ...hint });\n\t\tif (eventId) {\n\t\t\tconsole.info('Reported event ', eventId);\n\t\t}\n\t\treturn eventId;\n\t};\n\nexport const feedback = (message: Event): string => {\n\tconst reporter = useReporter.getState();\n\tconst eventId = reporter.clients.feedbacks.captureEvent({ ...message, level: 'info' });\n\tif (eventId) {\n\t\tconsole.info('Feedback ', eventId, ' sent, Thank you');\n\t}\n\treturn eventId;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport produce from 'immer';\nimport { forEach, trimStart, uniqueId } from 'lodash';\nimport { create } from 'zustand';\n\nimport type { BoardState, Board } from '../../../types';\nimport { getApp } from '../app';\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useBoardStore = create<BoardState>()(() => ({\n\torderedBoards: [],\n\tboards: {},\n\texpanded: false,\n\tminimized: false\n}));\n\nexport const addBoard =\n\t(app: string) =>\n\t<T = unknown>(\n\t\tboard: Omit<Board<T>, 'app' | 'icon' | 'id'> & { id?: string; icon?: string },\n\t\texpanded?: BoardState['expanded']\n\t): Board => {\n\t\tconst id = board.id ?? uniqueId('board-');\n\t\tuseBoardStore.setState(\n\t\t\tproduce((state: BoardState) => {\n\t\t\t\tstate.boards[id] = {\n\t\t\t\t\t...board,\n\t\t\t\t\tapp,\n\t\t\t\t\tid,\n\t\t\t\t\ticon: board.icon ?? getApp(app)()?.icon ?? 'CubeOutline',\n\t\t\t\t\turl: trimStart(board.url, '/')\n\t\t\t\t};\n\t\t\t\tstate.current = id;\n\t\t\t\tstate.minimized = false;\n\t\t\t\tstate.expanded = expanded ?? state.expanded;\n\t\t\t\tstate.orderedBoards.unshift(id);\n\t\t\t})\n\t\t);\n\t\treturn useBoardStore.getState().boards[id];\n\t};\nexport const closeBoard = (id: string): void => {\n\tuseBoardStore.setState(\n\t\tproduce((state: BoardState) => {\n\t\t\tstate.boards[id]?.onClose?.(state.boards[id]);\n\t\t\tdelete state.boards[id];\n\t\t\tconst index = state.orderedBoards.findIndex((boardId) => boardId === id);\n\t\t\tif (state.current === id) {\n\t\t\t\tstate.current = state.orderedBoards[index + 1] || state.orderedBoards[index - 1];\n\t\t\t}\n\t\t\tif (index !== -1) {\n\t\t\t\tstate.orderedBoards.splice(index, 1);\n\t\t\t}\n\t\t})\n\t);\n};\nexport const closeAllBoards = (): void => {\n\tuseBoardStore.setState(\n\t\tproduce((state: BoardState) => {\n\t\t\tforEach(state.boards, (b) => {\n\t\t\t\tb?.onClose?.(b);\n\t\t\t\tdelete state.boards[b.id];\n\t\t\t});\n\t\t\tstate.orderedBoards = [];\n\t\t})\n\t);\n};\nexport const onGoToPanel = (): void => {\n\tuseBoardStore.setState(\n\t\tproduce((state: BoardState) => {\n\t\t\tconst id = state.current;\n\t\t\tif (id) {\n\t\t\t\tstate.boards[id]?.onGoToPanel?.(state.boards[id]);\n\t\t\t\tdelete state.boards[id];\n\t\t\t\tconst index = state.orderedBoards.findIndex((boardId) => boardId === id);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tstate.orderedBoards.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t);\n};\nexport const minimizeBoards = (): void => {\n\tuseBoardStore.setState({\n\t\tminimized: true\n\t});\n};\nexport const reopenBoards = (): void => {\n\tuseBoardStore.setState({\n\t\tminimized: false\n\t});\n};\nexport const expandBoards = (): void => {\n\tuseBoardStore.setState({\n\t\texpanded: true\n\t});\n};\nexport const reduceBoards = (): void => {\n\tuseBoardStore.setState({\n\t\texpanded: false\n\t});\n};\nexport const setCurrentBoard = (id: string): void => {\n\tuseBoardStore.setState({\n\t\tcurrent: id\n\t});\n};\nexport const updateBoard = <T = unknown>(id: string, board: Partial<Board<T>>): void => {\n\tuseBoardStore.setState(\n\t\tproduce((state: BoardState) => {\n\t\t\tif (state.boards[id])\n\t\t\t\tstate.boards[id] = {\n\t\t\t\t\t...state.boards[id],\n\t\t\t\t\t...board\n\t\t\t\t};\n\t\t})\n\t);\n};\nexport const updateBoardContext = <T = unknown>(id: string, context: T): void => {\n\tuseBoardStore.setState(\n\t\tproduce((state: BoardState) => {\n\t\t\tif (state.boards[id]) {\n\t\t\t\tstate.boards[id].context = context;\n\t\t\t}\n\t\t})\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, useContext, useMemo, createContext } from 'react';\n\nimport { closeBoard, setCurrentBoard, updateBoard, useBoardStore } from './store';\nimport { Board, BoardHooksContext } from '../../../types';\n\nexport const useBoardById = <T,>(id: string): Board<T> => useBoardStore((s) => s.boards[id]);\nexport const getBoardById = <T,>(id: string): Board<T> => useBoardStore.getState().boards[id];\nexport const useBoardContextById = <T,>(id: string): T =>\n\tuseBoardStore((s) => s.boards[id].context);\nexport const getBoardContextById = <T,>(id: string): T =>\n\tuseBoardStore.getState().boards[id].context;\n\n// Must be empty if no board is available\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nexport const boardContext = createContext<Board>();\n// Must be empty if no board is available\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nexport const boardHooksContext = createContext<BoardHooksContext>();\n\nexport const BoardProvider: FC<{ id: string }> = ({ children, id }) => {\n\tconst board = useBoardById(id);\n\tconst callbacks = useMemo<BoardHooksContext>(\n\t\t() => ({\n\t\t\tgetBoardContext: () => getBoardContextById(id),\n\t\t\tgetBoard: () => getBoardById(id),\n\t\t\tcloseBoard: () => closeBoard(id),\n\t\t\tupdateBoard: (b) => updateBoard(id, b),\n\t\t\tsetCurrentBoard: () => setCurrentBoard(id)\n\t\t}),\n\t\t[id]\n\t);\n\treturn (\n\t\t<boardHooksContext.Provider value={callbacks}>\n\t\t\t<boardContext.Provider value={board}>{children}</boardContext.Provider>\n\t\t</boardHooksContext.Provider>\n\t);\n};\n\nexport const useBoardHooks = (): BoardHooksContext => useContext(boardHooksContext);\nexport const useBoard = (): Board => useContext(boardContext);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, {\n\tTextareaHTMLAttributes,\n\tuseCallback,\n\tuseEffect,\n\tuseMemo,\n\tuseReducer,\n\tuseState\n} from 'react';\n\nimport type { Event as SentryEvent } from '@sentry/browser';\nimport {\n\tButton,\n\tContainer,\n\tContainerProps,\n\tIcon,\n\tLabelFactoryProps,\n\tRow,\n\tSelect,\n\tSelectItem,\n\tText,\n\tuseSnackbar\n} from '@zextras/carbonio-design-system';\nimport type { TFunction } from 'i18next';\nimport { filter, find, map } from 'lodash';\nimport styled, { DefaultTheme } from 'styled-components';\n\nimport { feedback } from './functions';\nimport { useUserAccount } from '../store/account';\nimport { useAppList } from '../store/app';\nimport { closeBoard } from '../store/boards';\nimport { getT } from '../store/i18n';\n\n// TODO: replace with DS TextArea?\nconst TextArea = styled.textarea<{ size?: keyof DefaultTheme['sizes']['font'] }>`\n\twidth: 100%;\n\tmin-height: 8rem;\n\tbox-sizing: border-box;\n\toutline: none;\n\tborder: none;\n\tbackground: ${({ theme }): string => theme.palette.gray5.regular};\n\tresize: none;\n\ttransition: height 0.4s ease;\n\tcolor: ${({ theme }): string => theme.palette.text.regular};\n\tfont-family: ${({ theme }): string => theme.fonts.default};\n\tfont-size: ${({ theme, size }): string => theme.sizes.font[size ?? 'medium']};\n\t&:focus {\n\t\tbackground: ${({ theme }): string => theme.palette.gray4.regular};\n\t\toutline: none;\n\t}\n`;\n\nconst TextContainer = styled(Container)`\n\ttext-align: justify;\n\talign-items: flex-start;\n\twidth: 80%;\n`;\n\nconst ButtonContainer = styled(Container)`\n\twidth: 20%;\n\tposition: relative;\n`;\n\nconst TAContainer = styled(Container)`\n\tbackground: ${({ theme }): string => theme.palette.gray5.regular};\n\tborder-radius: 0.125rem 0.125rem 0 0;\n\tpadding: 0.5rem;\n\ttransition: height 0.4s ease;\n\theight: auto;\n\tmax-height: 50%;\n\t&:focus-within {\n\t\tbackground: ${({ theme }): string => theme.palette.gray4.regular};\n\t\toutline: none;\n\t\tborder-bottom: 0.0625rem solid ${({ theme }): string => theme.palette.primary.regular};\n\t}\n`;\n\nconst SubHeadingText = styled(Text)<{ lineHeight?: string }>`\n\tborder-radius: 0.125rem 0.125rem 0 0;\n\tfont-size: 0.875rem;\n\tfont-weight: 300;\n\tmargin-top: 0.625rem;\n\tline-height: ${({ lineHeight }): string => lineHeight ?? 'normal'};\n`;\n\ninterface LabelContainerProps extends ContainerProps {\n\tdisabled: boolean;\n}\n\nconst LabelContainer = styled(Container)<LabelContainerProps>`\n\tborder-bottom: 0.0625rem solid\n\t\t${({ theme, disabled }): string =>\n\t\t\tdisabled ? theme.palette.error.regular : theme.palette.gray2.regular};\n`;\n\nconst emptyEvent: SentryEvent = {\n\tmessage: '',\n\tlevel: 'info',\n\trelease: 'unknown',\n\textra: {\n\t\tapp: '0',\n\t\ttopic: '0'\n\t},\n\tuser: {}\n};\n\ntype SentryEventReducer =\n\t| { type: 'set-user'; payload: SentryEvent['user'] }\n\t| { type: 'reset'; payload: never }\n\t| { type: 'set-message'; payload: SentryEvent['message'] }\n\t| { type: 'select-app'; payload: { version: SentryEvent['release']; app: string } }\n\t| { type: 'select-topic'; payload: string };\n\nfunction reducer(state: SentryEvent, { type, payload }: SentryEventReducer): SentryEvent {\n\tswitch (type) {\n\t\tcase 'set-user':\n\t\t\treturn { ...state, user: payload };\n\t\tcase 'reset':\n\t\t\treturn emptyEvent;\n\t\tcase 'set-message':\n\t\t\treturn { ...state, message: payload };\n\t\tcase 'select-app':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trelease: payload.version,\n\t\t\t\textra: { ...state.extra, app: payload.app }\n\t\t\t};\n\t\tcase 'select-topic':\n\t\t\treturn { ...state, extra: { ...state.extra, topic: payload } };\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\ntype Topic = { label: string; value: string };\n\nconst getTopics = (t: TFunction): Array<Topic> => [\n\t{ label: t('feedback.user_interface', 'User interface'), value: 'UserInterface' },\n\t{ label: t('feedback.behaviors', 'Behaviors'), value: 'Behaviors' },\n\t{ label: t('feedback.missing_features', 'Missing features'), value: 'MissingFeatures' },\n\t{ label: t('feedback.other', 'Other'), value: 'Other' }\n];\n\ninterface ModuleLabelFactory {\n\tselected: SelectItem[];\n\tlabel?: string;\n\topen: boolean;\n\tfocus: boolean;\n\tdisabled: boolean;\n}\n\nconst ModuleLabelFactory = ({\n\tselected,\n\tlabel,\n\topen,\n\tfocus,\n\tdisabled\n}: ModuleLabelFactory): JSX.Element => (\n\t<LabelContainer\n\t\torientation=\"horizontal\"\n\t\twidth=\"fill\"\n\t\tcrossAlignment=\"center\"\n\t\tmainAlignment=\"space-between\"\n\t\tborderRadius=\"half\"\n\t\tbackground={'gray5'}\n\t\tpadding={{\n\t\t\tall: 'small'\n\t\t}}\n\t\tdisabled={disabled}\n\t>\n\t\t<Row takeAvailableSpace mainAlignment=\"unset\">\n\t\t\t<Text size=\"medium\" color={open || focus ? 'primary' : 'secondary'}>\n\t\t\t\t{selected.length > 0 ? selected[0].label : label}\n\t\t\t</Text>\n\t\t</Row>\n\t\t<Icon\n\t\t\tsize=\"large\"\n\t\t\ticon={open ? 'ChevronUpOutline' : 'ChevronDownOutline'}\n\t\t\tcolor={open || focus ? 'primary' : 'secondary'}\n\t\t\tstyle={{ alignSelf: 'center' }}\n\t\t/>\n\t</LabelContainer>\n);\n\ninterface FeedbackLabelFactoryProps extends LabelFactoryProps {\n\tshowErr: boolean;\n}\n\nconst FeedbackLabelFactory = ({\n\tselected,\n\tlabel,\n\topen,\n\tfocus,\n\tshowErr\n}: FeedbackLabelFactoryProps): JSX.Element => (\n\t<LabelContainer\n\t\tdisabled={showErr}\n\t\torientation=\"horizontal\"\n\t\twidth=\"fill\"\n\t\tcrossAlignment=\"center\"\n\t\tmainAlignment=\"space-between\"\n\t\tborderRadius=\"half\"\n\t\tbackground={'gray5'}\n\t\tpadding={{\n\t\t\tall: 'small'\n\t\t}}\n\t>\n\t\t<Row takeAvailableSpace mainAlignment=\"unset\">\n\t\t\t{showErr ? (\n\t\t\t\t<Text size=\"medium\" color={(open && showErr) || focus ? 'primary' : 'error'}>\n\t\t\t\t\t{selected.length > 0 ? selected[0].label : label}\n\t\t\t\t</Text>\n\t\t\t) : (\n\t\t\t\t<Text size=\"medium\" color={open || focus ? 'primary' : 'secondary'}>\n\t\t\t\t\t{selected.length > 0 ? selected[0].label : label}\n\t\t\t\t</Text>\n\t\t\t)}\n\t\t</Row>\n\n\t\t{showErr ? (\n\t\t\t<Icon\n\t\t\t\tsize=\"large\"\n\t\t\t\ticon={open ? 'ChevronUpOutline' : 'ChevronDownOutline'}\n\t\t\t\tcolor={(open && showErr) || focus ? 'primary' : 'error'}\n\t\t\t\tstyle={{ alignSelf: 'center' }}\n\t\t\t/>\n\t\t) : (\n\t\t\t<Icon\n\t\t\t\tsize=\"large\"\n\t\t\t\ticon={open ? 'ChevronUpOutline' : 'ChevronDownOutline'}\n\t\t\t\tcolor={open || focus ? 'primary' : 'secondary'}\n\t\t\t\tstyle={{ alignSelf: 'center' }}\n\t\t\t/>\n\t\t)}\n\t</LabelContainer>\n);\n\nconst Feedback = (): JSX.Element => {\n\tconst t = getT();\n\tconst allApps = useAppList();\n\tconst apps = useMemo(\n\t\t() => filter(allApps, (app) => !!app.sentryDsn),\n\n\t\t[allApps]\n\t);\n\tconst appItems = useMemo(\n\t\t(): SelectItem[] =>\n\t\t\tmap(\n\t\t\t\tapps,\n\t\t\t\t(app): SelectItem => ({\n\t\t\t\t\tlabel: app.display,\n\t\t\t\t\tvalue: app.name\n\t\t\t\t})\n\t\t\t),\n\t\t[apps]\n\t);\n\tconst account = useUserAccount();\n\tconst [sentryEvent, dispatch] = useReducer(reducer, emptyEvent);\n\tconst [showErr, setShowErr] = useState(false);\n\tconst [limit, setLimit] = useState(0);\n\n\tconst onAppSelect = useCallback(\n\t\t(ev) =>\n\t\t\tdispatch({\n\t\t\t\ttype: 'select-app',\n\t\t\t\tpayload: {\n\t\t\t\t\tapp: ev,\n\t\t\t\t\tversion: find(apps, ['name', ev])?.version\n\t\t\t\t}\n\t\t\t}),\n\t\t[apps]\n\t);\n\n\tconst onTopicSelect = useCallback((ev) => {\n\t\tsetShowErr(false);\n\t\tdispatch({ type: 'select-topic', payload: ev });\n\t}, []);\n\n\tconst onInputChange = useCallback<\n\t\tNonNullable<TextareaHTMLAttributes<HTMLTextAreaElement>['onChange']>\n\t>((event) => {\n\t\t// eslint-disable-next-line no-param-reassign\n\t\tevent.target.style.height = 'auto';\n\t\t// eslint-disable-next-line no-param-reassign\n\t\tevent.target.style.height = `${25 + event.target.scrollHeight}px`;\n\t\tif (event.target.value.length <= 500) {\n\t\t\tsetLimit(event.target.value.length);\n\t\t\tdispatch({ type: 'set-message', payload: event.target.value });\n\t\t}\n\t}, []);\n\n\tconst checkTopicSelect = useCallback<\n\t\tNonNullable<TextareaHTMLAttributes<HTMLTextAreaElement>['onKeyUp']>\n\t>(\n\t\t(event) => {\n\t\t\tif (sentryEvent.extra?.topic === '0') {\n\t\t\t\tsetShowErr(true);\n\t\t\t} else {\n\t\t\t\tsetShowErr(false);\n\t\t\t}\n\t\t\tif (event.key === 'Backspace' && sentryEvent.message?.length === 0) {\n\t\t\t\tsetShowErr(false);\n\t\t\t}\n\t\t},\n\t\t[setShowErr, sentryEvent]\n\t);\n\n\tconst createSnackbar = useSnackbar();\n\n\tconst confirmHandler = useCallback(() => {\n\t\tconst feedbackId = feedback(sentryEvent);\n\t\tcreateSnackbar(\n\t\t\tfeedbackId\n\t\t\t\t? { type: 'success', label: t('feedback.success', 'Thank you for your feedback') }\n\t\t\t\t: {\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\tlabel: t('feedback.error', 'There was an error while sending your feedback')\n\t\t\t\t  }\n\t\t);\n\t\tcloseBoard('feedback');\n\t}, [sentryEvent, createSnackbar, t]);\n\n\tuseEffect(() => {\n\t\tdispatch({\n\t\t\ttype: 'set-user',\n\t\t\tpayload: { id: account.id, name: account.displayName ?? account.name }\n\t\t});\n\t}, [account]);\n\n\tconst disabledSend = useMemo(\n\t\t() =>\n\t\t\t(sentryEvent?.message?.length ?? 0) <= 0 ||\n\t\t\tsentryEvent.extra?.topic === '0' ||\n\t\t\tsentryEvent.extra?.app === '0',\n\t\t[sentryEvent.message, sentryEvent.extra?.topic, sentryEvent.extra?.app]\n\t);\n\n\tconst LabelFactory = useCallback(\n\t\t(props: LabelFactoryProps) => <FeedbackLabelFactory {...props} showErr={showErr} />,\n\t\t[showErr]\n\t);\n\n\tconst topics = useMemo(() => getTopics(t), [t]);\n\n\tconst defaultTopic = useMemo(\n\t\t(): Topic =>\n\t\t\tfind(topics, (topic) => topic.value === sentryEvent.extra?.topic) ?? { label: '', value: '' },\n\t\t[sentryEvent.extra?.topic, topics]\n\t);\n\n\treturn (\n\t\t<Container padding={{ all: 'large' }} mainAlignment=\"space-around\">\n\t\t\t<Container orientation=\"horizontal\" height=\"fit\">\n\t\t\t\t<TextContainer mainAlignment=\"flex-start\" crossAlignment=\"flex-start\">\n\t\t\t\t\t<Text weight=\"bold\" size=\"large\">\n\t\t\t\t\t\t{t('feedback.report_something', 'Do you want to report something?')}\n\t\t\t\t\t</Text>\n\t\t\t\t\t<SubHeadingText overflow=\"break-word\" lineHeight=\"1.5\">\n\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t'feedback.explanation',\n\t\t\t\t\t\t\t'Please send us your feedback about your new experience with Zextras Server. Your opinion is meaningful for us to improve our product. So tell us what’s on your mind.'\n\t\t\t\t\t\t)}\n\t\t\t\t\t</SubHeadingText>\n\t\t\t\t\t<SubHeadingText overflow=\"break-word\">\n\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t'feedback.hint',\n\t\t\t\t\t\t\t'Remember: define the topic using module and macro area selectors before write your feedback. Thanks for your help.'\n\t\t\t\t\t\t)}\n\t\t\t\t\t</SubHeadingText>\n\t\t\t\t</TextContainer>\n\n\t\t\t\t<ButtonContainer crossAlignment=\"flex-end\" mainAlignment=\"baseline\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tlabel={t('feedback.send', 'SEND')}\n\t\t\t\t\t\tonClick={confirmHandler}\n\t\t\t\t\t\tdisabled={disabledSend}\n\t\t\t\t\t/>\n\t\t\t\t</ButtonContainer>\n\t\t\t</Container>\n\t\t\t<Container\n\t\t\t\tpadding={{ bottom: 'medium' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tmainAlignment=\"space-between\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\torientation=\"horizontal\"\n\t\t\t>\n\t\t\t\t<Container mainAlignment=\"space-between\" crossAlignment=\"flex-start\" maxWidth=\"19.0625rem\">\n\t\t\t\t\t<Row padding={{ vertical: 'large' }}>\n\t\t\t\t\t\t<Text weight=\"bold\" size=\"small\">\n\t\t\t\t\t\t\tModule\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tlabel={t('feedback.select_a_module', 'Select a module')}\n\t\t\t\t\t\titems={appItems}\n\t\t\t\t\t\tdefaultSelection={{ label: '', value: '' }}\n\t\t\t\t\t\tonChange={onAppSelect}\n\t\t\t\t\t\tLabelFactory={ModuleLabelFactory}\n\t\t\t\t\t/>\n\t\t\t\t</Container>\n\t\t\t\t<Container mainAlignment=\"space-between\" crossAlignment=\"flex-start\" maxWidth=\"19.0625rem\">\n\t\t\t\t\t<Row padding={{ vertical: 'large' }}>\n\t\t\t\t\t\t<Text weight=\"bold\" size=\"small\">\n\t\t\t\t\t\t\tTopic\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tlabel={t('feedback.select_a_topic', 'Select a topic')}\n\t\t\t\t\t\titems={topics}\n\t\t\t\t\t\tdefaultSelection={defaultTopic}\n\t\t\t\t\t\tonChange={onTopicSelect}\n\t\t\t\t\t\tLabelFactory={LabelFactory}\n\t\t\t\t\t\tmultiple={false}\n\t\t\t\t\t/>\n\t\t\t\t</Container>\n\t\t\t</Container>\n\t\t\t<TAContainer crossAlignment=\"flex-end\">\n\t\t\t\t<TextArea\n\t\t\t\t\tvalue={sentryEvent.message}\n\t\t\t\t\tonKeyUp={checkTopicSelect}\n\t\t\t\t\tonChange={onInputChange}\n\t\t\t\t\tplaceholder={t('feedback.write_here', 'Write your feedback here')}\n\t\t\t\t/>\n\t\t\t\t<Text size=\"medium\" color=\"secondary\">\n\t\t\t\t\t{limit}/500\n\t\t\t\t</Text>\n\t\t\t</TAContainer>\n\t\t</Container>\n\t);\n};\n\nexport default Feedback;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { isFunction } from 'lodash';\nimport { create } from 'zustand';\n\nimport type { QueryChip, SearchState } from '../../types';\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useSearchStore = create<SearchState>()((set, get) => ({\n\tquery: [],\n\tsearchDisabled: false,\n\ttooltip: undefined,\n\tsetSearchDisabled: (searchDisabled: boolean, tooltip?: string): void =>\n\t\tset({ searchDisabled, tooltip }),\n\tupdateQuery: (query: Array<QueryChip> | ((q: Array<QueryChip>) => Array<QueryChip>)): void =>\n\t\tset({ query: isFunction(query) ? query(get().query) : query }),\n\tupdateModule: (module: string): void => set({ module })\n}));\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useMemo } from 'react';\n\nimport {\n\tButton,\n\tChip,\n\tContainer,\n\tDivider,\n\tIcon,\n\tPadding,\n\tText\n} from '@zextras/carbonio-design-system';\nimport { map } from 'lodash';\nimport { Redirect, Route, Switch } from 'react-router-dom';\n\nimport { useSearchStore } from './search-store';\nimport { type SearchState } from '../../types';\nimport AppContextProvider from '../boot/app/app-context-provider';\nimport { ResultLabelType, SEARCH_APP_ID } from '../constants';\nimport { useAppStore } from '../store/app';\nimport { getT } from '../store/i18n';\n\nconst useQuery = (): [query: SearchState['query'], updateQuery: SearchState['updateQuery']] =>\n\tuseSearchStore((s) => [s.query, s.updateQuery]);\n\nconst useDisableSearch = (): [\n\tisDisabled: SearchState['searchDisabled'],\n\tsetDisabled: SearchState['setSearchDisabled']\n] => useSearchStore((s) => [s.searchDisabled, s.setSearchDisabled]);\n\nconst getIconAndColor = (labelType: ResultLabelType): [icon: string, color: string] => {\n\tif (labelType === ResultLabelType.WARNING) {\n\t\treturn ['AlertTriangle', 'warning'];\n\t}\n\tif (labelType === ResultLabelType.ERROR) {\n\t\treturn ['CloseSquare', 'error'];\n\t}\n\treturn ['', ''];\n};\n\ninterface ResultsHeaderProps {\n\tlabel: string;\n\tlabelType?: ResultLabelType;\n}\n\nconst ResultsHeader = ({\n\tlabel,\n\tlabelType = ResultLabelType.NORMAL\n}: ResultsHeaderProps): JSX.Element => {\n\tconst t = getT();\n\tconst [query, updateQuery] = useQuery();\n\tconst [, setDisabled] = useDisableSearch();\n\n\tconst resetQuery = useCallback(() => {\n\t\tupdateQuery([]);\n\t\tsetDisabled(false);\n\t}, [updateQuery, setDisabled]);\n\n\tconst labelTypeElem = useMemo<JSX.Element>(() => {\n\t\tif (labelType === ResultLabelType.NORMAL) {\n\t\t\treturn <></>;\n\t\t}\n\n\t\tconst [icon, color] = getIconAndColor(labelType);\n\t\treturn (\n\t\t\t<Padding right=\"small\">\n\t\t\t\t<Icon icon={icon} size=\"large\" color={color} />\n\t\t\t</Padding>\n\t\t);\n\t}, [labelType]);\n\n\tconst chipItems = useMemo(\n\t\t() =>\n\t\t\tmap(query, (queryChip, index) => (\n\t\t\t\t<Padding key={`${index}${queryChip.label}`} all=\"extrasmall\">\n\t\t\t\t\t<Chip {...queryChip} background={'gray2'} />\n\t\t\t\t</Padding>\n\t\t\t)),\n\t\t[query]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Container\n\t\t\t\torientation=\"horizontal\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\twidth=\"100%\"\n\t\t\t\tbackground={'gray5'}\n\t\t\t\theight=\"fit\"\n\t\t\t\tminHeight=\"3rem\"\n\t\t\t\tmaxHeight=\"7.5rem\"\n\t\t\t\tstyle={{ overflow: 'hidden' }}\n\t\t\t\tpadding={{ horizontal: 'large', vertical: 'medium' }}\n\t\t\t>\n\t\t\t\t<Container width=\"85%\" orientation=\"horizontal\" wrap=\"wrap\" mainAlignment=\"flex-start\">\n\t\t\t\t\t{labelTypeElem}\n\t\t\t\t\t<Text color=\"secondary\">{label}</Text>\n\t\t\t\t\t{chipItems}\n\t\t\t\t</Container>\n\t\t\t\t{query?.length > 0 && (\n\t\t\t\t\t<Container width=\"15%\" mainAlignment=\"flex-start\" crossAlignment=\"flex-start\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tlabel={t('label.clear_search_query', 'CLEAR SEARCH')}\n\t\t\t\t\t\t\ticon=\"CloseOutline\"\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\t\t\ttype=\"ghost\"\n\t\t\t\t\t\t\tonClick={resetQuery}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Container>\n\t\t\t\t)}\n\t\t\t</Container>\n\t\t\t<Divider color=\"gray3\" />\n\t\t</>\n\t);\n};\n\nexport const SearchAppView = (): JSX.Element => {\n\tconst searchViews = useAppStore((s) => s.views.search);\n\tconst { module } = useSearchStore();\n\tconst modules = useAppStore((s) => s.views.search);\n\n\tconst fullModule = useMemo(() => modules.find((m) => m.route === module), [module, modules]);\n\n\tconst routes = useMemo(\n\t\t() =>\n\t\t\tmap(searchViews, (view) => (\n\t\t\t\t<Route key={`/${view.route}`} path={`/${SEARCH_APP_ID}/${view.route}`}>\n\t\t\t\t\t<AppContextProvider pkg={view.app}>\n\t\t\t\t\t\t<view.component\n\t\t\t\t\t\t\tuseQuery={useQuery}\n\t\t\t\t\t\t\tResultsHeader={ResultsHeader}\n\t\t\t\t\t\t\tuseDisableSearch={useDisableSearch}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</AppContextProvider>\n\t\t\t\t</Route>\n\t\t\t)),\n\t\t[searchViews]\n\t);\n\n\treturn (\n\t\t<Switch>\n\t\t\t{routes}\n\t\t\t<Redirect\n\t\t\t\texact\n\t\t\t\tstrict\n\t\t\t\tfrom={`/${SEARCH_APP_ID}`}\n\t\t\t\tto={`/${SEARCH_APP_ID}/${fullModule ? fullModule.route : searchViews[0]?.route}`}\n\t\t\t/>\n\t\t</Switch>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React from 'react';\n\nimport type { TFunction } from 'i18next';\nimport { cloneDeep, filter, findIndex, isArray, isBoolean, reduce, uniq } from 'lodash';\nimport moment, { Moment } from 'moment';\n\nimport {\n\tAccount,\n\tAccountSettings,\n\tAddMod,\n\tBooleanString,\n\tGeneralizedTime,\n\tIdentity,\n\tIdentityAttrs,\n\tPrefsMods\n} from '../../../types';\nimport { BASE_FONT_SIZE, SCALING_LIMIT, SCALING_OPTIONS } from '../../constants';\n\nexport const GEN_TIME_FORMAT = 'YYYYMMDDHHmmss[Z]';\n\nfunction getGenTimeMoment(date: Date | string | Moment): Moment {\n\treturn moment.utc(date, GEN_TIME_FORMAT);\n}\n\nexport function dateToGenTime(date: Date | Moment): GeneralizedTime {\n\treturn getGenTimeMoment(date).format(GEN_TIME_FORMAT) as GeneralizedTime;\n}\n\nexport function genTimeToDate(genTime: string): Date {\n\treturn getGenTimeMoment(genTime).local().toDate();\n}\n\nexport const startOfDay = (date: Date): Date => new Date(new Date(date).setHours(0, 0, 0, 0));\n\nexport const endOfDay = (date: Date): Date => new Date(new Date(date).setHours(23, 59, 59, 0));\n\nexport type LocaleDescriptor = {\n\tid: string;\n\tname: string;\n\tlocalName: string;\n\tvalue: string;\n\tlabel: string;\n\tdateFnsLocale?: string;\n};\n\nexport const localeList = (t: TFunction): Array<LocaleDescriptor> => [\n\t{\n\t\tid: 'zh_CN',\n\t\tname: '中文 (中国)',\n\t\tlocalName: t('locale.chinese_china', 'Chinese (China)'),\n\t\tlabel: t('locale.label_chinese', {\n\t\t\tvalue: '中文 (中国)',\n\t\t\tdefaultValue: 'Chinese (China) - {{value}}'\n\t\t}),\n\t\tvalue: 'zh_CN',\n\t\tdateFnsLocale: 'zh-CN'\n\t},\n\t{\n\t\tid: 'nl',\n\t\tname: 'Nederlands',\n\t\tlocalName: t('locale.dutch', 'Dutch'),\n\t\tlabel: t('locale.label_dutch', { value: 'Nederlands', defaultValue: 'Dutch - {{value}}' }),\n\t\tvalue: 'nl'\n\t},\n\t{\n\t\tid: 'en',\n\t\tname: 'English',\n\t\tlocalName: t('locale.English', 'English'),\n\t\tlabel: t('locale.label_english', { value: 'English', defaultValue: 'English - {{value}}' }),\n\t\tvalue: 'en',\n\t\tdateFnsLocale: 'en-US'\n\t},\n\t{\n\t\tid: 'de',\n\t\tname: 'Deutsch',\n\t\tlocalName: t('locale.german', 'German'),\n\t\tlabel: t('locale.label_german', { value: 'Deutsch', defaultValue: 'German - {{value}}' }),\n\t\tvalue: 'de'\n\t},\n\t{\n\t\tid: 'hi',\n\t\tname: 'हिंदी',\n\t\tlocalName: t('locale.hindi', 'Hindi'),\n\t\tlabel: t('locale.label_hindi', { value: 'हिंदी', defaultValue: 'Hindi - {{value}}' }),\n\t\tvalue: 'hi'\n\t},\n\t{\n\t\tid: 'it',\n\t\tname: 'italiano',\n\t\tlocalName: t('locale.italian', 'Italian'),\n\t\tlabel: t('locale.label_italian', { value: 'italiano', defaultValue: 'Italian - {{value}}' }),\n\t\tvalue: 'it'\n\t},\n\t{\n\t\tid: 'ja',\n\t\tname: '日本語',\n\t\tlocalName: t('locale.japanese', 'Japanese'),\n\t\tlabel: t('locale.label_japanese', { value: '日本語', defaultValue: 'Japanese - {{value}}' }),\n\t\tvalue: 'ja'\n\t},\n\n\t{\n\t\tid: 'pt',\n\t\tname: 'português',\n\t\tlocalName: t('locale.portuguese', 'Portuguese'),\n\t\tlabel: t('locale.label_portuguese', {\n\t\t\tvalue: 'português',\n\t\t\tdefaultValue: 'Portuguese - {{value}}'\n\t\t}),\n\t\tvalue: 'pt'\n\t},\n\t{\n\t\tid: 'pl',\n\t\tname: 'polski',\n\t\tlocalName: t('locale.polish', 'Polish'),\n\t\tlabel: 'Polish - polski',\n\t\tvalue: 'pl'\n\t},\n\t{\n\t\tid: 'pt_BR',\n\t\tname: 'português (Brasil)',\n\t\tlocalName: t('locale.portuguese_brazil', 'Portuguese (Brazil)'),\n\t\tlabel: t('locale.label_portuguese_brazil', {\n\t\t\tvalue: 'português (Brasil)',\n\t\t\tdefaultValue: 'Portuguese - {{value}}'\n\t\t}),\n\t\tvalue: 'pt_BR',\n\t\tdateFnsLocale: 'pt-BR'\n\t},\n\n\t{\n\t\tid: 'ro',\n\t\tname: 'română',\n\t\tlocalName: t('locale.romanian', 'Romanian'),\n\t\tlabel: t('locale.label_romanian', { value: 'română', defaultValue: 'Romanian - {{value}}' }),\n\t\tvalue: 'ro'\n\t},\n\t{\n\t\tid: 'ru',\n\t\tname: 'русский',\n\t\tlocalName: t('locale.russian', 'Russian'),\n\t\tlabel: t('locale.label_russian', { value: 'русский', defaultValue: 'Russian - {{value}}' }),\n\t\tvalue: 'ru'\n\t},\n\n\t{\n\t\tid: 'es',\n\t\tname: 'español',\n\t\tlocalName: t('locale.spanish', 'Spanish'),\n\t\tlabel: t('locale.label_spanish', { value: 'español', defaultValue: 'Spanish - {{value}}' }),\n\t\tvalue: 'es'\n\t},\n\n\t{\n\t\tid: 'th',\n\t\tname: 'ไทย',\n\t\tlocalName: t('locale.thai', 'Thai'),\n\t\tlabel: t('locale.label_thai', { value: 'ไทย', defaultValue: 'Thai - {{value}}' }),\n\t\tvalue: 'th'\n\t},\n\t{\n\t\tid: 'tr',\n\t\tname: 'Türkçe',\n\t\tlocalName: t('locale.turkish', 'Turkish'),\n\t\tlabel: t('locale.label_turkish', { value: 'Türkçe', defaultValue: 'Turkish - {{value}}' }),\n\t\tvalue: 'tr'\n\t},\n\t{\n\t\tid: 'fr',\n\t\tname: 'français',\n\t\tlocalName: t('locale.french', 'French'),\n\t\tlabel: t('locale.label_french', { value: 'français', defaultValue: 'French - {{value}}' }),\n\t\tvalue: 'fr'\n\t},\n\t{\n\t\tid: 'vi',\n\t\tname: 'Tiếng Việt',\n\t\tlocalName: t('locale.vietnamese', 'Vietnamese'),\n\t\tlabel: 'Vietnamese - Tiếng Việt',\n\t\tvalue: 'vi'\n\t}\n];\n// TODO: For future languages\n// export const localeList = (t: TFunction): any => [\n// \t{\n// \t\tid: 'ar',\n// \t\tname: 'العربية',\n// \t\tlocalName: t('locale.arabic', 'Arabic'),\n// \t\tlabel: t('locale.label_arabic', { value: 'لعربية', defaultValue: 'Arabic - {{value}}' }),\n// \t\tvalue: 'ar'\n// \t},\n// \t{\n// \t\tid: 'eu',\n// \t\tname: 'Euskara',\n// \t\tlocalName: t('locale.basque', 'Basque'),\n// \t\tlabel: t('locale.label_basque', { value: 'Euskara', defaultValue: 'Basque - {{value}}' }),\n// \t\tvalue: 'eu'\n// \t},\n// \t{\n// \t\tid: 'bg',\n// \t\tname: 'български',\n// \t\tlocalName: t('locale.bulgarian', 'Bulgarian'),\n// \t\tlabel: t('locale.label_bulgarian', {\n// \t\t\tvalue: 'български',\n// \t\t\tdefaultValue: 'Bulgarian - {{value}}'\n// \t\t}),\n// \t\tvalue: 'bg'\n// \t},\n// \t{\n// \t\tid: 'ca',\n// \t\tname: 'català',\n// \t\tlocalName: t('locale.catalan', 'Catalan'),\n// \t\tlabel: 'Catalan - català',\n// \t\tvalue: 'ca'\n// \t},\n// \t{\n// \t\tid: 'zh',\n// \t\tname: '中文',\n// \t\tlocalName: t('locale.chinese', 'Chinese'),\n// \t\tlabel: 'Chinese - 中文',\n// \t\tvalue: 'zh'\n// \t},\n// \t{\n// \t\tid: 'zh_CN',\n// \t\tname: '中文 (中国)',\n// \t\tlocalName: t('locale.chinese_china', 'Chinese (China)'),\n// \t\tlabel: 'Chinese (China) - 中文 (中国)',\n// \t\tvalue: 'zh_CN'\n// \t},\n// \t{\n// \t\tid: 'zh_HK',\n// \t\tname: '中文 (香港)',\n// \t\tlocalName: t('locale.chinese_hong_kong', 'Chinese (Hong Kong SAR China)'),\n// \t\tlabel: 'Chinese (Hong Kong SAR China) - 中文 (香港)',\n// \t\tvalue: 'zh_HK'\n// \t},\n// \t{\n// \t\tid: 'zh_TW',\n// \t\tname: '中文 (台灣)',\n// \t\tlocalName: t('locale.chinese_taiwan', 'Chinese (Taiwan)'),\n// \t\tlabel: 'Chinese (Taiwan) - 中文 (台灣)',\n// \t\tvalue: 'zh_TW'\n// \t},\n// \t{\n// \t\tid: 'hr',\n// \t\tname: 'hrvatski',\n// \t\tlocalName: t('locale.croatian', 'Croatian'),\n// \t\tlabel: 'Croatian - hrvatski',\n// \t\tvalue: 'hr'\n// \t},\n// \t{\n// \t\tid: 'da',\n// \t\tname: 'Dansk',\n// \t\tlocalName: t('locale.danish', 'Danish'),\n// \t\tlabel: 'Danish - Dansk',\n// \t\tvalue: 'da'\n// \t},\n\n// \t{\n// \t\tid: 'en_AU',\n// \t\tname: 'English (Australia)',\n// \t\tlocalName: t('locale.english_australia', 'English (Australia)'),\n// \t\tlabel: 'English (Australia) - English (Australia)',\n// \t\tvalue: 'en_AU'\n// \t},\n// \t{\n// \t\tid: 'en_GB',\n// \t\tname: 'English (United Kingdom)',\n// \t\tlocalName: t('locale.english_united_kingdom', 'English (United Kingdom)'),\n// \t\tlabel: 'English (United Kingdom) - English (United Kingdom)',\n// \t\tvalue: 'en_GB'\n// \t},\n// \t{\n// \t\tid: 'en_US',\n// \t\tname: 'English (United States)',\n// \t\tlocalName: t('locale.english_united_states', 'English (United States)'),\n// \t\tlabel: 'English (United States) - English (United States)',\n// \t\tvalue: 'en_US'\n// \t},\n// \t{\n// \t\tid: 'fr',\n// \t\tname: 'français',\n// \t\tlocalName: t('locale.french', 'French'),\n// \t\tlabel: 'French - français',\n// \t\tvalue: 'fr'\n// \t},\n// \t{\n// \t\tid: 'fr_CA',\n// \t\tname: 'français (Canada)',\n// \t\tlocalName: t('locale.french_canada', 'French (Canada)'),\n// \t\tlabel: 'French (Canada) - français (Canada)',\n// \t\tvalue: 'fr_CA'\n// \t},\n// \t{\n// \t\tid: 'fr_FR',\n// \t\tname: 'français (France)',\n// \t\tlocalName: t('locale.french_france', 'French (France)'),\n// \t\tlabel: 'French (France) - français (France)',\n// \t\tvalue: 'fr_FR'\n// \t},\n\n// \t{\n// \t\tid: 'iw',\n// \t\tname: 'עברית',\n// \t\tlocalName: t('locale.hebrew', 'Hebrew'),\n// \t\tlabel: 'Hebrew - עברית',\n// \t\tvalue: 'iw'\n// \t},\n\n// \t{\n// \t\tid: 'hu',\n// \t\tname: 'magyar',\n// \t\tlocalName: t('locale.hungarian', 'Hungarian'),\n// \t\tlabel: 'Hungarian - magyar',\n// \t\tvalue: 'hu'\n// \t},\n// \t{\n// \t\tid: 'in',\n// \t\tname: 'Bahasa Indonesia',\n// \t\tlocalName: t('locale.indonesian', 'Indonesian'),\n// \t\tlabel: 'Indonesian - Bahasa Indonesia',\n// \t\tvalue: 'in'\n// \t},\n\n// \t{\n// \t\tid: 'ko',\n// \t\tname: '한국어',\n// \t\tlocalName: t('locale.korean', 'Korean'),\n// \t\tlabel: 'Korean - 한국어',\n// \t\tvalue: 'ko'\n// \t},\n// \t{\n// \t\tid: 'lo',\n// eslint-disable-next-line no-irregular-whitespace\n// \t\tname: 'ພາ​ສາ​ລາວ',\n// \t\tlocalName: t('locale.lao', 'Lao'),\n// eslint-disable-next-line no-irregular-whitespace\n// \t\tlabel: 'Lao - ພາ​ສາ​ລາວ',\n// \t\tvalue: 'lo'\n// \t},\n// \t{\n// \t\tid: 'ms',\n// \t\tname: 'Bahasa Melayu',\n// \t\tlocalName: t('locale.malay', 'Malay'),\n// \t\tlabel: 'Malay - Bahasa Melayu',\n// \t\tvalue: 'ms'\n// \t},\n// \t{\n// \t\tid: 'no',\n// \t\tname: 'norsk',\n// \t\tlocalName: t('locale.norwegian', 'Norwegian'),\n// \t\tlabel: 'Norwegian - norsk',\n// \t\tvalue: 'no'\n// \t},\n\n// \t{\n// \t\tid: 'pt_PT',\n// \t\tname: 'português (Portugal)',\n// \t\tlocalName: t('locale.potuguese_portugal', 'Portuguese (Portugal)'),\n// \t\tlabel: 'Portuguese (Portugal) - português (Portugal)',\n// \t\tvalue: 'pt_PT'\n// \t},\n\n// \t{\n// \t\tid: 'sl',\n// \t\tname: 'Slovenščina',\n// \t\tlocalName: t('locale.slovenian', 'Slovenian'),\n// \t\tlabel: 'Slovenian - Slovenščina',\n// \t\tvalue: 'sl'\n// \t},\n\n// \t{\n// \t\tid: 'sv',\n// \t\tname: 'svenska',\n// \t\tlocalName: t('locale.swedish', 'Swedish'),\n// \t\tlabel: 'Swedish - svenska',\n// \t\tvalue: 'sv'\n// \t},\n// \t{\n// \t\tid: 'ta',\n// \t\tname: 'தமிழ்',\n// \t\tlocalName: t('locale.tamil', 'Tamil'),\n// \t\tlabel: 'Tamil - தமிழ்',\n// \t\tvalue: 'ta'\n// \t},\n\n// \t{\n// \t\tid: 'uk',\n// \t\tname: 'українська',\n// \t\tlocalName: t('locale.ukrainian', 'Ukrainian'),\n// \t\tlabel: 'Ukrainian - українська',\n// \t\tvalue: 'uk'\n// \t},\n\n// ];\n\nexport type TimeZoneDescriptor = {\n\tvalue: string;\n\tlabel: string;\n\toffSet?: string;\n};\n\nexport const timeZoneList = (t: TFunction): Array<TimeZoneDescriptor> => [\n\t{\n\t\tvalue: 'Etc/GMT+12',\n\t\tlabel: t('timezone.etc_gmt+12', { value: 'GMT -12:00', defaultValue: '{{value}} Dateline' })\n\t},\n\t{\n\t\tvalue: 'Pacific/Midway',\n\t\tlabel: t('timezone.pacific_midway', { value: 'GMT -11:00', defaultValue: '{{value}} Samoa' })\n\t},\n\t{\n\t\tvalue: 'America/Adak',\n\t\tlabel: t('timezone.america_adak', { value: 'GMT -10:00', defaultValue: '{{value}} Adak' })\n\t},\n\t{\n\t\tvalue: 'Pacific/Honolulu',\n\t\tlabel: t('timezone.pacific_honolulu', { value: 'GMT -10:00', defaultValue: '{{value}} Hawaii' })\n\t},\n\t{\n\t\tvalue: 'Pacific/Marquesas',\n\t\tlabel: t('timezone.pacific_marquesas', {\n\t\t\tvalue: 'GMT -09:30',\n\t\t\tdefaultValue: '{{value}} Marquesas'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Anchorage',\n\t\tlabel: t('timezone.america_anchorage', {\n\t\t\tvalue: 'GMT -09:00',\n\t\t\tdefaultValue: '{{value}} Alaska'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Los_Angeles',\n\t\tlabel: t('timezone.america_los_angeles', {\n\t\t\tvalue: 'GMT -08:00',\n\t\t\tdefaultValue: '{{value}} US/Canada Pacific'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Tijuana',\n\t\tlabel: t('timezone.america_tijuana', {\n\t\t\tvalue: 'GMT -08:00',\n\t\t\tdefaultValue: '{{value}} Baja California'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Chihuahua',\n\t\tlabel: t('timezone.america_chihuahua', {\n\t\t\tvalue: 'GMT -07:00',\n\t\t\tdefaultValue: '{{value}} Chihuahua, La Paz, Mazatlan'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Denver',\n\t\tlabel: t('timezone.america_denver', {\n\t\t\tvalue: 'GMT -07:00',\n\t\t\tdefaultValue: '{{value}} US/Canada Mountain'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Fort_Nelson',\n\t\tlabel: t('timezone.america_fort_nelson', {\n\t\t\tvalue: 'GMT -07:00',\n\t\t\tdefaultValue: '{{value}} Fort Nelson'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Phoenix',\n\t\tlabel: t('timezone.america_phoenix', { value: 'GMT -07:00', defaultValue: '{{value}} Arizona' })\n\t},\n\t{\n\t\tvalue: 'America/Whitehorse',\n\t\tlabel: t('timezone.america_whitehorse', {\n\t\t\tvalue: 'GMT -07:00',\n\t\t\tdefaultValue: '{{value}} Yukon'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Chicago',\n\t\tlabel: t('timezone.america_chicago', {\n\t\t\tvalue: 'GMT -06:00',\n\t\t\tdefaultValue: '{{value}} US/Canada Central'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Guatemala',\n\t\tlabel: t('timezone.america_guatemala', {\n\t\t\tvalue: 'GMT -06:00',\n\t\t\tdefaultValue: '{{value}} Central America'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Mexico_City',\n\t\tlabel: t('timezone.america_mexico_city', {\n\t\t\tvalue: 'GMT -06:00',\n\t\t\tdefaultValue: '{{value}} Guadalajara, Mexico City, Monterrey'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Regina',\n\t\tlabel: t('timezone.america_regina', {\n\t\t\tvalue: 'GMT -06:00',\n\t\t\tdefaultValue: '{{value}} Saskatchewan'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Pacific/Easter',\n\t\tlabel: t('timezone.pacific_easter', { value: 'GMT -06:00', defaultValue: '{{value}} Easter' })\n\t},\n\t{\n\t\tvalue: 'America/Bogota',\n\t\tlabel: t('timezone.america_bogota', { value: 'GMT -05:00', defaultValue: '{{value}} Colombia' })\n\t},\n\t{\n\t\tvalue: 'America/Cancun',\n\t\tlabel: t('timezone.america_cancun', {\n\t\t\tvalue: 'GMT -05:00',\n\t\t\tdefaultValue: '{{value}} Cancun, Chetumal'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Grand_Turk',\n\t\tlabel: t('timezone.america_grand_turk', {\n\t\t\tvalue: 'GMT -05:00',\n\t\t\tdefaultValue: '{{value}} Turks and Caicos Islands'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Havana',\n\t\tlabel: t('timezone.america_havana', { value: 'GMT -05:00', defaultValue: '{{value}} Havana' })\n\t},\n\t{\n\t\tvalue: 'America/Indiana/Indianapolis',\n\t\tlabel: t('timezone.america_indiana_indianapolis', {\n\t\t\tvalue: 'GMT -05:00',\n\t\t\tdefaultValue: '{{value}} Indiana (East)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/New_York',\n\t\tlabel: t('timezone.america_new_york', {\n\t\t\tvalue: 'GMT -05:00',\n\t\t\tdefaultValue: '{{value}} US/Canada Eastern'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Port-au-Prince',\n\t\tlabel: t('timezone.america_port-au-prince', {\n\t\t\tvalue: 'GMT -05:00',\n\t\t\tdefaultValue: '{{value}} Port-au-Prince'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Asuncion',\n\t\tlabel: t('timezone.america_asuncion', {\n\t\t\tvalue: 'GMT -04:00',\n\t\t\tdefaultValue: '{{value}} Asuncion'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Caracas',\n\t\tlabel: t('timezone.america_caracas', { value: 'GMT -04:00', defaultValue: '{{value}} Caracas' })\n\t},\n\t{\n\t\tvalue: 'America/Cuiaba',\n\t\tlabel: t('timezone.america_cuiaba', { value: 'GMT -04:00', defaultValue: '{{value}} Cuiaba' })\n\t},\n\t{\n\t\tvalue: 'America/Guyana',\n\t\tlabel: t('timezone.america_guyana', {\n\t\t\tvalue: 'GMT -04:00',\n\t\t\tdefaultValue: '{{value}} Georgetown, La Paz, Manaus, San Juan'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Halifax',\n\t\tlabel: t('timezone.america_halifax', {\n\t\t\tvalue: 'GMT -04:00',\n\t\t\tdefaultValue: '{{value}} Atlantic Time (Canada)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Santiago',\n\t\tlabel: t('timezone.america_santiago', {\n\t\t\tvalue: 'GMT -04:00',\n\t\t\tdefaultValue: '{{value}} Pacific South America'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/St_Johns',\n\t\tlabel: t('timezone.america_st_johns', {\n\t\t\tvalue: 'GMT -03:30',\n\t\t\tdefaultValue: '{{value}} Newfoundland'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Araguaina',\n\t\tlabel: t('timezone.america_araguaina', {\n\t\t\tvalue: 'GMT -03:00',\n\t\t\tdefaultValue: '{{value}} Araguaina'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Argentina/Buenos_Aires',\n\t\tlabel: t('timezone.america_argentina_buenos_aires', {\n\t\t\tvalue: 'GMT -03:00',\n\t\t\tdefaultValue: '{{value}} Argentina'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Bahia',\n\t\tlabel: t('timezone.america_bahia', { value: 'GMT -03:00', defaultValue: '{{value}} Salvador' })\n\t},\n\t{\n\t\tvalue: 'America/Cayenne',\n\t\tlabel: t('timezone.america_cayenne', {\n\t\t\tvalue: 'GMT -03:00',\n\t\t\tdefaultValue: '{{value}} Cayenne, Fortaleza'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Miquelon',\n\t\tlabel: t('timezone.america_miquelon', {\n\t\t\tvalue: 'GMT -03:00',\n\t\t\tdefaultValue: '{{value}} Miquelon'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Montevideo',\n\t\tlabel: t('timezone.america_montevideo', {\n\t\t\tvalue: 'GMT -03:00',\n\t\t\tdefaultValue: '{{value}} Montevideo'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Punta_Arenas',\n\t\tlabel: t('timezone.america_punta_arenas', {\n\t\t\tvalue: 'GMT -03:00',\n\t\t\tdefaultValue: '{{value}} Punta_Arenas'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'America/Sao_Paulo',\n\t\tlabel: t('timezone.america_sao_paulo', {\n\t\t\tvalue: 'GMT -03:00',\n\t\t\tdefaultValue: '{{value}} Brasilia'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Atlantic/South_Georgia',\n\t\tlabel: t('timezone.atlantic_south_georgia', {\n\t\t\tvalue: 'GMT -02:00',\n\t\t\tdefaultValue: '{{value}} Mid-Atlantic'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Atlantic/Azores',\n\t\tlabel: t('timezone.atlantic_azores', { value: 'GMT -01:00', defaultValue: '{{value}} Azores' })\n\t},\n\t{\n\t\tvalue: 'Atlantic/Cape_Verde',\n\t\tlabel: t('timezone.atlantic_cape_verde', {\n\t\t\tvalue: 'GMT -01:00',\n\t\t\tdefaultValue: '{{value}} Cape Verde Is.'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Africa/Monrovia',\n\t\tlabel: t('timezone.africa_monrovia', {\n\t\t\tvalue: 'GMT +00:00',\n\t\t\tdefaultValue: '{{value}} Monrovia'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Africa/Sao_Tome',\n\t\tlabel: t('timezone.africa_sao_tome', {\n\t\t\tvalue: 'GMT +00:00',\n\t\t\tdefaultValue: '{{value}} Sao Tome'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/London',\n\t\tlabel: t('timezone.europe_london', {\n\t\t\tvalue: 'GMT +00:00',\n\t\t\tdefaultValue: '{{value}} Britain, Ireland, Portugal'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'UTC',\n\t\tlabel: t('timezone.utc', {\n\t\t\tvalue: 'GMT/UTC',\n\t\t\tdefaultValue: '{{value}} Coordinated Universal Time'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Africa/Algiers',\n\t\tlabel: t('timezone.africa_algiers', {\n\t\t\tvalue: 'GMT +01:00',\n\t\t\tdefaultValue: '{{value}} West Central Africa'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Africa/Casablanca',\n\t\tlabel: t('timezone.africa_casablanca', {\n\t\t\tvalue: 'GMT +01:00',\n\t\t\tdefaultValue: '{{value}} Casablanca'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Belgrade',\n\t\tlabel: t('timezone.europe_belgrade', {\n\t\t\tvalue: 'GMT +01:00',\n\t\t\tdefaultValue: '{{value}} Belgrade, Bratislava, Budapest, Ljubljana, Prague'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Berlin',\n\t\tlabel: t('timezone.europe_berlin', {\n\t\t\tvalue: 'GMT +01:00',\n\t\t\tdefaultValue: '{{value}} Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Brussels',\n\t\tlabel: t('timezone.europe_brussels', {\n\t\t\tvalue: 'GMT +01:00',\n\t\t\tdefaultValue: '{{value}} Brussels, Copenhagen, Madrid, Paris'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Warsaw',\n\t\tlabel: t('timezone.europe_warsaw', {\n\t\t\tvalue: 'GMT +01:00',\n\t\t\tdefaultValue: '{{value}} Sarajevo, Skopje, Warsaw, Zagreb'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Africa/Cairo',\n\t\tlabel: t('timezone.africa_cairo', { value: 'GMT +02:00', defaultValue: '{{value}} Egypt' })\n\t},\n\t{\n\t\tvalue: 'Africa/Harare',\n\t\tlabel: t('timezone.africa_harare', {\n\t\t\tvalue: 'GMT +02:00',\n\t\t\tdefaultValue: '{{value}} Harare, Pretoria'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Africa/Juba',\n\t\tlabel: t('timezone.africa_juba', { value: 'GMT +02:00', defaultValue: '{{value}} Juba' })\n\t},\n\t{\n\t\tvalue: 'Africa/Khartoum',\n\t\tlabel: t('timezone.africa_khartoum', {\n\t\t\tvalue: 'GMT +02:00',\n\t\t\tdefaultValue: '{{value}} Khartoum'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Africa/Tripoli',\n\t\tlabel: t('timezone.africa_tripoli', { value: 'GMT +02:00', defaultValue: '{{value}} Tripoli' })\n\t},\n\t{\n\t\tvalue: 'Africa/Windhoek',\n\t\tlabel: t('timezone.africa_windhoek', { value: 'GMT +02:00', defaultValue: '{{value}} Namibia' })\n\t},\n\t{\n\t\tvalue: 'Asia/Amman',\n\t\tlabel: t('timezone.asia_amman', { value: 'GMT +02:00', defaultValue: '{{value}} Jordan' })\n\t},\n\t{\n\t\tvalue: 'Asia/Beirut',\n\t\tlabel: t('timezone.asia_beirut', { value: 'GMT +02:00', defaultValue: '{{value}} Beirut' })\n\t},\n\t{\n\t\tvalue: 'Asia/Damascus',\n\t\tlabel: t('timezone.asia_damascus', { value: 'GMT +02:00', defaultValue: '{{value}} Damascus' })\n\t},\n\t{\n\t\tvalue: 'Asia/Gaza',\n\t\tlabel: t('timezone.asia_gaza', { value: 'GMT +02:00', defaultValue: '{{value}} Gaza' })\n\t},\n\t{\n\t\tvalue: 'Asia/Jerusalem',\n\t\tlabel: t('timezone.asia_jerusalem', {\n\t\t\tvalue: 'GMT +02:00',\n\t\t\tdefaultValue: '{{value}} Jerusalem'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Athens',\n\t\tlabel: t('timezone.europe_athens', {\n\t\t\tvalue: 'GMT +02:00',\n\t\t\tdefaultValue: '{{value}} Athens, Beirut, Bucharest, Istanbul'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Bucharest',\n\t\tlabel: t('timezone.europe_bucharest', {\n\t\t\tvalue: 'GMT +02:00',\n\t\t\tdefaultValue: '{{value}} Bucharest'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Chisinau',\n\t\tlabel: t('timezone.europe_chisinau', {\n\t\t\tvalue: 'GMT +02:00',\n\t\t\tdefaultValue: '{{value}} Chisinau'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Helsinki',\n\t\tlabel: t('timezone.europe_helsinki', {\n\t\t\tvalue: 'GMT +02:00',\n\t\t\tdefaultValue: '{{value}} Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Kaliningrad',\n\t\tlabel: t('timezone.europe_kaliningrad', {\n\t\t\tvalue: 'GMT +02:00',\n\t\t\tdefaultValue: '{{value}} Kaliningrad (RTZ 1)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Africa/Nairobi',\n\t\tlabel: t('timezone.africa_nairobi', { value: 'GMT +03:00', defaultValue: '{{value}} Nairobi' })\n\t},\n\t{\n\t\tvalue: 'Asia/Baghdad',\n\t\tlabel: t('timezone.asia_baghdad', { value: 'GMT +03:00', defaultValue: '{{value}} Iraq' })\n\t},\n\t{\n\t\tvalue: 'Asia/Kuwait',\n\t\tlabel: t('timezone.asia_kuwait', {\n\t\t\tvalue: 'GMT +03:00',\n\t\t\tdefaultValue: '{{value}} Kuwait, Riyadh'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Istanbul',\n\t\tlabel: t('timezone.europe_istanbul', {\n\t\t\tvalue: 'GMT +03:00',\n\t\t\tdefaultValue: '{{value}} Istanbul'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Minsk',\n\t\tlabel: t('timezone.europe_minsk', { value: 'GMT +03:00', defaultValue: '{{value}} Minsk' })\n\t},\n\t{\n\t\tvalue: 'Europe/Moscow',\n\t\tlabel: t('timezone.europe_moscow', {\n\t\t\tvalue: 'GMT +03:00',\n\t\t\tdefaultValue: '{{value}} Moscow, St. Petersburg, Volgograd (RTZ 2)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Volgograd',\n\t\tlabel: t('timezone.europe_volgograd', {\n\t\t\tvalue: 'GMT +03:00',\n\t\t\tdefaultValue: '{{value}} Volgograd'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Tehran',\n\t\tlabel: t('timezone.asia_tehran', { value: 'GMT +03:30', defaultValue: '{{value}} Tehran' })\n\t},\n\t{\n\t\tvalue: 'Asia/Baku',\n\t\tlabel: t('timezone.asia_baku', { value: 'GMT +04:00', defaultValue: '{{value}} Baku' })\n\t},\n\t{\n\t\tvalue: 'Asia/Muscat',\n\t\tlabel: t('timezone.asia_muscat', {\n\t\t\tvalue: 'GMT +04:00',\n\t\t\tdefaultValue: '{{value}} Abu Dhabi, Muscat'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Tbilisi',\n\t\tlabel: t('timezone.asia_tbilisi', { value: 'GMT +04:00', defaultValue: '{{value}} Tbilisi' })\n\t},\n\t{\n\t\tvalue: 'Asia/Yerevan',\n\t\tlabel: t('timezone.asia_yerevan', { value: 'GMT +04:00', defaultValue: '{{value}} Yerevan' })\n\t},\n\t{\n\t\tvalue: 'Europe/Astrakhan',\n\t\tlabel: t('timezone.europe_astrakhan', {\n\t\t\tvalue: 'GMT +04:00',\n\t\t\tdefaultValue: '{{value}} Astrakhan'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Samara',\n\t\tlabel: t('timezone.europe_samara', {\n\t\t\tvalue: 'GMT +04:00',\n\t\t\tdefaultValue: '{{value}} Izhevsk, Samara (RTZ 3)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Europe/Saratov',\n\t\tlabel: t('timezone.europe_saratov', { value: 'GMT +04:00', defaultValue: '{{value}} Saratov' })\n\t},\n\t{\n\t\tvalue: 'Indian/Mauritius',\n\t\tlabel: t('timezone.indian_mauritius', {\n\t\t\tvalue: 'GMT +04:00',\n\t\t\tdefaultValue: '{{value}} Port Louis'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Kabul',\n\t\tlabel: t('timezone.asia_kabul', { value: 'GMT +04:30', defaultValue: '{{value}} Kabul' })\n\t},\n\t{\n\t\tvalue: 'Asia/Karachi',\n\t\tlabel: t('timezone.asia_karachi', {\n\t\t\tvalue: 'GMT +05:00',\n\t\t\tdefaultValue: '{{value}} Islamabad, Karachi'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Qyzylorda',\n\t\tlabel: t('timezone.asia_qyzylorda', {\n\t\t\tvalue: 'GMT +05:00',\n\t\t\tdefaultValue: '{{value}} Qyzylorda'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Tashkent',\n\t\tlabel: t('timezone.asia_tashkent', { value: 'GMT +05:00', defaultValue: '{{value}} Tashkent' })\n\t},\n\t{\n\t\tvalue: 'Asia/Yekaterinburg',\n\t\tlabel: t('timezone.asia_yekaterinburg', {\n\t\t\tvalue: 'GMT +05:00',\n\t\t\tdefaultValue: '{{value}} Ekaterinburg (RTZ 4)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Colombo',\n\t\tlabel: t('timezone.asia_colombo', {\n\t\t\tvalue: 'GMT +05:30',\n\t\t\tdefaultValue: '{{value}} Sri Jayawardenepura Kotte'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Kolkata',\n\t\tlabel: t('timezone.asia_kolkata', {\n\t\t\tvalue: 'GMT +05:30',\n\t\t\tdefaultValue: '{{value}} Chennai, Kolkata, Mumbai, New Delhi'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Kathmandu',\n\t\tlabel: t('timezone.asia_kathmandu', {\n\t\t\tvalue: 'GMT +05:45',\n\t\t\tdefaultValue: '{{value}} Kathmandu'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Almaty',\n\t\tlabel: t('timezone.asia_almaty', { value: 'GMT +06:00', defaultValue: '{{value}} Astana' })\n\t},\n\t{\n\t\tvalue: 'Asia/Dhaka',\n\t\tlabel: t('timezone.asia_dhaka', { value: 'GMT +06:00', defaultValue: '{{value}} Dhaka' })\n\t},\n\t{\n\t\tvalue: 'Asia/Omsk',\n\t\tlabel: t('timezone.asia_omsk', { value: 'GMT +06:00', defaultValue: '{{value}} Omsk' })\n\t},\n\t{\n\t\tvalue: 'Asia/Yangon',\n\t\tlabel: t('timezone.asia_yangon', { value: 'GMT +06:30', defaultValue: '{{value}} Yangon' })\n\t},\n\t{\n\t\tvalue: 'Asia/Bangkok',\n\t\tlabel: t('timezone.asia_bangkok', {\n\t\t\tvalue: 'GMT +07:00',\n\t\t\tdefaultValue: '{{value}} Bangkok, Hanoi, Jakarta'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Barnaul',\n\t\tlabel: t('timezone.asia_barnaul', { value: 'GMT +07:00', defaultValue: '{{value}} Barnaul' })\n\t},\n\t{\n\t\tvalue: 'Asia/Hovd',\n\t\tlabel: t('timezone.asia_hovd', { value: 'GMT +07:00', defaultValue: '{{value}} Hovd' })\n\t},\n\t{\n\t\tvalue: 'Asia/Krasnoyarsk',\n\t\tlabel: t('timezone.asia_krasnoyarsk', {\n\t\t\tvalue: 'GMT +07:00',\n\t\t\tdefaultValue: '{{value}} Krasnoyarsk (RTZ 6)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Novosibirsk',\n\t\tlabel: t('timezone.asia_novosibirsk', {\n\t\t\tvalue: 'GMT +07:00',\n\t\t\tdefaultValue: '{{value}} Novosibirsk (RTZ 5)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Tomsk',\n\t\tlabel: t('timezone.asia_tomsk', { value: 'GMT +07:00', defaultValue: '{{value}} Tomsk' })\n\t},\n\t{\n\t\tvalue: 'Asia/Hong_Kong',\n\t\tlabel: t('timezone.asia_hong_kong', {\n\t\t\tvalue: 'GMT +08:00',\n\t\t\tdefaultValue: '{{value}} Beijing, Chongqing, Hong Kong, Urumqi'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Irkutsk',\n\t\tlabel: t('timezone.asia_irkutsk', {\n\t\t\tvalue: 'GMT +08:00',\n\t\t\tdefaultValue: '{{value}} Irkutsk (RTZ 7)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Kuala_Lumpur',\n\t\tlabel: t('timezone.asia_kuala_lumpur', {\n\t\t\tvalue: 'GMT +08:00',\n\t\t\tdefaultValue: '{{value}} Kuala Lumpur'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Singapore',\n\t\tlabel: t('timezone.asia_singapore', {\n\t\t\tvalue: 'GMT +08:00',\n\t\t\tdefaultValue: '{{value}} Singapore'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Taipei',\n\t\tlabel: t('timezone.asia_taipei', { value: 'GMT +08:00', defaultValue: '{{value}} Taipei' })\n\t},\n\t{\n\t\tvalue: 'Asia/Ulaanbaatar',\n\t\tlabel: t('timezone.asia_ulaanbaatar', {\n\t\t\tvalue: 'GMT +08:00',\n\t\t\tdefaultValue: '{{value}} Ulaanbaatar'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Australia/Perth',\n\t\tlabel: t('timezone.australia_perth', { value: 'GMT +08:00', defaultValue: '{{value}} Perth' })\n\t},\n\t{\n\t\tvalue: 'Australia/Eucla',\n\t\tlabel: t('timezone.australia_eucla', { value: 'GMT +08:45', defaultValue: '{{value}} Eucla' })\n\t},\n\t{\n\t\tvalue: 'Asia/Chita',\n\t\tlabel: t('timezone.asia_chita', { value: 'GMT +09:00', defaultValue: '{{value}} Chita' })\n\t},\n\t{\n\t\tvalue: 'Asia/Pyongyang',\n\t\tlabel: t('timezone.asia_pyongyang', {\n\t\t\tvalue: 'GMT +09:00',\n\t\t\tdefaultValue: '{{value}} Pyongyang'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Seoul',\n\t\tlabel: t('timezone.asia_seoul', { value: 'GMT +09:00', defaultValue: '{{value}} Korea' })\n\t},\n\t{\n\t\tvalue: 'Asia/Tokyo',\n\t\tlabel: t('timezone.asia_tokyo', { value: 'GMT +09:00', defaultValue: '{{value}} Japan' })\n\t},\n\t{\n\t\tvalue: 'Asia/Yakutsk',\n\t\tlabel: t('timezone.asia_yakutsk', {\n\t\t\tvalue: 'GMT +09:00',\n\t\t\tdefaultValue: '{{value}} Yakutsk (RTZ 8)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Australia/Adelaide',\n\t\tlabel: t('timezone.australia_adelaide', {\n\t\t\tvalue: 'GMT +09:30',\n\t\t\tdefaultValue: '{{value}} Adelaide'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Australia/Darwin',\n\t\tlabel: t('timezone.australia_darwin', { value: 'GMT +09:30', defaultValue: '{{value}} Darwin' })\n\t},\n\t{\n\t\tvalue: 'Asia/Vladivostok',\n\t\tlabel: t('timezone.asia_vladivostok', {\n\t\t\tvalue: 'GMT +10:00',\n\t\t\tdefaultValue: '{{value}} Vladivostok, Magadan (RTZ 9)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Australia/Brisbane',\n\t\tlabel: t('timezone.australia_brisbane', {\n\t\t\tvalue: 'GMT +10:00',\n\t\t\tdefaultValue: '{{value}} Brisbane'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Australia/Hobart',\n\t\tlabel: t('timezone.australia_hobart', { value: 'GMT +10:00', defaultValue: '{{value}} Hobart' })\n\t},\n\t{\n\t\tvalue: 'Australia/Sydney',\n\t\tlabel: t('timezone.australia_sydney', {\n\t\t\tvalue: 'GMT +10:00',\n\t\t\tdefaultValue: '{{value}} Canberra, Melbourne, Sydney'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Pacific/Guam',\n\t\tlabel: t('timezone.pacific_guam', {\n\t\t\tvalue: 'GMT +10:00',\n\t\t\tdefaultValue: '{{value}} Guam, Port Moresby'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Australia/Lord_Howe',\n\t\tlabel: t('timezone.australia_lord_howe', {\n\t\t\tvalue: 'GMT +10:30',\n\t\t\tdefaultValue: '{{value}} Lord_Howe'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Asia/Magadan',\n\t\tlabel: t('timezone.asia_magadan', { value: 'GMT +11:00', defaultValue: '{{value}} Magadan' })\n\t},\n\t{\n\t\tvalue: 'Asia/Sakhalin',\n\t\tlabel: t('timezone.asia_sakhalin', { value: 'GMT +11:00', defaultValue: '{{value}} Sakhalin' })\n\t},\n\t{\n\t\tvalue: 'Asia/Srednekolymsk',\n\t\tlabel: t('timezone.asia_srednekolymsk', {\n\t\t\tvalue: 'GMT +11:00',\n\t\t\tdefaultValue: '{{value}} Chokurdakh (RTZ 10)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Pacific/Bougainville',\n\t\tlabel: t('timezone.pacific_bougainville', {\n\t\t\tvalue: 'GMT +11:00',\n\t\t\tdefaultValue: '{{value}} Bougainville Standard Time'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Pacific/Guadalcanal',\n\t\tlabel: t('timezone.pacific_guadalcanal', {\n\t\t\tvalue: 'GMT +11:00',\n\t\t\tdefaultValue: '{{value}} Solomon Is. / New Caledonia'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Pacific/Norfolk',\n\t\tlabel: t('timezone.pacific_norfolk', { value: 'GMT +11:00', defaultValue: '{{value}} Norfolk' })\n\t},\n\t{\n\t\tvalue: 'Asia/Kamchatka',\n\t\tlabel: t('timezone.asia_kamchatka', {\n\t\t\tvalue: 'GMT +12:00',\n\t\t\tdefaultValue: '{{value}} Anadyr, Petropavlovsk-Kamchatsky (RTZ 11)'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Pacific/Auckland',\n\t\tlabel: t('timezone.pacific_auckland', {\n\t\t\tvalue: 'GMT +12:00',\n\t\t\tdefaultValue: '{{value}} New Zealand'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Pacific/Fiji',\n\t\tlabel: t('timezone.pacific_fiji', { value: 'GMT +12:00', defaultValue: '{{value}} Fiji' })\n\t},\n\t{\n\t\tvalue: 'Pacific/Chatham',\n\t\tlabel: t('timezone.pacific_chatham', { value: 'GMT +12:45', defaultValue: '{{value}} Chatham' })\n\t},\n\t{\n\t\tvalue: 'Pacific/Apia',\n\t\tlabel: t('timezone.pacific_apia', { value: 'GMT +13:00', defaultValue: '{{value}} Samoa' })\n\t},\n\t{\n\t\tvalue: 'Pacific/Tongatapu',\n\t\tlabel: t('timezone.pacific_tongatapu', {\n\t\t\tvalue: 'GMT +13:00',\n\t\t\tdefaultValue: '{{value}} Nuku’alofa'\n\t\t})\n\t},\n\t{\n\t\tvalue: 'Pacific/Kiritimati',\n\t\tlabel: t('timezone.pacific_kiritimati', {\n\t\t\tvalue: 'GMT +14:00',\n\t\t\tdefaultValue: '{{value}} Kiritimati Island'\n\t\t})\n\t}\n];\n\nexport const getAutoScalingFontSize = (): number => {\n\tif (\n\t\twindow.screen.width <= SCALING_LIMIT.WIDTH &&\n\t\twindow.screen.height <= SCALING_LIMIT.HEIGHT &&\n\t\twindow.devicePixelRatio >= SCALING_LIMIT.DPR\n\t) {\n\t\tconst baseFontIndex = SCALING_OPTIONS.findIndex((option) => option.value === BASE_FONT_SIZE);\n\t\tif (baseFontIndex > 0) {\n\t\t\treturn SCALING_OPTIONS[baseFontIndex - 1].value;\n\t\t}\n\t}\n\treturn BASE_FONT_SIZE;\n};\n\nexport type ResetComponentImperativeHandler = { reset: () => void };\n\ntype UpsertPrefOnUnsavedChangesFn = <K extends keyof PrefsMods>(\n\tprefKey: K,\n\tprefValue: PrefsMods[K] extends BooleanString | undefined ? boolean | undefined : PrefsMods[K]\n) => void;\n\nexport function upsertPrefOnUnsavedChanges(\n\taddModifiedValueCallback: AddMod\n): UpsertPrefOnUnsavedChangesFn {\n\treturn (prefKey, prefValue) => {\n\t\tif (prefValue === undefined) {\n\t\t\taddModifiedValueCallback('prefs', prefKey, '');\n\t\t} else if (isBoolean(prefValue)) {\n\t\t\taddModifiedValueCallback('prefs', prefKey, (prefValue && 'TRUE') || 'FALSE');\n\t\t} else {\n\t\t\taddModifiedValueCallback('prefs', prefKey, prefValue as PrefsMods[typeof prefKey]);\n\t\t}\n\t};\n}\n\nexport type SettingsSectionProps = {\n\tresetRef?: React.Ref<ResetComponentImperativeHandler>;\n};\n\nexport function isPrimary(identity: Identity): boolean {\n\treturn identity.name === 'DEFAULT';\n}\n\nexport function defaultAsFirstOrderIdentities(identities: Array<Identity>): Array<Identity> {\n\tconst defaultIdx = identities.findIndex(isPrimary);\n\tconst result = cloneDeep(identities);\n\tconst defaultIdentity = result.splice(defaultIdx, 1);\n\tresult.unshift(defaultIdentity[0]);\n\treturn result;\n}\n\n/**\n * Compose a unique list of all identities' email addresses\n *\n * The list is composed of:\n * - the email address of the current account\n * - the email addresses of all the shared accounts (taken from the rights infos)\n * - all the aliases\n *\n * @param account\n * @param settings\n *\n * @returns a list of unique email addresses\n */\nexport const getAvailableEmailAddresses = (\n\taccount: Account,\n\tsettings: AccountSettings\n): string[] => {\n\tconst result: string[] = [];\n\n\t// Adds the email address of the primary account\n\tresult.push(account.name);\n\n\t// Adds the email addresses of all the shared accounts\n\tif (account.rights?.targets) {\n\t\taccount.rights?.targets.forEach((target) => {\n\t\t\tif (target.target && (target.right === 'sendAs' || target.right === 'sendOnBehalfOf')) {\n\t\t\t\ttarget.target.forEach((user) => {\n\t\t\t\t\tif (user.type === 'account' && user.email) {\n\t\t\t\t\t\tuser.email.forEach((email) => {\n\t\t\t\t\t\t\tresult.push(email.addr);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t// Adds all the aliases\n\tif (settings.attrs.zimbraMailAlias) {\n\t\tif (isArray(settings.attrs.zimbraMailAlias)) {\n\t\t\tresult.push(...(settings.attrs.zimbraMailAlias as string[]));\n\t\t} else {\n\t\t\tresult.push(String(settings.attrs.zimbraMailAlias));\n\t\t}\n\t}\n\n\treturn uniq(result);\n};\n\nexport function calculateNewIdentitiesState(\n\tcurrentIdentities: Array<Identity>,\n\tdeletedIdentities: Array<string>,\n\taddedIdentities: Array<Identity>,\n\tmodifiedIdentitiesAttrs: Record<string, Partial<IdentityAttrs>>\n): Array<Identity> {\n\tconst filteredIdentities = filter(\n\t\tcurrentIdentities,\n\t\t(item) => !deletedIdentities.includes(item.id)\n\t);\n\n\tconst filteredAndModified = reduce(\n\t\tmodifiedIdentitiesAttrs,\n\t\t(accumulator, attrs, id) => {\n\t\t\tconst propIndex = findIndex(accumulator, (identity) => identity.id === id);\n\t\t\tif (propIndex > -1) {\n\t\t\t\taccumulator[propIndex]._attrs = {\n\t\t\t\t\t...accumulator[propIndex]._attrs,\n\t\t\t\t\t...attrs\n\t\t\t\t};\n\t\t\t\tif (attrs.zimbraPrefIdentityName && !isPrimary(accumulator[propIndex])) {\n\t\t\t\t\taccumulator[propIndex].name = attrs.zimbraPrefIdentityName;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn accumulator;\n\t\t},\n\t\tfilteredIdentities\n\t);\n\n\tfilteredAndModified.splice(-1, 0, ...addedIdentities);\n\treturn filteredAndModified;\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, ReactElement, useContext, useRef, useMemo } from 'react';\n\nimport {\n\tContainer,\n\tText,\n\tDivider,\n\tRow,\n\tPadding,\n\tButton,\n\tIcon,\n\tModalManagerContext,\n\tListV2,\n\tListItem\n} from '@zextras/carbonio-design-system';\nimport { map } from 'lodash';\nimport { useTranslation } from 'react-i18next';\nimport styled from 'styled-components';\n\nimport { Identity, IdentityAttrs } from '../../../../types';\nimport { isPrimary } from '../utils';\n\nconst List = styled(ListV2)`\n\tflex-shrink: 0;\n`;\n\nfunction getNewPersonaNextIdentityName(\n\tnumberToCheck: number,\n\tunavailableIdentityNames: Array<string>\n): string {\n\tconst newPersonaNextIdentityName = `New Persona ${numberToCheck}`;\n\tif (unavailableIdentityNames.includes(newPersonaNextIdentityName)) {\n\t\treturn getNewPersonaNextIdentityName(numberToCheck + 1, unavailableIdentityNames);\n\t}\n\treturn newPersonaNextIdentityName;\n}\n\nexport type AccountsListProps = {\n\taccountName: string;\n\tidentities: Array<Identity>;\n\tidentitiesDefault: Array<Identity>;\n\tselectedIdentityId: number;\n\tsetSelectedIdentityId: (value: number) => void;\n\tremoveIdentity: (identityId: string) => void;\n\taddIdentity: (id: string, identityAttrs: IdentityAttrs) => void;\n};\n\nconst AccountsList = ({\n\taccountName,\n\tselectedIdentityId,\n\tidentities,\n\tidentitiesDefault,\n\tsetSelectedIdentityId,\n\tremoveIdentity,\n\taddIdentity\n}: AccountsListProps): ReactElement => {\n\tconst [t] = useTranslation();\n\n\tconst createModal = useContext(ModalManagerContext);\n\n\tconst createListRequestIdRef = useRef(0);\n\tconst addNewPersona = useCallback(() => {\n\t\tconst unavailableIdentityNames = map<Identity, string>(\n\t\t\t[...identitiesDefault, ...identities],\n\t\t\t(item) => item._attrs?.zimbraPrefIdentityName || ''\n\t\t);\n\t\tconst newPersonaName = getNewPersonaNextIdentityName(1, unavailableIdentityNames);\n\n\t\taddIdentity(`${createListRequestIdRef.current}`, {\n\t\t\tzimbraPrefIdentityName: newPersonaName,\n\t\t\tzimbraPrefFromDisplay: identities[0]._attrs?.zimbraPrefFromDisplay,\n\t\t\tzimbraPrefFromAddress: identities[0]._attrs?.zimbraPrefFromAddress,\n\t\t\tzimbraPrefFromAddressType: 'sendAs',\n\t\t\tzimbraPrefReplyToEnabled: 'FALSE'\n\t\t});\n\t\tcreateListRequestIdRef.current += 1;\n\t\tsetSelectedIdentityId(identities.length);\n\t}, [identitiesDefault, identities, addIdentity, setSelectedIdentityId]);\n\n\tconst onConfirmDelete = useCallback((): void => {\n\t\tremoveIdentity(identities[selectedIdentityId].id);\n\t\tsetSelectedIdentityId(selectedIdentityId - 1);\n\t}, [identities, removeIdentity, selectedIdentityId, setSelectedIdentityId]);\n\tconst onDelete = useCallback((): void => {\n\t\tconst closeModal = createModal({\n\t\t\ttitle: t('label.permanent_delete_title', 'Are you sure to permanently delete this Persona?'),\n\t\t\tonConfirm: () => {\n\t\t\t\tonConfirmDelete();\n\t\t\t\tcloseModal();\n\t\t\t},\n\t\t\tconfirmLabel: t('label.delete_permanently', 'Delete permanently'),\n\t\t\tconfirmColor: 'error',\n\t\t\tshowCloseIcon: true,\n\t\t\tonClose: () => closeModal(),\n\t\t\tchildren: (\n\t\t\t\t<Padding all=\"small\">\n\t\t\t\t\t<Text overflow=\"break-word\">\n\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t'messages.permanent_delete_body',\n\t\t\t\t\t\t\t'If you permanently delete this Persona you will not be able to recover it. Continue?'\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Text>\n\t\t\t\t</Padding>\n\t\t\t)\n\t\t});\n\t}, [createModal, t, onConfirmDelete]);\n\n\tconst items = useMemo(\n\t\t() =>\n\t\t\tmap(identities, (item, index) => (\n\t\t\t\t<ListItem key={item.id} active={selectedIdentityId === index}>\n\t\t\t\t\t{(): JSX.Element => (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\t\trole={'listitem'}\n\t\t\t\t\t\t\t\tdata-testid={`account-list-item-${item._attrs?.zimbraPrefIdentityId}`}\n\t\t\t\t\t\t\t\tonClick={(): void => {\n\t\t\t\t\t\t\t\t\tsetSelectedIdentityId(index);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\t\t\tpadding={{ all: 'small' }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Row width=\"fill\" mainAlignment=\"space-between\">\n\t\t\t\t\t\t\t\t\t<Container orientation=\"horizontal\" mainAlignment=\"flex-start\" width=\"fit\">\n\t\t\t\t\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t\t\t\t\t<Icon icon=\"CheckmarkCircle2Outline\" size=\"large\" color=\"primary\" />\n\t\t\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t\t\t\t\t<Text weight=\"regular\" size=\"small\">\n\t\t\t\t\t\t\t\t\t\t\t\t{item._attrs?.zimbraPrefIdentityName}\n\t\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t\t\t\t\t<Text weight=\"regular\" size=\"small\" color=\"secondary\">\n\t\t\t\t\t\t\t\t\t\t\t\t({isPrimary(item) ? accountName : item._attrs?.zimbraPrefFromAddress})\n\t\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t\t<Container width=\"fit\" mainAlignment=\"flex-end\">\n\t\t\t\t\t\t\t\t\t\t<Text weight=\"regular\" size=\"small\">\n\t\t\t\t\t\t\t\t\t\t\t{isPrimary(item)\n\t\t\t\t\t\t\t\t\t\t\t\t? t('label.primary', 'Primary')\n\t\t\t\t\t\t\t\t\t\t\t\t: t('label.persona', 'Persona')}\n\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</ListItem>\n\t\t\t)),\n\t\t[accountName, identities, selectedIdentityId, setSelectedIdentityId, t]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Container\n\t\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ all: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground=\"gray6\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Padding horizontal=\"medium\" bottom=\"large\" width=\"100%\">\n\t\t\t\t\t<Text weight=\"bold\">{t('label.accounts_list', 'Accounts list')}</Text>\n\t\t\t\t</Padding>\n\t\t\t\t<List>{items}</List>\n\t\t\t</Container>\n\t\t\t<Row\n\t\t\t\tpadding={{ horizontal: 'large', bottom: 'large' }}\n\t\t\t\twidth=\"fill\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tbackground=\"gray6\"\n\t\t\t>\n\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tlabel={t('label.add_persona', 'Add persona')}\n\t\t\t\t\t\tonClick={addNewPersona}\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t/>\n\t\t\t\t</Padding>\n\t\t\t\t<Button\n\t\t\t\t\tlabel={t('label.delete', 'Delete')}\n\t\t\t\t\tonClick={onDelete}\n\t\t\t\t\tcolor=\"error\"\n\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\tdisabled={isPrimary(identities[selectedIdentityId])}\n\t\t\t\t/>\n\t\t\t</Row>\n\t\t\t<Padding bottom=\"large\" />\n\t\t</>\n\t);\n};\n\nexport default AccountsList;\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useImperativeHandle } from 'react';\n\nimport { SettingsSectionProps } from '../components/utils';\n\nexport function useReset(ref: SettingsSectionProps['resetRef'], resetFn: () => void): void {\n\tuseImperativeHandle(\n\t\tref,\n\t\t() => ({\n\t\t\treset: resetFn\n\t\t}),\n\t\t[resetFn]\n\t);\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { ReactElement, useCallback, useState } from 'react';\n\nimport {\n\tContainer,\n\tText,\n\tList,\n\tDivider,\n\tRow,\n\tPadding,\n\tButton,\n\tRadio,\n\tRadioGroup,\n\tItemType,\n\tItemComponentProps\n} from '@zextras/carbonio-design-system';\nimport { noop } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport { AccountSettingsPrefs } from '../../../../types';\nimport { DELEGATED_SEND_SAVE_TARGET } from '../../../constants';\nimport { useReset } from '../../hooks/use-reset';\nimport { SettingsSectionProps } from '../utils';\n\nexport interface DelegateType extends ItemType {\n\temail: string;\n\tright: string;\n\tlabel?: string;\n}\n\nexport type DelegatesProps = {\n\tdelegatedSendSaveTarget: AccountSettingsPrefs['zimbraPrefDelegatedSendSaveTarget'];\n\tupdateDelegatedSendSaveTarget: (\n\t\tupdatedValue: AccountSettingsPrefs['zimbraPrefDelegatedSendSaveTarget']\n\t) => void;\n\tdelegates: DelegateType[];\n} & SettingsSectionProps;\nconst Delegates = ({\n\tdelegatedSendSaveTarget,\n\tupdateDelegatedSendSaveTarget,\n\tresetRef,\n\tdelegates\n}: DelegatesProps): JSX.Element => {\n\tconst [t] = useTranslation();\n\n\tconst [activeDelegate, setActiveDelegate] = useState<string>('0');\n\n\tconst [activeValue, setActiveValue] =\n\t\tuseState<AccountSettingsPrefs['zimbraPrefDelegatedSendSaveTarget']>(delegatedSendSaveTarget);\n\n\tconst radioGroupOnChange = useCallback<(newValue: string) => void>(\n\t\t(newValue) => {\n\t\t\tfunction isZimbraPrefDelegatedSendSaveTarget(\n\t\t\t\targ: string\n\t\t\t): arg is NonNullable<AccountSettingsPrefs['zimbraPrefDelegatedSendSaveTarget']> {\n\t\t\t\treturn DELEGATED_SEND_SAVE_TARGET.includes(arg);\n\t\t\t}\n\t\t\tif (isZimbraPrefDelegatedSendSaveTarget(newValue)) {\n\t\t\t\tsetActiveValue(newValue);\n\t\t\t\tupdateDelegatedSendSaveTarget(newValue);\n\t\t\t} else {\n\t\t\t\tthrow new Error('invalid zimbraPrefDelegatedSendSaveTarget value');\n\t\t\t}\n\t\t},\n\t\t[updateDelegatedSendSaveTarget]\n\t);\n\n\tconst resetHandler = useCallback((): void => {\n\t\tsetActiveValue(delegatedSendSaveTarget);\n\t\tupdateDelegatedSendSaveTarget(delegatedSendSaveTarget);\n\t}, [delegatedSendSaveTarget, updateDelegatedSendSaveTarget]);\n\n\tuseReset(resetRef, resetHandler);\n\n\tconst ListItem = ({ item }: ItemComponentProps<DelegateType>): ReactElement => {\n\t\tconst setActiveDelegateCallback = useCallback(() => setActiveDelegate(item.id), [item.id]);\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Container\n\t\t\t\t\tonClick={setActiveDelegateCallback}\n\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\tpadding={{ all: 'small' }}\n\t\t\t\t>\n\t\t\t\t\t<Row width=\"fill\" mainAlignment=\"space-between\">\n\t\t\t\t\t\t<Container orientation=\"horizontal\" mainAlignment=\"flex-start\" width=\"fit\">\n\t\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t\t<Text weight=\"regular\" size=\"small\">\n\t\t\t\t\t\t\t\t\t{item.label}\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t\t<Text weight=\"regular\" size=\"small\" color=\"secondary\">\n\t\t\t\t\t\t\t\t\t{item.email}\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t<Container width=\"fit\" mainAlignment=\"flex-end\">\n\t\t\t\t\t\t\t<Text weight=\"regular\" size=\"small\">\n\t\t\t\t\t\t\t\t{item.right}\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t</Row>\n\n\t\t\t\t\t<Row width=\"fit\"></Row>\n\t\t\t\t</Container>\n\t\t\t\t<Divider />\n\t\t\t</>\n\t\t);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Container\n\t\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ all: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground=\"gray6\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Padding horizontal=\"medium\" bottom=\"large\" width=\"100%\">\n\t\t\t\t\t<Text weight=\"bold\">{t('label.delegates', 'Delegates')}</Text>\n\t\t\t\t</Padding>\n\t\t\t\t<List items={delegates} ItemComponent={ListItem} active={activeDelegate} height=\"fit\" />\n\t\t\t</Container>\n\t\t\t<Row\n\t\t\t\tpadding={{ horizontal: 'large' }}\n\t\t\t\twidth=\"fill\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tbackground=\"gray6\"\n\t\t\t>\n\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tlabel={t('label.add_delegate', 'Add delegate')}\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\tdisabled\n\t\t\t\t\t\tonClick={noop}\n\t\t\t\t\t/>\n\t\t\t\t</Padding>\n\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tlabel={t('label.edit_permissions', 'Edit permissions')}\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\tdisabled\n\t\t\t\t\t\tonClick={noop}\n\t\t\t\t\t/>\n\t\t\t\t</Padding>\n\t\t\t\t<Button\n\t\t\t\t\tlabel={t('label.remove', 'remove')}\n\t\t\t\t\tcolor=\"error\"\n\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\tdisabled\n\t\t\t\t\tonClick={noop}\n\t\t\t\t/>\n\t\t\t</Row>\n\t\t\t<Container\n\t\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\t\twidth=\"100%\"\n\t\t\t\tpadding={{ all: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground=\"gray6\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<RadioGroup\n\t\t\t\t\tstyle={{ width: '100%', justifyContent: 'flex-start' }}\n\t\t\t\t\tvalue={activeValue}\n\t\t\t\t\tonChange={radioGroupOnChange}\n\t\t\t\t>\n\t\t\t\t\t<Radio\n\t\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\t\tlabel={t(\n\t\t\t\t\t\t\t'label.save_to_my_sent_folder',\n\t\t\t\t\t\t\t'Save a copy of sent messages to my Sent folder'\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tvalue={'owner'}\n\t\t\t\t\t/>\n\t\t\t\t\t<Radio\n\t\t\t\t\t\tlabel={t(\n\t\t\t\t\t\t\t'label.save_delegate_folder',\n\t\t\t\t\t\t\t'Save a copy of sent messages to delegate’s Sent folder'\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tvalue={'sender'}\n\t\t\t\t\t/>\n\t\t\t\t\t<Radio\n\t\t\t\t\t\tlabel={t(\n\t\t\t\t\t\t\t'label.save_both_folders',\n\t\t\t\t\t\t\t'Save a copy of sent messages to my Sent folder and delegate’s folder'\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tvalue={'both'}\n\t\t\t\t\t/>\n\t\t\t\t\t<Radio\n\t\t\t\t\t\tlabel={t('label.dont_save', 'Don’t save a copy of sent messages')}\n\t\t\t\t\t\tvalue={'none'}\n\t\t\t\t\t/>\n\t\t\t\t</RadioGroup>\n\t\t\t\t<Padding bottom=\"large\" />\n\t\t\t</Container>\n\t\t</>\n\t);\n};\n\nexport default Delegates;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useState, useCallback, ReactElement, useEffect, useMemo } from 'react';\n\nimport { Container, Text, Padding, Input, Row, InputProps } from '@zextras/carbonio-design-system';\nimport { useTranslation } from 'react-i18next';\n\nimport { IdentityAttrs } from '../../../../types';\n\ninterface PersonaSettingsProps {\n\tidentityAttrs: IdentityAttrs;\n\tupdateIdentities: <K extends keyof IdentityAttrs>(\n\t\tid: string,\n\t\tkey: K,\n\t\tvalue: IdentityAttrs[K]\n\t) => void;\n}\n\nconst PersonaSettings = ({\n\tidentityAttrs,\n\tupdateIdentities\n}: PersonaSettingsProps): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst [personaValue, setPersonaValue] = useState(identityAttrs.zimbraPrefIdentityName);\n\tconst personaLabel = useMemo(() => t('label.persona_name', 'Persona Name'), [t]);\n\tuseEffect(() => {\n\t\tsetPersonaValue(identityAttrs.zimbraPrefIdentityName);\n\t}, [identityAttrs.zimbraPrefIdentityName]);\n\n\tconst onChange = useCallback<NonNullable<InputProps['onChange']>>(\n\t\t(ev) => {\n\t\t\tsetPersonaValue(ev.target.value);\n\t\t\tif (identityAttrs.zimbraPrefIdentityId) {\n\t\t\t\tupdateIdentities(\n\t\t\t\t\tidentityAttrs.zimbraPrefIdentityId,\n\t\t\t\t\t'zimbraPrefIdentityName',\n\t\t\t\t\tev.target.value\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[identityAttrs.zimbraPrefIdentityId, updateIdentities]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Container\n\t\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ all: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground={'gray6'}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Padding horizontal=\"medium\" width=\"100%\">\n\t\t\t\t\t<Text weight=\"bold\">{t('label.persona_settings', 'Persona Settings')}</Text>\n\t\t\t\t</Padding>\n\t\t\t</Container>\n\t\t\t<Row\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ horizontal: 'large', bottom: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground={'gray6'}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Row orientation=\"vertical\" mainAlignment=\"flex-start\" width=\"fill\">\n\t\t\t\t\t<Row orientation=\"horizontal\" width=\"100%\" mainAlignment=\"flex-start\">\n\t\t\t\t\t\t<Text color=\"secondary\">\n\t\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t\t'label.use_personas_line1',\n\t\t\t\t\t\t\t\t'Use personas to quickly change many settings when sending e-mail messages.'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Row orientation=\"horizontal\" width=\"100%\" mainAlignment=\"flex-start\">\n\t\t\t\t\t\t<Text color=\"secondary\">\n\t\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t\t'label.use_personas_line2',\n\t\t\t\t\t\t\t\t'For example, if you sometimes send e-mails in a particular role at work, create a persona for that.'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</Row>\n\t\t\t\t</Row>\n\t\t\t</Row>\n\t\t\t<Row\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ horizontal: 'large', bottom: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground={'gray6'}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Row takeAvailableSpace>\n\t\t\t\t\t<Input label={personaLabel} value={personaValue} onChange={onChange} />\n\t\t\t\t</Row>\n\t\t\t</Row>\n\n\t\t\t<Padding bottom=\"large\" />\n\t\t</>\n\t);\n};\n\nexport default PersonaSettings;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useMemo, useCallback, ReactElement, useState, useEffect } from 'react';\n\nimport { Container, Text, Padding, Input, Row, InputProps } from '@zextras/carbonio-design-system';\nimport { useTranslation } from 'react-i18next';\n\nimport { Account, Identity, IdentityAttrs } from '../../../../types';\n\ninterface PrimaryAccountSettingsProps {\n\taccount: Account;\n\tidentity: Identity;\n\tupdateIdentities: <K extends keyof IdentityAttrs>(\n\t\tid: string,\n\t\tkey: K,\n\t\tvalue: IdentityAttrs[K]\n\t) => void;\n}\n\nconst PrimaryAccountSettings = ({\n\taccount,\n\tidentity,\n\tupdateIdentities\n}: PrimaryAccountSettingsProps): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst emailLabel = useMemo(() => t('label.email_address', 'E-mail address'), [t]);\n\tconst [accountNameValue, setAccountNameValue] = useState(\n\t\tidentity?._attrs?.zimbraPrefIdentityName\n\t);\n\n\tuseEffect(\n\t\t() => setAccountNameValue(identity._attrs?.zimbraPrefIdentityName),\n\t\t[identity._attrs?.zimbraPrefIdentityName]\n\t);\n\tconst accountLabel = useMemo(() => t('label.account_name', 'Account Name'), [t]);\n\n\tconst onChangeDisabled = useCallback(() => null, []);\n\tconst onChange = useCallback<NonNullable<InputProps['onChange']>>(\n\t\t(ev): void => {\n\t\t\tsetAccountNameValue(ev.target.value);\n\t\t\tupdateIdentities(identity.id, 'zimbraPrefIdentityName', ev.target.value);\n\t\t},\n\t\t[identity.id, updateIdentities]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Container\n\t\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ all: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground=\"gray6\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Padding horizontal=\"medium\" width=\"100%\">\n\t\t\t\t\t<Text weight=\"bold\">{t('primary_account.title', 'Primary Account Settings')}</Text>\n\t\t\t\t</Padding>\n\t\t\t</Container>\n\t\t\t<Row\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ horizontal: 'large', bottom: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground=\"gray6\"\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Row width=\"50%\" padding={{ right: 'small' }}>\n\t\t\t\t\t<Input label={emailLabel} value={account.name || ' '} onChange={onChangeDisabled} />\n\t\t\t\t</Row>\n\t\t\t\t<Row width=\"50%\">\n\t\t\t\t\t<Input label={accountLabel} value={accountNameValue} onChange={onChange} />\n\t\t\t\t</Row>\n\t\t\t</Row>\n\t\t\t<Padding bottom=\"large\" />\n\t\t</>\n\t);\n};\n\nexport default PrimaryAccountSettings;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { ReactElement, useCallback, useEffect, useMemo, useState } from 'react';\n\nimport {\n\tCheckbox,\n\tContainer,\n\tDropdown,\n\tDropdownItem,\n\tIcon,\n\tInput,\n\tInputProps,\n\tPadding,\n\tRow,\n\tSelect,\n\tSelectItem,\n\tSingleSelectionOnChange,\n\tText\n} from '@zextras/carbonio-design-system';\nimport { filter, find } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport { IdentityAttrs } from '../../../../types';\nimport { EMAIL_VALIDATION_REGEX } from '../../../constants';\n\ntype SettingsSentMessagesProps = {\n\tidentityAttrs: IdentityAttrs;\n\tupdateIdentities: <K extends keyof IdentityAttrs>(\n\t\tid: string,\n\t\tkey: K,\n\t\tvalue: IdentityAttrs[K]\n\t) => void;\n\tavailableEmailAddresses?: string[];\n};\n\nconst blankItem: SelectItem = { label: '', value: '' };\n\nconst SettingsSentMessages = ({\n\tidentityAttrs,\n\tupdateIdentities,\n\tavailableEmailAddresses\n}: SettingsSentMessagesProps): ReactElement => {\n\tconst [t] = useTranslation();\n\tconst title = useMemo(() => t('label.settings_sent_messages', 'Settings for Sent Messages'), [t]);\n\tconst [replyToEnabledValue, setReplyToEnabledValue] = useState(\n\t\tidentityAttrs.zimbraPrefReplyToEnabled === 'TRUE'\n\t);\n\tconst [replyToAddress, setReplyToAddress] = useState<string>(\n\t\tidentityAttrs.zimbraPrefReplyToAddress || ''\n\t);\n\tconst [dropdownOpen, setDropdownOpen] = useState(false);\n\tconst [fromDisplayValue, setFromDisplayValue] = useState<string>(\n\t\tidentityAttrs.zimbraPrefFromDisplay || ''\n\t);\n\tconst [replyToDisplay, setReplyToDisplay] = useState<string>(\n\t\tidentityAttrs.zimbraPrefReplyToDisplay || ''\n\t);\n\tconst fromAddressArray = useMemo(\n\t\t(): SelectItem[] =>\n\t\t\tavailableEmailAddresses\n\t\t\t\t? availableEmailAddresses.map((address): SelectItem => ({ value: address, label: address }))\n\t\t\t\t: [blankItem],\n\t\t[availableEmailAddresses]\n\t);\n\tconst [fromAddress, setFromAddress] = useState(\n\t\t() =>\n\t\t\tfind(fromAddressArray, (item) => item.value === identityAttrs.zimbraPrefFromAddress) ??\n\t\t\tblankItem\n\t);\n\n\tuseEffect(() => {\n\t\tsetReplyToEnabledValue(identityAttrs.zimbraPrefReplyToEnabled === 'TRUE');\n\t}, [identityAttrs.zimbraPrefReplyToEnabled]);\n\tuseEffect(() => {\n\t\tsetFromDisplayValue(identityAttrs.zimbraPrefFromDisplay || '');\n\t}, [identityAttrs.zimbraPrefFromDisplay]);\n\tuseEffect(() => {\n\t\tsetFromAddress(\n\t\t\tfind(fromAddressArray, (item) => item.value === identityAttrs.zimbraPrefFromAddress) ??\n\t\t\t\tblankItem\n\t\t);\n\t}, [fromAddressArray, identityAttrs.zimbraPrefFromAddress]);\n\tuseEffect(() => {\n\t\tsetReplyToDisplay(identityAttrs.zimbraPrefReplyToDisplay ?? '');\n\t}, [identityAttrs.zimbraPrefReplyToDisplay]);\n\tuseEffect(() => {\n\t\tsetReplyToAddress(identityAttrs.zimbraPrefReplyToAddress || '');\n\t}, [identityAttrs.zimbraPrefReplyToAddress]);\n\n\tconst onClickReplyToEnabled = useCallback(() => {\n\t\tsetReplyToEnabledValue((prevState) => {\n\t\t\tconst newState = !prevState;\n\t\t\tif (identityAttrs.zimbraPrefIdentityId) {\n\t\t\t\tupdateIdentities(\n\t\t\t\t\tidentityAttrs.zimbraPrefIdentityId,\n\t\t\t\t\t'zimbraPrefReplyToEnabled',\n\t\t\t\t\tprevState ? 'FALSE' : 'TRUE'\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn newState;\n\t\t});\n\t}, [identityAttrs.zimbraPrefIdentityId, updateIdentities]);\n\n\tconst fromDisplayLabel = useMemo(() => t('label.from_name', 'From: \"Name\"'), [t]);\n\tconst onChangeFromDisplayValue: InputProps['onChange'] = (e) => {\n\t\tsetFromDisplayValue(e.target.value);\n\t\tif (identityAttrs.zimbraPrefIdentityId) {\n\t\t\tupdateIdentities(identityAttrs.zimbraPrefIdentityId, 'zimbraPrefFromDisplay', e.target.value);\n\t\t}\n\t};\n\n\tconst fromAddressLabel = useMemo(() => t('label.address', 'Address'), [t]);\n\n\tconst onChangeFromAddress = useCallback<SingleSelectionOnChange>(\n\t\t(newAddress) => {\n\t\t\tif (!newAddress) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (fromAddress?.value === newAddress) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetFromAddress(filter(fromAddressArray, (item) => item.value === newAddress)[0]);\n\t\t\tif (identityAttrs.zimbraPrefIdentityId) {\n\t\t\t\tupdateIdentities(identityAttrs.zimbraPrefIdentityId, 'zimbraPrefFromAddress', newAddress);\n\t\t\t}\n\t\t},\n\t\t[fromAddress?.value, fromAddressArray, identityAttrs.zimbraPrefIdentityId, updateIdentities]\n\t);\n\n\tconst replyToEnabledLabel = t(\n\t\t'label.set_reply_to_field',\n\t\t'Set the \"Reply-to\" field of e-mail message to:'\n\t);\n\n\tconst replyToDisplayLabel = useMemo(\n\t\t() => t('label.reply_to_field_example', 'e.g. Bob Smith'),\n\t\t[t]\n\t);\n\tconst onChangePrefReplyToDisplay = useCallback<NonNullable<InputProps['onChange']>>(\n\t\t(e) => {\n\t\t\tsetReplyToDisplay(e.target.value);\n\t\t\tif (identityAttrs.zimbraPrefIdentityId) {\n\t\t\t\tupdateIdentities(\n\t\t\t\t\tidentityAttrs.zimbraPrefIdentityId,\n\t\t\t\t\t'zimbraPrefReplyToDisplay',\n\t\t\t\t\te.target.value\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[identityAttrs.zimbraPrefIdentityId, updateIdentities]\n\t);\n\n\tconst replyToAddressLabel = useMemo(() => t('label.choose_account', 'Choose an account'), [t]);\n\n\tconst onChangeReplyToAddress = useCallback(\n\t\t(value: string) => {\n\t\t\tsetReplyToAddress(value);\n\t\t\tif (identityAttrs.zimbraPrefIdentityId) {\n\t\t\t\tupdateIdentities(identityAttrs.zimbraPrefIdentityId, 'zimbraPrefReplyToAddress', value);\n\t\t\t}\n\t\t},\n\t\t[updateIdentities, identityAttrs.zimbraPrefIdentityId]\n\t);\n\n\tconst replyToAddressArray = useMemo(\n\t\t(): DropdownItem[] => [\n\t\t\t{\n\t\t\t\tid: '0',\n\t\t\t\tlabel: identityAttrs.zimbraPrefFromAddress ?? '',\n\t\t\t\tonClick: () => onChangeReplyToAddress(identityAttrs.zimbraPrefFromAddress ?? '')\n\t\t\t}\n\t\t],\n\t\t[identityAttrs.zimbraPrefFromAddress, onChangeReplyToAddress]\n\t);\n\n\tconst isValidEmail = useMemo(\n\t\t() => replyToEnabledValue && !EMAIL_VALIDATION_REGEX.test(replyToAddress || ''),\n\t\t[replyToEnabledValue, replyToAddress]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Container\n\t\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ all: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground={'gray6'}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Padding horizontal=\"medium\" width=\"100%\">\n\t\t\t\t\t<Text weight=\"bold\">{title}</Text>\n\t\t\t\t</Padding>\n\t\t\t</Container>\n\t\t\t<Row\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ horizontal: 'large', bottom: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground={'gray6'}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Row width={'50%'} padding={{ right: 'small' }}>\n\t\t\t\t\t{/* zimbraPrefFromDisplay */}\n\t\t\t\t\t<Input\n\t\t\t\t\t\tlabel={fromDisplayLabel}\n\t\t\t\t\t\tvalue={fromDisplayValue}\n\t\t\t\t\t\tonChange={onChangeFromDisplayValue}\n\t\t\t\t\t/>\n\t\t\t\t</Row>\n\t\t\t\t<Row width=\"50%\">\n\t\t\t\t\t{/* zimbraPrefFromAddress */}\n\t\t\t\t\t<Select\n\t\t\t\t\t\tlabel={fromAddressLabel}\n\t\t\t\t\t\tselection={fromAddress}\n\t\t\t\t\t\titems={fromAddressArray}\n\t\t\t\t\t\tshowCheckbox={false}\n\t\t\t\t\t\tbackground={'gray5'}\n\t\t\t\t\t\tonChange={onChangeFromAddress}\n\t\t\t\t\t/>\n\t\t\t\t</Row>\n\t\t\t</Row>\n\t\t\t<Row\n\t\t\t\twidth=\"fill\"\n\t\t\t\tbackground={'gray6'}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tpadding={{ horizontal: 'large', bottom: 'large' }}\n\t\t\t>\n\t\t\t\t{/* zimbraPrefReplyToEnabled */}\n\t\t\t\t<Checkbox\n\t\t\t\t\tlabel={replyToEnabledLabel}\n\t\t\t\t\tvalue={replyToEnabledValue}\n\t\t\t\t\tonClick={onClickReplyToEnabled}\n\t\t\t\t/>\n\t\t\t</Row>\n\t\t\t<Row\n\t\t\t\twidth=\"fill\"\n\t\t\t\tpadding={{ horizontal: 'large', bottom: 'large' }}\n\t\t\t\theight=\"fit\"\n\t\t\t\tbackground={'gray6'}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t>\n\t\t\t\t<Row width=\"50%\" padding={{ right: 'small' }}>\n\t\t\t\t\t{/* zimbraPrefReplyToDisplay */}\n\t\t\t\t\t<Input\n\t\t\t\t\t\tlabel={replyToDisplayLabel}\n\t\t\t\t\t\tvalue={replyToDisplay}\n\t\t\t\t\t\tdisabled={!replyToEnabledValue}\n\t\t\t\t\t\tonChange={onChangePrefReplyToDisplay}\n\t\t\t\t\t/>\n\t\t\t\t</Row>\n\t\t\t\t<Row width=\"50%\">\n\t\t\t\t\t{/* zimbraPrefReplyToAddress */}\n\t\t\t\t\t<Dropdown\n\t\t\t\t\t\titems={replyToAddressArray}\n\t\t\t\t\t\tplacement=\"bottom-start\"\n\t\t\t\t\t\tstyle={{ flexGrow: '1' }}\n\t\t\t\t\t\tonClose={(): void => setDropdownOpen(false)}\n\t\t\t\t\t\tonOpen={(): void => setDropdownOpen(true)}\n\t\t\t\t\t\tdisabled={!replyToEnabledValue}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tlabel={replyToAddressLabel}\n\t\t\t\t\t\t\tvalue={replyToAddress}\n\t\t\t\t\t\t\tonChange={(ev): void => onChangeReplyToAddress(ev.target.value)}\n\t\t\t\t\t\t\thasError={isValidEmail}\n\t\t\t\t\t\t\tCustomIcon={(): ReactElement => (\n\t\t\t\t\t\t\t\t<Icon icon={dropdownOpen ? 'ArrowUp' : 'ArrowDown'} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tdisabled={!replyToEnabledValue}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Dropdown>\n\t\t\t\t</Row>\n\t\t\t</Row>\n\t\t\t<Padding bottom=\"large\" />\n\t\t</>\n\t);\n};\n\nexport default SettingsSentMessages;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useEffect, useState, useMemo } from 'react';\n\nimport { Modal, Button, ModalProps } from '@zextras/carbonio-design-system';\nimport { Location } from 'history';\nimport { filter } from 'lodash';\nimport { useTranslation } from 'react-i18next';\nimport { Prompt, useHistory } from 'react-router-dom';\n\nexport interface RouteLeavingGuardProps {\n\tchildren: ModalProps['children'];\n\twhen?: boolean;\n\tonSave: () => Promise<PromiseSettledResult<Awaited<unknown>>[]>;\n\tdataHasError?: boolean;\n}\n\nexport const RouteLeavingGuard = ({\n\tchildren,\n\twhen,\n\tonSave,\n\tdataHasError = false\n}: RouteLeavingGuardProps): JSX.Element => {\n\tconst history = useHistory();\n\tconst lastLocationInitial = useMemo(() => history.location, [history]);\n\tconst [modalVisible, setModalVisible] = useState(false);\n\tconst [lastLocation, setLastLocation] = useState<Location>(lastLocationInitial);\n\tconst [confirmedNavigation, setConfirmedNavigation] = useState(false);\n\tconst [t] = useTranslation();\n\tconst cancel = (): void => {\n\t\tsetModalVisible(false);\n\t\tsetConfirmedNavigation(false);\n\t};\n\n\tconst handleBlockedNavigation = (nextLocation: Location): boolean => {\n\t\tif (\n\t\t\t!confirmedNavigation &&\n\t\t\t`${nextLocation.pathname}${nextLocation.search || ''}` !==\n\t\t\t\t`${history.location.pathname}${history.location.search}`\n\t\t) {\n\t\t\tsetModalVisible(true);\n\t\t\tsetLastLocation(nextLocation);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\tconst onConfirm = (): void => {\n\t\tonSave()\n\t\t\t.then((results) => {\n\t\t\t\tconst rejected = filter(\n\t\t\t\t\tresults,\n\t\t\t\t\t(result): result is PromiseRejectedResult => result.status === 'rejected'\n\t\t\t\t);\n\t\t\t\tif (rejected.length > 0) {\n\t\t\t\t\tconsole.error(rejected);\n\t\t\t\t\tcancel();\n\t\t\t\t} else {\n\t\t\t\t\tsetModalVisible(false);\n\t\t\t\t\tsetConfirmedNavigation(true);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((reason) => {\n\t\t\t\tconsole.error(reason);\n\t\t\t\tcancel();\n\t\t\t});\n\t};\n\n\tconst onSecondaryAction = (): void => {\n\t\tsetModalVisible(false);\n\t\tsetConfirmedNavigation(true);\n\t};\n\n\tuseEffect(() => {\n\t\tif (confirmedNavigation && lastLocation) {\n\t\t\t// Navigate to the previous blocked location with your navigate function\n\t\t\thistory.push(lastLocation);\n\t\t}\n\t}, [confirmedNavigation, history, lastLocation]);\n\n\treturn (\n\t\t<>\n\t\t\t<Prompt when={when} message={handleBlockedNavigation} />\n\t\t\t{/* Your own alert/dialog/modal component */}\n\t\t\t<Modal\n\t\t\t\tshowCloseIcon\n\t\t\t\tcloseIconTooltip={t('label.close', 'Close')}\n\t\t\t\topen={modalVisible}\n\t\t\t\ttitle={\n\t\t\t\t\tdataHasError\n\t\t\t\t\t\t? t('label.cannot_save_changes', 'Some changes cannot be saved')\n\t\t\t\t\t\t: t('label.unsaved_changes', 'You have unsaved changes')\n\t\t\t\t}\n\t\t\t\tonClose={cancel}\n\t\t\t\tonConfirm={dataHasError ? onSecondaryAction : onConfirm}\n\t\t\t\tconfirmLabel={\n\t\t\t\t\tdataHasError\n\t\t\t\t\t\t? t('label.leave_anyway', 'Leave anyway')\n\t\t\t\t\t\t: t('label.save_and_leave', 'Save and leave')\n\t\t\t\t}\n\t\t\t\tonSecondaryAction={dataHasError ? cancel : onSecondaryAction}\n\t\t\t\tsecondaryActionLabel={\n\t\t\t\t\tdataHasError ? t('label.cancel', 'Cancel') : t('label.leave_anyway', 'Leave anyway')\n\t\t\t\t}\n\t\t\t\toptionalFooter={\n\t\t\t\t\t!dataHasError ? (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\t\tlabel={t('label.cancel', 'Cancel')}\n\t\t\t\t\t\t\tonClick={cancel}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : undefined\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</Modal>\n\t\t</>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useEffect, useMemo } from 'react';\n\nimport {\n\tBreadcrumbs,\n\tButton,\n\tContainer,\n\ttype Crumb,\n\tDivider,\n\tPadding,\n\tRow,\n\tText\n} from '@zextras/carbonio-design-system';\nimport { useHistory, useParams } from 'react-router-dom';\n\nimport { SETTINGS_APP_ID } from '../../constants';\nimport { getT } from '../../store/i18n';\nimport { RouteLeavingGuard, RouteLeavingGuardProps } from '../../ui-extras/nav-guard';\n\nexport type SettingsHeaderProps = {\n\ttitle: string;\n\tonSave: RouteLeavingGuardProps['onSave'];\n\tonCancel: () => void;\n\tisDirty: boolean;\n};\n\nconst SettingsHeader = ({ onSave, onCancel, isDirty, title }: SettingsHeaderProps): JSX.Element => {\n\tconst t = getT();\n\tconst history = useHistory();\n\tconst params = useParams();\n\tconst crumbs = useMemo(\n\t\t(): Crumb[] => [\n\t\t\t{\n\t\t\t\tid: 'settings',\n\t\t\t\tlabel: t('settings.app', 'Settings'),\n\t\t\t\tonClick: (): void => history.push(`/${SETTINGS_APP_ID}/`)\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'general',\n\t\t\t\tlabel: title,\n\t\t\t\tonClick: (): void => history.push(`/${SETTINGS_APP_ID}/`)\n\t\t\t}\n\t\t],\n\t\t[history, t, title]\n\t);\n\n\tconst search: string | undefined = history.location?.search;\n\n\tuseEffect(() => {\n\t\tif (search) {\n\t\t\t// TODO: why not using anchor links instead of js?\n\t\t\tsetTimeout(\n\t\t\t\t() =>\n\t\t\t\t\tdocument\n\t\t\t\t\t\t.querySelector(`#${history.location.search}`.replace('?section=', ''))\n\t\t\t\t\t\t?.scrollIntoView(),\n\t\t\t\t1\n\t\t\t);\n\t\t}\n\t}, [history, history.location, history.location.search, search, params]);\n\treturn (\n\t\t<>\n\t\t\t<RouteLeavingGuard when={isDirty} onSave={onSave}>\n\t\t\t\t<Text>\n\t\t\t\t\t{t(\n\t\t\t\t\t\t'label.unsaved_changes_line1',\n\t\t\t\t\t\t'Are you sure you want to leave this page without saving?'\n\t\t\t\t\t)}\n\t\t\t\t</Text>\n\t\t\t\t<Text>{t('label.unsaved_changes_line2', 'All your unsaved changes will be lost')}</Text>\n\t\t\t</RouteLeavingGuard>\n\t\t\t<Container\n\t\t\t\torientation=\"vertical\"\n\t\t\t\tmainAlignment=\"space-around\"\n\t\t\t\tbackground={'gray5'}\n\t\t\t\theight=\"fit\"\n\t\t\t>\n\t\t\t\t<Row orientation=\"horizontal\" width=\"100%\">\n\t\t\t\t\t<Row\n\t\t\t\t\t\tpadding={{ all: 'small' }}\n\t\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\t\twidth=\"50%\"\n\t\t\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Breadcrumbs crumbs={crumbs} />\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Row\n\t\t\t\t\t\tpadding={{ all: 'small' }}\n\t\t\t\t\t\twidth=\"50%\"\n\t\t\t\t\t\tmainAlignment=\"flex-end\"\n\t\t\t\t\t\tcrossAlignment=\"flex-end\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tlabel={t('label.discard_changes', 'DISCARD CHANGES')}\n\t\t\t\t\t\t\t\tonClick={onCancel}\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\tdisabled={!isDirty}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tlabel={t('label.save', 'Save')}\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tonClick={onSave}\n\t\t\t\t\t\t\tdisabled={!isDirty}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Row>\n\t\t\t\t</Row>\n\t\t\t</Container>\n\t\t\t<Divider />\n\t\t</>\n\t);\n};\n\nexport default SettingsHeader;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport UAParser from 'ua-parser-js';\n\nconst { os, browser } = UAParser();\nexport const userAgent = `CarbonioWebClient - ${browser.name} ${browser.version} (${os.name})`;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nexport function goToLogin(): void {\n\twindow.location.assign(`${window.location.origin}/static/login`);\n}\n\nexport function goTo(location: string): void {\n\twindow.location.assign(location);\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { create } from 'zustand';\n\nimport type { NetworkState } from '../../../types';\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useNetworkStore = create<NetworkState>()(() => ({\n\tpollingInterval: 30000,\n\tseq: 0\n}));\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useNetworkStore } from './store';\nimport { SoapNotify, SoapRefresh } from '../../../types';\n\nexport const useNotify = (): SoapNotify[] => useNetworkStore((s) => s.notify ?? []);\nexport const useRefresh = (): SoapRefresh => useNetworkStore((s) => s.refresh ?? {});\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nexport const tagWorker = new Worker(new URL('./tag', import.meta.url));\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nexport const folderWorker = new Worker(new URL('./folder', import.meta.url));\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { create } from 'zustand';\n\nimport type { FolderState } from '../../../types';\nimport { folderWorker } from '../../workers';\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useFolderStore = create<FolderState>()(() => ({\n\tfolders: {},\n\troots: {},\n\tsearches: {}\n}));\n\nfolderWorker.onmessage = ({ data }): void => {\n\tuseFolderStore.setState(data);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { sortBy } from 'lodash';\n\nimport { Folder, FolderView, LinkFolder, TreeNode } from '../../../types';\nimport { FOLDERS, ROOT_NAME } from '../../constants';\n\nconst hasId = (f: Folder | TreeNode<unknown>, id: string): boolean => f.id.split(':').includes(id);\nconst getOriginalId = (f: Folder): string => {\n\tconst parts = f.id.split(':');\n\treturn parts[1] ?? parts[0];\n};\nexport const sortFolders = (f: Folder): string => {\n\tconst id = getOriginalId(f);\n\tif (id === FOLDERS.TRASH) {\n\t\treturn FOLDERS.LAST_SYSTEM_FOLDER_POSITION;\n\t}\n\treturn parseInt(id, 10) < 17 ? `   ${id}` : f.name.toLowerCase();\n};\n\nexport const isTrash = (f: Folder): boolean => hasId(f, FOLDERS.TRASH);\n\nexport const isRoot = (f: Folder): boolean =>\n\tf.id === FOLDERS.USER_ROOT || (f as LinkFolder).oname === ROOT_NAME;\n\nexport const folderViewFilter =\n\t(v: FolderView) =>\n\t(deep?: boolean) =>\n\t(f: Folder): boolean =>\n\t\tf.view === v || !deep || (typeof f.view === 'undefined' && !isRoot(f));\n\nexport const filterNodes = <T>(\n\tchildren: TreeNode<T>[],\n\tf: (deep?: boolean) => (i: TreeNode<T>) => boolean,\n\tsortFunction?: (i: TreeNode<T>) => number | string,\n\tdeep?: boolean\n): TreeNode<T>[] => {\n\tconst childrenSorted = sortFunction ? sortBy(children, sortFunction) : children;\n\treturn childrenSorted\n\t\t.filter(f(deep))\n\t\t.map((i) => ({ ...i, children: filterNodes<TreeNode<T>>(i.children, f, sortFunction, true) }));\n};\n\ntype MapNodesOptions<T, U> = {\n\tmapFunction: (i: TreeNode<T>) => U;\n\tfilterFunction: (deep?: boolean) => (i: TreeNode<T>) => boolean;\n\trecursionKey: keyof U;\n\tsortFunction: (i: TreeNode<T>) => number | string;\n\tdeep: boolean;\n};\nexport const mapNodes = <T, U>(\n\tchildren: TreeNode<T>[],\n\t{ mapFunction, filterFunction, recursionKey, sortFunction, deep }: MapNodesOptions<T, U>\n): U[] =>\n\tsortBy(children, sortFunction).reduce((acc, folder) => {\n\t\tif (filterFunction(deep)(folder)) {\n\t\t\tacc.push({\n\t\t\t\t...mapFunction(folder),\n\t\t\t\t[recursionKey]: mapNodes<TreeNode<T>, U>(folder.children, {\n\t\t\t\t\tmapFunction,\n\t\t\t\t\tfilterFunction,\n\t\t\t\t\trecursionKey,\n\t\t\t\t\tsortFunction,\n\t\t\t\t\tdeep: true\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\t\treturn acc;\n\t}, [] as U[]);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { ComponentType, useMemo } from 'react';\n\nimport { useFolderStore } from './store';\nimport { filterNodes, folderViewFilter, isRoot, mapNodes, sortFolders } from './utils';\nimport {\n\tAccordionFolder,\n\tFolder,\n\tFolders,\n\tFolderView,\n\tSearches,\n\tSearchFolder\n} from '../../../types';\n\n// FOLDERS\nexport const useFolder = (id: string): Folder | undefined => useFolderStore((s) => s.folders?.[id]);\nexport const getFolder = (id: string): Folder | undefined =>\n\tuseFolderStore.getState()?.folders?.[id];\nexport const useFolders = (): Folders => useFolderStore((s) => s.folders);\nexport const getFolders = (): Folders => useFolderStore.getState().folders;\n\n// ROOTS\nexport const useRoot = (id: string): Folder | undefined => useFolderStore((s) => s.roots?.[id]);\nexport const getRoot = (id: string): Folder | undefined => useFolderStore.getState().roots?.[id];\nexport const useRoots = (): Folders => useFolderStore((s) => s.roots);\nexport const getRoots = (): Folders => useFolderStore.getState().roots;\n\n// ROOTS BY VIEW\nexport const useRootByUser = (userId: string): Folder | SearchFolder | Record<string, never> =>\n\tuseFolderStore((s) => (s.roots ? s.roots[userId] : {}));\nexport const getRootByUser = (userId: string): Folder | SearchFolder | Record<string, never> => {\n\tconst folders = useFolderStore.getState();\n\treturn folders.roots ? folders.roots[userId] : {};\n};\n\n// SEARCHES\n\nexport const useSearchFolder = (id: string): SearchFolder | undefined =>\n\tuseFolderStore((s) => s.searches?.[id]);\nexport const getSearchFolder = (id: string): SearchFolder | undefined =>\n\tuseFolderStore.getState().searches[id];\nexport const useSearchFolders = (): Searches => useFolderStore((s) => s.searches);\nexport const getSearchFolders = (): Searches => useFolderStore.getState().searches;\n\n// Accordion-ize\n\nexport const useFoldersByView = (view: FolderView): Array<Folder> => {\n\tconst roots = useRoots();\n\treturn useMemo(\n\t\t() =>\n\t\t\troots ? filterNodes<Folder>(Object.values(roots), folderViewFilter(view), sortFolders) : [],\n\t\t[roots, view]\n\t);\n};\n\nexport const useFoldersAccordionByView = (\n\tview: FolderView,\n\tCustomComponent: ComponentType<{ folder: Folder }>,\n\titemProps?: (item: AccordionFolder) => Record<string, any>\n): Array<AccordionFolder> => {\n\tconst roots = useRoots();\n\treturn useMemo(\n\t\t() =>\n\t\t\troots\n\t\t\t\t? mapNodes<Folder, AccordionFolder>(Object.values(roots), {\n\t\t\t\t\t\tmapFunction: (f) => {\n\t\t\t\t\t\t\tconst item = {\n\t\t\t\t\t\t\t\tid: f.id,\n\t\t\t\t\t\t\t\tlabel: f.name,\n\t\t\t\t\t\t\t\tCustomComponent,\n\t\t\t\t\t\t\t\titems: [],\n\t\t\t\t\t\t\t\tfolder: f,\n\t\t\t\t\t\t\t\tdisableHover: isRoot(f)\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tconst props = itemProps?.(item) ?? {};\n\t\t\t\t\t\t\treturn { ...item, ...props };\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterFunction: folderViewFilter(view),\n\t\t\t\t\t\trecursionKey: 'items',\n\t\t\t\t\t\tsortFunction: sortFolders,\n\t\t\t\t\t\tdeep: false\n\t\t\t\t  })\n\t\t\t\t: [],\n\t\t[CustomComponent, itemProps, roots, view]\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { create } from 'zustand';\n\nimport type { TagState } from '../../../types';\nimport { tagWorker } from '../../workers';\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useTagStore = create<TagState>()(() => ({\n\ttags: {}\n}));\n\ntagWorker.onmessage = ({ data }): void => {\n\tuseTagStore.setState(data);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { pick } from 'lodash';\n\nimport { useTagStore } from './store';\nimport { Tags } from '../../../types';\n\n/* eslint-disable react-hooks/rules-of-hooks */\n/* THIS FILE CONTAINS HOOKS, BUT ESLINT IS DUMB */\n\nexport const useTags = (ids?: Array<string> | string): Tags =>\n\tuseTagStore((s) => (ids ? pick(s.tags, ids) : s.tags));\nexport const getTags = (ids?: Array<string> | string): Tags =>\n\tids ? pick(useTagStore.getState().tags, ids) : useTagStore.getState().tags;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { forEach } from 'lodash';\n\nimport { useNetworkStore } from './store';\nimport { AccountSettings, SoapContext, SoapResponse } from '../../../types';\nimport { folderWorker, tagWorker } from '../../workers';\nimport { useAccountStore } from '../account';\nimport { useFolderStore } from '../folder';\nimport { useTagStore } from '../tags';\n\n/**\n * Polling interval to use if the long polling delay\n * is not allowed for the user\n */\nconst POLLING_NOWAIT_INTERVAL = 10_000;\n\n/**\n * Polling interval to use if a previous request failed\n * with a 500 error\n */\nconst POLLING_RETRY_INTERVAL = 60_000;\n\nexport const parsePollingInterval = (settings: AccountSettings): number => {\n\tconst pollingPref = settings.prefs?.zimbraPrefMailPollingInterval ?? '';\n\tif (pollingPref === '500') {\n\t\treturn 500;\n\t}\n\tconst pollingValue = parseInt(pollingPref, 10);\n\tif (Number.isNaN(pollingValue)) {\n\t\treturn 30000;\n\t}\n\tif (pollingPref.includes('m')) {\n\t\treturn pollingValue * 60 * 1000;\n\t}\n\treturn pollingValue * 1000;\n};\n\n/**\n * Return the polling interval for the next NoOp request.\n * The interval length depends on the user settings, but it can be\n * overridden by the server response/errors\n * @param res\n */\nexport const getPollingInterval = <R>(res: SoapResponse<R>): number => {\n\tconst { pollingInterval } = useNetworkStore.getState();\n\tconst { settings } = useAccountStore.getState();\n\tconst waitDisallowed = (res?.Body as { waitDisallowed?: number })?.waitDisallowed;\n\tconst fault = res?.Body?.Fault;\n\tif (fault) {\n\t\treturn POLLING_RETRY_INTERVAL;\n\t}\n\tif (waitDisallowed) {\n\t\treturn POLLING_NOWAIT_INTERVAL;\n\t}\n\tif (!fault) {\n\t\treturn parsePollingInterval(settings);\n\t}\n\treturn pollingInterval;\n};\n\nexport const handleSync = ({ refresh, notify }: SoapContext): Promise<void> =>\n\tnew Promise((r) => {\n\t\tconst { seq } = useNetworkStore.getState();\n\t\tif (refresh) {\n\t\t\ttagWorker.postMessage({\n\t\t\t\top: 'refresh',\n\t\t\t\ttags: refresh.tags\n\t\t\t});\n\t\t\tfolderWorker.postMessage({\n\t\t\t\top: 'refresh',\n\t\t\t\tfolder: refresh.folder ?? []\n\t\t\t});\n\t\t}\n\t\tif (notify?.length) {\n\t\t\tforEach(notify, (item) => {\n\t\t\t\tif (item.seq > seq) {\n\t\t\t\t\ttagWorker.postMessage({\n\t\t\t\t\t\top: 'notify',\n\t\t\t\t\t\tnotify: item,\n\t\t\t\t\t\tstate: useTagStore.getState().tags\n\t\t\t\t\t});\n\t\t\t\t\tfolderWorker.postMessage({\n\t\t\t\t\t\top: 'notify',\n\t\t\t\t\t\tnotify: item,\n\t\t\t\t\t\tstate: useFolderStore.getState().folders\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tr();\n\t});\n// export const noOp = (): void => {\n// \t// eslint-disable-next-line @typescript-eslint/no-use-before-define\n// \tgetSoapFetch(SHELL_APP_ID)(\n// \t\t'NoOp',\n// \t\tuseNetworkStore.getState().pollingInterval === 500\n// \t\t\t? { _jsns: 'urn:zimbraMail', limitToOneBlocked: 1, wait: 1 }\n// \t\t\t: { _jsns: 'urn:zimbraMail' }\n// \t);\n// };\n// export const handleSoapContext = ({ notify, refresh, session, change }: SoapContext): void =>\n// \tuseNetworkStore.setState({\n// \t\tsession,\n// \t\tchange,\n// \t\trefresh,\n// \t\tseq: maxBy(notify, 'seq'),\n// \t\tnoOpTimeout: setTimeout(() => noOp(), pollingInterval),\n// \t\tnotify: map(notify, (notifyItem) => ({\n// \t\t\t...notifyItem,\n// \t\t\tdeleted: notifyItem.deleted?.id?.split(',')\n// \t\t}))\n// \t});\n// // handleTagSync(_context);\n// // useNetworkStore.setState({\n// // \tnoOpTimeout: setTimeout(() => noOp(), pollingInterval),\n// // \t,\n// // \t...res?.Header?.context\n// // });\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { find, map, maxBy } from 'lodash';\n\nimport { userAgent } from './user-agent';\nimport { goToLogin } from './utils';\nimport {\n\tAccount,\n\tErrorSoapBodyResponse,\n\tErrorSoapResponse,\n\tSoapContext,\n\tSoapResponse\n} from '../../types';\nimport { IS_STANDALONE, SHELL_APP_ID } from '../constants';\nimport { report } from '../reporting/functions';\nimport { useAccountStore } from '../store/account';\nimport { useNetworkStore } from '../store/network';\nimport { getPollingInterval, handleSync } from '../store/network/utils';\n\nexport const fetchNoOp = (): void => {\n\t// eslint-disable-next-line @typescript-eslint/no-use-before-define\n\tgetSoapFetch(SHELL_APP_ID)(\n\t\t'NoOp',\n\t\tuseNetworkStore.getState().pollingInterval === 500\n\t\t\t? { _jsns: 'urn:zimbraMail', limitToOneBlocked: 1, wait: 1 }\n\t\t\t: { _jsns: 'urn:zimbraMail' }\n\t);\n};\n\nconst getAccount = (\n\tacc?: Account,\n\totherAccount?: string\n): { by: string; _content: string } | undefined => {\n\tif (otherAccount) {\n\t\treturn {\n\t\t\tby: 'name',\n\t\t\t_content: otherAccount\n\t\t};\n\t}\n\tif (acc) {\n\t\tif (acc.name) {\n\t\t\treturn {\n\t\t\t\tby: 'name',\n\t\t\t\t_content: acc.name\n\t\t\t};\n\t\t}\n\t\tif (acc.id) {\n\t\t\treturn {\n\t\t\t\tby: 'id',\n\t\t\t\t_content: acc.id\n\t\t\t};\n\t\t}\n\t}\n\treturn undefined;\n};\n\nconst getXmlAccount = (acc?: Account, otherAccount?: string): string => {\n\tif (otherAccount) {\n\t\treturn `<account by=\"name\">${otherAccount}</account>`;\n\t}\n\tif (acc) {\n\t\tif (acc.name) {\n\t\t\treturn `<account by=\"name\">${acc.name}</account>`;\n\t\t}\n\t\tif (acc.id) {\n\t\t\treturn `<account by=\"id\">${acc.id}</account>`;\n\t\t}\n\t}\n\treturn '';\n};\n\nconst getXmlSession = (): string => {\n\tconst sessionId = useNetworkStore.getState().session?.id;\n\tif (sessionId) {\n\t\treturn `<session id=\"${sessionId}\"/>`;\n\t}\n\treturn '';\n};\n\nconst normalizeContext = (context: any): SoapContext => {\n\tif (context.notify) {\n\t\t// eslint-disable-next-line no-param-reassign\n\t\tcontext.notify = map(context.notify, (notify) => ({\n\t\t\t...notify,\n\t\t\tdeleted: notify.deleted?.id?.split(',')\n\t\t}));\n\t}\n\treturn context;\n};\n\nconst handleResponse = <R>(api: string, res: SoapResponse<R>): R | ErrorSoapBodyResponse => {\n\tconst { noOpTimeout } = useNetworkStore.getState();\n\tconst { usedQuota } = useAccountStore.getState();\n\tclearTimeout(noOpTimeout);\n\tif (res.Body.Fault) {\n\t\tif (\n\t\t\tfind(\n\t\t\t\t['service.AUTH_REQUIRED', 'service.AUTH_EXPIRED'],\n\t\t\t\t(code) => code === (<ErrorSoapResponse>res).Body.Fault.Detail?.Error?.Code\n\t\t\t)\n\t\t) {\n\t\t\tif (IS_STANDALONE) {\n\t\t\t\tuseAccountStore.setState({ authenticated: false });\n\t\t\t} else {\n\t\t\t\tgoToLogin();\n\t\t\t}\n\t\t}\n\t\tconsole.error(\n\t\t\tnew Error(\n\t\t\t\t`${(<ErrorSoapResponse>res).Body.Fault.Detail?.Error?.Detail}: ${\n\t\t\t\t\t(<ErrorSoapResponse>res).Body.Fault.Reason?.Text\n\t\t\t\t}`\n\t\t\t)\n\t\t);\n\t}\n\tif (res.Header?.context) {\n\t\tconst responseUsedQuota =\n\t\t\tres.Header.context?.refresh?.mbx?.[0]?.s ??\n\t\t\tres.Header.context?.notify?.[0]?.modified?.mbx?.[0]?.s;\n\t\tconst _context = normalizeContext(res.Header.context);\n\t\tconst seq = maxBy(_context.notify, 'seq')?.seq ?? 0;\n\t\thandleSync(_context);\n\t\tuseAccountStore.setState({\n\t\t\tusedQuota: responseUsedQuota ?? usedQuota\n\t\t});\n\n\t\tconst nextPollingInterval = getPollingInterval(res);\n\t\tuseNetworkStore.setState({\n\t\t\tnoOpTimeout: setTimeout(() => fetchNoOp(), nextPollingInterval),\n\t\t\tpollingInterval: nextPollingInterval,\n\t\t\tseq,\n\t\t\t..._context\n\t\t});\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t// @ts-ignore\n\treturn res?.Body?.Fault ? (res.Body as ErrorSoapBodyResponse) : (res.Body[`${api}Response`] as R);\n};\nexport const getSoapFetch =\n\t(app: string) =>\n\t<Request, Response>(\n\t\tapi: string,\n\t\tbody: Request,\n\t\totherAccount?: string,\n\t\tsignal?: AbortSignal\n\t): Promise<Response> => {\n\t\tconst { zimbraVersion, account } = useAccountStore.getState();\n\t\tconst { notify, session } = useNetworkStore.getState();\n\t\treturn fetch(`/service/soap/${api}Request`, {\n\t\t\tsignal,\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tBody: {\n\t\t\t\t\t[`${api}Request`]: body\n\t\t\t\t},\n\t\t\t\tHeader: {\n\t\t\t\t\tcontext: {\n\t\t\t\t\t\t_jsns: 'urn:zimbra',\n\t\t\t\t\t\tnotify: notify?.[0]?.seq\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\tseq: notify?.[0]?.seq\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\tsession: session ?? {},\n\t\t\t\t\t\taccount: getAccount(account as Account, otherAccount),\n\t\t\t\t\t\tuserAgent: {\n\t\t\t\t\t\t\tname: userAgent,\n\t\t\t\t\t\t\tversion: zimbraVersion\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}) // TODO proper error handling\n\t\t\t.then((res) => res?.json())\n\t\t\t.then((res: SoapResponse<Response>) => handleResponse(api, res))\n\t\t\t.catch((e) => {\n\t\t\t\treport(app)(e);\n\t\t\t\tthrow e;\n\t\t\t}) as Promise<Response>;\n\t};\n\nexport const getXmlSoapFetch =\n\t(app: string) =>\n\t<Request, Response>(api: string, body: Request, otherAccount?: string): Promise<Response> => {\n\t\tconst { zimbraVersion, account } = useAccountStore.getState();\n\t\treturn fetch(`/service/soap/${api}Request`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'content-type': 'application/soap+xml'\n\t\t\t},\n\t\t\tbody: `<?xml version=\"1.0\" encoding=\"utf-8\"?>\n\t\t<soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\">\n\t\t\t<soap:Header><context xmlns=\"urn:zimbra\"><userAgent name=\"${userAgent}\" version=\"${zimbraVersion}\"/>${getXmlSession()}${getXmlAccount(\n\t\t\t\taccount,\n\t\t\t\totherAccount\n\t\t\t)}<format type=\"js\"/></context></soap:Header>\n\t\t\t<soap:Body>${body}</soap:Body>\n\t\t</soap:Envelope>`\n\t\t}) // TODO proper error handling\n\t\t\t.then((res) => res?.json())\n\t\t\t.then((res: SoapResponse<Response>) => handleResponse(api, res))\n\t\t\t.catch((e) => {\n\t\t\t\treport(app)(e);\n\t\t\t\tthrow e;\n\t\t\t}) as Promise<Response>;\n\t};\n\nexport const shellSoap = getSoapFetch(SHELL_APP_ID);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useMemo, useState, useEffect, useRef } from 'react';\n\nimport { Container, useSnackbar } from '@zextras/carbonio-design-system';\nimport produce from 'immer';\nimport { map, find, isEmpty, reduce, findIndex, filter, size } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport AccountsList from './components/account-settings/accounts-list';\nimport Delegates, { DelegatesProps, DelegateType } from './components/account-settings/delegates';\nimport PersonaSettings from './components/account-settings/persona-settings';\nimport PrimaryAccountSettings from './components/account-settings/primary-account-settings';\nimport SettingsSentMessages from './components/account-settings/settings-sent-messages';\nimport SettingsHeader, { SettingsHeaderProps } from './components/settings-header';\nimport {\n\tcalculateNewIdentitiesState,\n\tdefaultAsFirstOrderIdentities,\n\tgetAvailableEmailAddresses,\n\tisPrimary,\n\tResetComponentImperativeHandler\n} from './components/utils';\nimport {\n\tBatchRequest,\n\tCreateIdentityResponse,\n\tDeleteIdentityResponse,\n\tModifyIdentityResponse,\n\tModifyPrefsResponse,\n\tCreateIdentityRequest,\n\tDeleteIdentityRequest,\n\tIdentityAttrs,\n\tAccountSettingsPrefs,\n\tModifyPrefsRequest,\n\tGetRightsRequest,\n\tGetRightsResponse,\n\tAccountState\n} from '../../types';\nimport type { ModifyIdentityRequest } from '../../types';\nimport { SHELL_APP_ID } from '../constants';\nimport { getSoapFetch } from '../network/fetch';\nimport { useAccountStore, useUserAccount, useUserSettings } from '../store/account';\n\nfunction mapToCreateIdentityRequests(\n\tcreateRecord: Record<string, IdentityAttrs>\n): Array<CreateIdentityRequest> {\n\treturn map(\n\t\tcreateRecord,\n\t\t(item): CreateIdentityRequest => ({\n\t\t\t_jsns: 'urn:zimbraAccount',\n\t\t\tidentity: {\n\t\t\t\tname: item.zimbraPrefIdentityName,\n\t\t\t\t_attrs: {\n\t\t\t\t\t...item,\n\t\t\t\t\tzimbraPrefFromAddressType: item.zimbraPrefFromAddressType || 'sendAs'\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t);\n}\n\nfunction mapToDeleteIdentityRequests(deleteArray: Array<string>): Array<DeleteIdentityRequest> {\n\treturn map(\n\t\tdeleteArray,\n\t\t(identityId, index): DeleteIdentityRequest => ({\n\t\t\t_jsns: 'urn:zimbraAccount',\n\t\t\tidentity: { id: identityId },\n\t\t\trequestId: index.toString()\n\t\t})\n\t);\n}\n\nfunction mapToModifyIdentityRequests(\n\tmodifyRecord: Record<string, Partial<IdentityAttrs>>\n): Array<ModifyIdentityRequest> {\n\treturn map(\n\t\tmodifyRecord.current,\n\t\t(item, index): ModifyIdentityRequest => ({\n\t\t\t_jsns: 'urn:zimbraAccount',\n\t\t\tidentity: {\n\t\t\t\tid: index,\n\t\t\t\t_attrs: item\n\t\t\t}\n\t\t})\n\t);\n}\n\nexport const AccountsSettings = (): JSX.Element => {\n\tconst [t] = useTranslation();\n\tconst createSnackbar = useSnackbar();\n\n\tconst account = useUserAccount();\n\tconst settings = useUserSettings();\n\n\tconst createRecordRef = useRef<Record<string, IdentityAttrs>>({});\n\tconst deleteArrayRef = useRef<Array<string>>([]);\n\tconst modifyRecordRef = useRef<Record<string, Partial<IdentityAttrs>>>({});\n\n\tconst delegatedSendSaveTargetRef = useRef<\n\t\tAccountSettingsPrefs['zimbraPrefDelegatedSendSaveTarget']\n\t>(settings.prefs.zimbraPrefDelegatedSendSaveTarget);\n\n\tconst [isDirty, setIsDirty] = useState(false);\n\tconst calculateIsDirty = useCallback(() => {\n\t\tsetIsDirty(\n\t\t\t!isEmpty(createRecordRef.current) ||\n\t\t\t\t!isEmpty(deleteArrayRef.current) ||\n\t\t\t\t!isEmpty(modifyRecordRef.current) ||\n\t\t\t\tsettings.prefs.zimbraPrefDelegatedSendSaveTarget !== delegatedSendSaveTargetRef.current\n\t\t);\n\t}, [settings.prefs.zimbraPrefDelegatedSendSaveTarget]);\n\n\tconst updateDelegatedSendSaveTarget = useCallback<\n\t\tDelegatesProps['updateDelegatedSendSaveTarget']\n\t>(\n\t\t(updatedValue) => {\n\t\t\tdelegatedSendSaveTargetRef.current = updatedValue;\n\t\t\tcalculateIsDirty();\n\t\t},\n\t\t[calculateIsDirty]\n\t);\n\n\tconst resetLists = useCallback(() => {\n\t\tcreateRecordRef.current = {};\n\t\tdeleteArrayRef.current = [];\n\t\tmodifyRecordRef.current = {};\n\t\tcalculateIsDirty();\n\t}, [calculateIsDirty]);\n\n\tconst [selectedIdentityId, setSelectedIdentityId] = useState(0);\n\n\tconst identitiesDefault = useMemo(\n\t\t() => defaultAsFirstOrderIdentities(account.identities.identity),\n\t\t[account.identities.identity]\n\t);\n\n\tconst [identities, setIdentities] = useState<typeof identitiesDefault>(identitiesDefault);\n\tconst maxIdentities = settings.attrs.zimbraIdentityMaxNumEntries || 0;\n\n\tconst addIdentity = useCallback<(id: string, identityAttrs: IdentityAttrs) => void>(\n\t\t(id, identityAttrs) => {\n\t\t\tcreateRecordRef.current[id] = identityAttrs;\n\t\t\tcalculateIsDirty();\n\t\t\tsetIdentities((prevState) => [\n\t\t\t\t...prevState,\n\t\t\t\t{\n\t\t\t\t\tid,\n\t\t\t\t\tname: identityAttrs.zimbraPrefIdentityName,\n\t\t\t\t\t_attrs: { ...identityAttrs, zimbraPrefIdentityId: id }\n\t\t\t\t}\n\t\t\t]);\n\t\t},\n\t\t[calculateIsDirty]\n\t);\n\n\tconst updateIdentities = useCallback<\n\t\t<K extends keyof IdentityAttrs>(id: string, key: K, value: IdentityAttrs[K]) => void\n\t>(\n\t\t(id, key, value) => {\n\t\t\tif (createRecordRef.current[id]) {\n\t\t\t\tcreateRecordRef.current[id][key] = value;\n\t\t\t} else if (modifyRecordRef.current[id]) {\n\t\t\t\tconst actualIdentity = find(identitiesDefault, (item) => item.id === id);\n\t\t\t\tmodifyRecordRef.current[id][key] = value;\n\t\t\t\tif (actualIdentity && actualIdentity._attrs[key] === value) {\n\t\t\t\t\tdelete modifyRecordRef.current[id][key];\n\t\t\t\t}\n\t\t\t\tif (size(modifyRecordRef.current[id]) === 0) {\n\t\t\t\t\tdelete modifyRecordRef.current[id];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmodifyRecordRef.current[id] = {\n\t\t\t\t\t[key]: value\n\t\t\t\t};\n\t\t\t}\n\t\t\tcalculateIsDirty();\n\t\t\tsetIdentities((prevState) =>\n\t\t\t\tmap(prevState, (item) =>\n\t\t\t\t\titem.id === id\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t_attrs: {\n\t\t\t\t\t\t\t\t\t...item._attrs,\n\t\t\t\t\t\t\t\t\t[key]: value\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: item\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\t\t[calculateIsDirty, identitiesDefault]\n\t);\n\n\tconst removeIdentity = useCallback(\n\t\t(identityId: string) => {\n\t\t\tif (createRecordRef.current[identityId]) {\n\t\t\t\tdelete createRecordRef.current[identityId];\n\t\t\t} else {\n\t\t\t\tdeleteArrayRef.current = [...deleteArrayRef.current, identityId];\n\t\t\t\tdelete modifyRecordRef.current[identityId];\n\t\t\t}\n\t\t\tcalculateIsDirty();\n\t\t\tsetIdentities((prevState) => filter(prevState, (identity) => identity.id !== identityId));\n\t\t},\n\t\t[calculateIsDirty]\n\t);\n\n\tuseEffect(() => {\n\t\tsetIdentities(identitiesDefault);\n\t\tresetLists();\n\t}, [identitiesDefault, resetLists]);\n\n\tconst onSave = useCallback<SettingsHeaderProps['onSave']>(() => {\n\t\tif (\n\t\t\tidentitiesDefault.length + size(createRecordRef.current) - deleteArrayRef.current.length >\n\t\t\tmaxIdentities\n\t\t) {\n\t\t\tcreateSnackbar({\n\t\t\t\tkey: `new`,\n\t\t\t\treplace: true,\n\t\t\t\ttype: 'error',\n\t\t\t\tlabel: t(\n\t\t\t\t\t'message.snackbar.identities_quota_exceeded',\n\t\t\t\t\t'The identity could not be created because you have exceeded your identity quota'\n\t\t\t\t),\n\t\t\t\tautoHideTimeout: 5000,\n\t\t\t\thideButton: true\n\t\t\t});\n\t\t\treturn Promise.allSettled([\n\t\t\t\tPromise.reject(\n\t\t\t\t\tnew Error(\n\t\t\t\t\t\t'The identity could not be created because you have exceeded your identity quota'\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t]);\n\t\t}\n\n\t\tlet modifyPrefsRequest: ModifyPrefsRequest | undefined;\n\n\t\tif (\n\t\t\tdelegatedSendSaveTargetRef.current &&\n\t\t\tsettings.prefs.zimbraPrefDelegatedSendSaveTarget !== delegatedSendSaveTargetRef.current\n\t\t) {\n\t\t\tmodifyPrefsRequest = {\n\t\t\t\t_jsns: 'urn:zimbraAccount',\n\t\t\t\t_attrs: { zimbraPrefDelegatedSendSaveTarget: delegatedSendSaveTargetRef.current }\n\t\t\t};\n\t\t}\n\n\t\tconst createIdentityRequests: Array<CreateIdentityRequest> = mapToCreateIdentityRequests(\n\t\t\tcreateRecordRef.current\n\t\t);\n\t\tconst deleteRequests: Array<DeleteIdentityRequest> = mapToDeleteIdentityRequests(\n\t\t\tdeleteArrayRef.current\n\t\t);\n\n\t\tconst modifyIdentityRequests: Array<ModifyIdentityRequest> = mapToModifyIdentityRequests(\n\t\t\tmodifyRecordRef.current\n\t\t);\n\n\t\tconst promise = getSoapFetch(SHELL_APP_ID)<\n\t\t\tBatchRequest,\n\t\t\t{\n\t\t\t\tModifyIdentityResponse?: ModifyIdentityResponse[];\n\t\t\t\tDeleteIdentityResponse?: DeleteIdentityResponse[];\n\t\t\t\tCreateIdentityResponse?: CreateIdentityResponse[];\n\t\t\t\tModifyPrefsResponse?: ModifyPrefsResponse;\n\t\t\t}\n\t\t>('Batch', {\n\t\t\t_jsns: 'urn:zimbra',\n\t\t\tDeleteIdentityRequest: deleteRequests.length > 0 ? deleteRequests : undefined,\n\t\t\tCreateIdentityRequest: createIdentityRequests.length > 0 ? createIdentityRequests : undefined,\n\t\t\tModifyIdentityRequest: modifyIdentityRequests.length > 0 ? modifyIdentityRequests : undefined,\n\t\t\tModifyPrefsRequest: modifyPrefsRequest\n\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `new`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'info',\n\t\t\t\t\tlabel: t('message.snackbar.settings_saved', 'Edits saved correctly'),\n\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\thideButton: true\n\t\t\t\t});\n\t\t\t\tresetLists();\n\t\t\t\tuseAccountStore.setState(\n\t\t\t\t\tproduce((prevState: AccountState) => {\n\t\t\t\t\t\tif (prevState.account) {\n\t\t\t\t\t\t\tprevState.account.identities.identity = calculateNewIdentitiesState(\n\t\t\t\t\t\t\t\tprevState.account.identities.identity,\n\t\t\t\t\t\t\t\tdeleteArrayRef.current,\n\t\t\t\t\t\t\t\tmap(res.CreateIdentityResponse, (item) => item.identity[0]),\n\t\t\t\t\t\t\t\tmodifyRecordRef.current\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tprevState.account.displayName =\n\t\t\t\t\t\t\t\tfind(\n\t\t\t\t\t\t\t\t\tmodifyRecordRef.current,\n\t\t\t\t\t\t\t\t\t(item) => item.zimbraPrefIdentityId === prevState?.account?.id\n\t\t\t\t\t\t\t\t)?.zimbraPrefIdentityName || prevState.account?.displayName;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprevState.settings.prefs.zimbraPrefDelegatedSendSaveTarget =\n\t\t\t\t\t\t\tdelegatedSendSaveTargetRef.current || '';\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t})\n\t\t\t.catch((error: unknown) => {\n\t\t\t\tcreateSnackbar({\n\t\t\t\t\tkey: `new`,\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tlabel: t('snackbar.error', 'Something went wrong, please try again'),\n\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\thideButton: true\n\t\t\t\t});\n\t\t\t\tif (error instanceof Error) {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t\tthrow new Error(typeof error === 'string' ? error : 'edit setting error');\n\t\t\t});\n\t\treturn Promise.allSettled([promise]);\n\t}, [\n\t\tmaxIdentities,\n\t\tidentitiesDefault.length,\n\t\tsettings.prefs.zimbraPrefDelegatedSendSaveTarget,\n\t\tcreateSnackbar,\n\t\tt,\n\t\tresetLists\n\t]);\n\n\tconst availableEmailAddresses = useMemo(\n\t\t() => getAvailableEmailAddresses(account, settings),\n\t\t[account, settings]\n\t);\n\n\tconst delegatesSettingsSectionRef = useRef<ResetComponentImperativeHandler>(null);\n\n\tconst onCancel = useCallback(() => {\n\t\tresetLists();\n\t\tsetIdentities(identitiesDefault);\n\t\tdelegatesSettingsSectionRef.current?.reset();\n\t\tsetSelectedIdentityId(size(identitiesDefault) - 1);\n\t}, [identitiesDefault, resetLists]);\n\n\tconst [delegates, setDelegates] = useState<DelegateType[]>([]);\n\n\tuseEffect(() => {\n\t\tgetSoapFetch(SHELL_APP_ID)<GetRightsRequest, GetRightsResponse>('GetRights', {\n\t\t\t_jsns: 'urn:zimbraAccount',\n\t\t\tace: [{ right: 'sendAs' }, { right: 'sendOnBehalfOf' }]\n\t\t}).then((value) => {\n\t\t\tif (value.ace) {\n\t\t\t\tconst { ace } = value;\n\t\t\t\tconst result = reduce(\n\t\t\t\t\tace,\n\t\t\t\t\t(accumulator: Array<DelegateType>, item, idx) => {\n\t\t\t\t\t\tconst index = findIndex(accumulator, { email: item.d });\n\t\t\t\t\t\tif (index === -1) {\n\t\t\t\t\t\t\taccumulator.push({ email: item.d || '', right: item.right, id: idx.toString() });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taccumulator.push({\n\t\t\t\t\t\t\t\temail: item.d || '',\n\t\t\t\t\t\t\t\tright: `${item.right} and ${accumulator[index].right}`,\n\t\t\t\t\t\t\t\tid: idx.toString()\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\taccumulator.splice(index, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn accumulator;\n\t\t\t\t\t},\n\t\t\t\t\t[]\n\t\t\t\t);\n\t\t\t\tsetDelegates(result);\n\t\t\t}\n\t\t});\n\t}, []);\n\n\tconst personaSettings = useMemo<JSX.Element | null>(() => {\n\t\tconst identity = identities[selectedIdentityId];\n\t\tif (identity) {\n\t\t\treturn (\n\t\t\t\t<PersonaSettings identityAttrs={identity._attrs} updateIdentities={updateIdentities} />\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t}, [identities, selectedIdentityId, updateIdentities]);\n\n\tconst settingsSentMessages = useMemo<JSX.Element | null>(() => {\n\t\tconst identity = identities[selectedIdentityId];\n\t\tif (identity) {\n\t\t\treturn (\n\t\t\t\t<SettingsSentMessages\n\t\t\t\t\tidentityAttrs={identity._attrs}\n\t\t\t\t\tupdateIdentities={updateIdentities}\n\t\t\t\t\tavailableEmailAddresses={availableEmailAddresses}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t}, [availableEmailAddresses, identities, selectedIdentityId, updateIdentities]);\n\n\treturn (\n\t\t<>\n\t\t\t<SettingsHeader\n\t\t\t\tonSave={onSave}\n\t\t\t\tonCancel={onCancel}\n\t\t\t\tisDirty={isDirty}\n\t\t\t\ttitle={t('label.accounts', 'Accounts')}\n\t\t\t/>\n\t\t\t<Container background={'gray5'} padding={{ top: 'large' }} height=\"fit\" />\n\t\t\t<Container\n\t\t\t\tbackground={'gray5'}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tpadding={{ all: 'large' }}\n\t\t\t\tstyle={{ overflow: 'auto' }}\n\t\t\t>\n\t\t\t\t<AccountsList\n\t\t\t\t\taccountName={account.name}\n\t\t\t\t\tidentities={identities}\n\t\t\t\t\tselectedIdentityId={selectedIdentityId}\n\t\t\t\t\tsetSelectedIdentityId={setSelectedIdentityId}\n\t\t\t\t\tremoveIdentity={removeIdentity}\n\t\t\t\t\taddIdentity={addIdentity}\n\t\t\t\t\tidentitiesDefault={identitiesDefault}\n\t\t\t\t/>\n\t\t\t\t{isPrimary(identities[selectedIdentityId]) ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<PrimaryAccountSettings\n\t\t\t\t\t\t\taccount={account}\n\t\t\t\t\t\t\tidentity={identities[0]}\n\t\t\t\t\t\t\tupdateIdentities={updateIdentities}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{settingsSentMessages}\n\t\t\t\t\t\t<Delegates\n\t\t\t\t\t\t\tupdateDelegatedSendSaveTarget={updateDelegatedSendSaveTarget}\n\t\t\t\t\t\t\tdelegatedSendSaveTarget={settings.prefs.zimbraPrefDelegatedSendSaveTarget}\n\t\t\t\t\t\t\tresetRef={delegatesSettingsSectionRef}\n\t\t\t\t\t\t\tdelegates={delegates}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{personaSettings}\n\t\t\t\t\t\t{settingsSentMessages}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</Container>\n\t\t</>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport type { TFunction } from 'i18next';\n\nimport type { SettingsSubSection } from '../../types';\n\nexport const appearanceSubSection = (t: TFunction): SettingsSubSection => ({\n\tlabel: t('settings.general.appearance', 'Appearance'),\n\tid: 'appearance'\n});\nexport const timezoneAndLanguageSubSection = (t: TFunction): SettingsSubSection => ({\n\tlabel: t('settings.timezone_and_language', 'Time Zone and Language'),\n\tid: 'timezone_and_language'\n});\nexport const outOfOfficeSubSection = (t: TFunction): SettingsSubSection => ({\n\tlabel: t('settings.out_of_office.headings.settings_label', 'Out of Office Settings'),\n\tid: 'out_of_office'\n});\nexport const searchPrefsSubSection = (t: TFunction): SettingsSubSection => ({\n\tlabel: t('search.app', 'Search'),\n\tid: 'search_prefs'\n});\nexport const versionsSubSection = (t: TFunction): SettingsSubSection => ({\n\tlabel: t('module.app.version', 'Application versions'),\n\tid: 'app_version'\n});\nexport const quotaSubSection = (t: TFunction): SettingsSubSection => ({\n\tlabel: t('user_quota.title', \"User's quota\"),\n\tid: 'user_quota'\n});\nexport const accountSubSection = (t: TFunction): SettingsSubSection => ({\n\tlabel: t('settings.general.account', 'Account'),\n\tid: 'account'\n});\n\nexport const settingsSubSections = (t: TFunction): Array<SettingsSubSection> => [\n\tappearanceSubSection(t),\n\ttimezoneAndLanguageSubSection(t),\n\toutOfOfficeSubSection(t),\n\tsearchPrefsSubSection(t),\n\tversionsSubSection(t),\n\tquotaSubSection(t),\n\taccountSubSection(t)\n];\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useMemo } from 'react';\n\nimport { Container, Text } from '@zextras/carbonio-design-system';\n\nimport { getT } from '../../../store/i18n';\nimport { appearanceSubSection } from '../../general-settings-sub-sections';\n\ninterface AppearanceSettingsProps {\n\tchildren: React.ReactElement | React.ReactElement[];\n}\n\nconst AppearanceSettings = ({ children }: AppearanceSettingsProps): JSX.Element => {\n\tconst t = getT();\n\tconst subSection = useMemo(() => appearanceSubSection(t), [t]);\n\treturn (\n\t\t<Container\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\tgap=\"1rem\"\n\t\t\tpadding={'large'}\n\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\twidth=\"50%\"\n\t\t\theight={'fit'}\n\t\t\tid={subSection.id}\n\t\t\tbackground={'gray6'}\n\t\t>\n\t\t\t<Text weight={'bold'} size={'medium'}>\n\t\t\t\t{subSection.label}\n\t\t\t</Text>\n\t\t\t{children}\n\t\t</Container>\n\t);\n};\n\nexport default AppearanceSettings;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { create } from 'zustand';\n\nimport type { LoginConfigStore } from '../../../types/loginConfig';\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useLoginConfigStore = create<LoginConfigStore>()(() => ({\n\tloaded: false,\n\t// setup defaults for fields which does not depend on dark mode\n\tcarbonioWebUiTitle: 'Carbonio Client',\n\t// default to png because this icon is used also in notification, and svg are not supported there\n\tcarbonioWebUiFavicon: `${BASE_PATH}favicon.png`\n}));\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { useMemo } from 'react';\n\nimport { find, size } from 'lodash';\n\nimport type { DarkReaderPropValues, ZappDarkreaderModeZimletProp, ZimletProp } from '../../types';\nimport { DARK_READER_PROP_KEY, DARK_READER_VALUES, SHELL_APP_ID } from '../constants';\nimport { useUserSettings } from '../store/account';\nimport { useLoginConfigStore } from '../store/login/store';\n\nexport function isZappDarkreaderModeZimletProp(\n\tprop: ZimletProp\n): prop is ZappDarkreaderModeZimletProp {\n\treturn prop.name === DARK_READER_PROP_KEY && prop.zimlet === SHELL_APP_ID;\n}\n\nexport function isDarkReaderPropValues(\n\tmaybeDarkReaderPropValue: unknown\n): maybeDarkReaderPropValue is DarkReaderPropValues {\n\treturn (\n\t\ttypeof maybeDarkReaderPropValue === 'string' &&\n\t\tDARK_READER_VALUES.includes(maybeDarkReaderPropValue as DarkReaderPropValues)\n\t);\n}\n\n// return the final calculated value between ZappDarkreaderModeZimletProp value and carbonioWebUiDarkMode config\nexport function useDarkReaderResultValue(): undefined | DarkReaderPropValues {\n\tconst settings = useUserSettings();\n\tconst { carbonioWebUiDarkMode } = useLoginConfigStore();\n\n\tconst settingReceived = useMemo(\n\t\t() => size(settings.prefs) > 0 || size(settings.attrs) > 0 || size(settings.props) > 0,\n\t\t[settings]\n\t);\n\n\treturn useMemo(() => {\n\t\tif (settingReceived) {\n\t\t\tconst result = find<ZimletProp, ZappDarkreaderModeZimletProp>(\n\t\t\t\tsettings.props,\n\t\t\t\t(value): value is ZappDarkreaderModeZimletProp => isZappDarkreaderModeZimletProp(value)\n\t\t\t)?._content;\n\n\t\t\treturn result || (carbonioWebUiDarkMode && 'enabled') || 'disabled';\n\t\t}\n\t\treturn undefined;\n\t}, [settingReceived, settings, carbonioWebUiDarkMode]);\n}\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nexport const getPrefersColorSchemeDarkMedia = (): MediaQueryList =>\n\twindow.matchMedia('(prefers-color-scheme: dark)');\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useEffect, useState } from 'react';\n\nimport { useDarkReaderResultValue } from './use-dark-reader-result-value';\nimport { getPrefersColorSchemeDarkMedia } from './utils';\nimport type { DarkReaderPropValues } from '../../types';\n\nexport const useDarkMode = (): {\n\tdarkModeEnabled: boolean;\n\tdarkReaderStatus: DarkReaderPropValues | undefined;\n} => {\n\tconst darkReaderResultValue = useDarkReaderResultValue();\n\n\tconst [darkModeEnabled, setDarkModeEnabled] = useState<boolean>(false);\n\n\tuseEffect(() => {\n\t\tif (darkReaderResultValue) {\n\t\t\tsetDarkModeEnabled(\n\t\t\t\t(darkReaderResultValue === 'auto' && getPrefersColorSchemeDarkMedia().matches) ||\n\t\t\t\t\tdarkReaderResultValue === 'enabled'\n\t\t\t);\n\t\t}\n\t}, [darkReaderResultValue]);\n\n\tuseEffect(() => {\n\t\tconst setCallback = (event: MediaQueryListEvent): void => {\n\t\t\tsetDarkModeEnabled(event.matches);\n\t\t};\n\t\tgetPrefersColorSchemeDarkMedia().addEventListener('change', setCallback);\n\t\treturn (): void => {\n\t\t\tgetPrefersColorSchemeDarkMedia().removeEventListener('change', setCallback);\n\t\t};\n\t}, []);\n\n\treturn { darkModeEnabled, darkReaderStatus: darkReaderResultValue };\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { CSSProperties } from 'react';\n\nimport { reduce } from 'lodash';\n\nexport type ElementPosition = {\n\ttop: number;\n\tleft: number;\n};\n\nexport type ElementSize = {\n\twidth: number;\n\theight: number;\n};\n\nexport type SizeAndPosition = ElementPosition & ElementSize;\n\nexport const testFolderIsChecked = ({ string }: { string: string | undefined }): boolean =>\n\t/#/.test(string || '');\n\nexport function setGlobalCursor(cursor: CSSProperties['cursor']): void {\n\t// remove previously set cursor\n\tconst cursors: string[] = [];\n\tdocument.body.classList.forEach((item) => {\n\t\tif (item.startsWith('global-cursor-')) {\n\t\t\tcursors.push(item);\n\t\t}\n\t});\n\tdocument.body.classList.remove(...cursors);\n\tif (cursor) {\n\t\tdocument.body.classList.add(`global-cursor-${cursor}`);\n\t}\n}\n\nexport function setElementSizeAndPosition(\n\telement: HTMLElement,\n\tkey: keyof SizeAndPosition,\n\tvalue: number | undefined\n): void {\n\t// eslint-disable-next-line no-param-reassign\n\telement.style[key] = value !== undefined ? `${value}px` : '';\n}\n\nexport function stopPropagation(event: Event | React.SyntheticEvent): void {\n\tevent.stopPropagation();\n}\n\nexport function createExportForTestOnly<TObj extends Record<string, unknown>>(\n\tobjToExport: TObj\n): { [K in keyof TObj]: TObj[K] | undefined } {\n\treturn process.env.NODE_ENV === 'test'\n\t\t? objToExport\n\t\t: reduce(\n\t\t\t\tobjToExport,\n\t\t\t\t(accumulator, value, key) => {\n\t\t\t\t\taccumulator[key as keyof TObj] = undefined;\n\t\t\t\t\treturn accumulator;\n\t\t\t\t},\n\t\t\t\t{} as Record<keyof TObj, undefined>\n\t\t  );\n}\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useCallback, useEffect, useMemo, useRef } from 'react';\n\nimport { create } from 'zustand';\n\nimport { createExportForTestOnly } from '../../utils/utils';\n\nfunction isSameLocalStorageValue(valueA: unknown, valueB: unknown): boolean {\n\treturn JSON.stringify(valueA) === JSON.stringify(valueB);\n}\n\ntype LocalStorageOptions = { keepSynchedWithStorage?: boolean };\n\ntype LocalStorageState = {\n\tstorage: Record<string, any>;\n\treadValue: <T>(key: string, fallback: T) => void;\n\tsetValue: <T>(key: string, value: React.SetStateAction<T>) => void;\n};\n\nconst useLocalStorageStore = create<LocalStorageState>()((setState) => ({\n\tstorage: {},\n\treadValue<T>(key: string, fallback: T): void {\n\t\ttry {\n\t\t\tconst localStorageItem = window.localStorage.getItem(key);\n\t\t\tconst item = localStorageItem !== null ? JSON.parse(localStorageItem) : fallback;\n\t\t\tsetState((state) => {\n\t\t\t\tif (state.storage[key] === undefined) {\n\t\t\t\t\treturn { storage: { ...state.storage, [key]: item } };\n\t\t\t\t}\n\t\t\t\treturn state;\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\tsetState((state) => ({ storage: { ...state.storage, [key]: fallback } }));\n\t\t}\n\t},\n\tsetValue<T>(key: string, value: React.SetStateAction<T>): void {\n\t\tsetState((state) => {\n\t\t\tconst valueToStore = value instanceof Function ? value(state.storage[key]) : value;\n\t\t\tif (!isSameLocalStorageValue(valueToStore, state.storage[key])) {\n\t\t\t\twindow.localStorage.setItem(key, JSON.stringify(valueToStore));\n\t\t\t\treturn { storage: { ...state.storage, [key]: valueToStore } };\n\t\t\t}\n\t\t\treturn state;\n\t\t});\n\t}\n}));\n\nconst DEFAULT_OPTIONS: LocalStorageOptions = {\n\tkeepSynchedWithStorage: true\n};\n\nexport function useLocalStorage<T>(\n\tkey: string,\n\tinitialValue: T,\n\toptions = DEFAULT_OPTIONS\n): [T, React.Dispatch<React.SetStateAction<T>>] {\n\tconst storedValue = useLocalStorageStore((state) => state.storage[key] || initialValue);\n\tconst shouldDispatchStorageEventRef = useRef(false);\n\tconst localStorageOptions = useMemo(() => ({ ...DEFAULT_OPTIONS, ...options }), [options]);\n\n\tconst readValueForKey = useCallback(() => {\n\t\tuseLocalStorageStore.getState().readValue(key, initialValue);\n\t}, [key, initialValue]);\n\n\tuseEffect(() => {\n\t\treadValueForKey();\n\t}, [readValueForKey]);\n\n\tconst setValueForKey = useCallback<React.Dispatch<React.SetStateAction<T>>>(\n\t\t(value) => {\n\t\t\tuseLocalStorageStore.getState().setValue(key, value);\n\t\t\tshouldDispatchStorageEventRef.current = true;\n\t\t},\n\t\t[key]\n\t);\n\n\tuseEffect(() => {\n\t\tif (localStorageOptions?.keepSynchedWithStorage) {\n\t\t\twindow.addEventListener('storage', readValueForKey);\n\t\t}\n\n\t\treturn (): void => {\n\t\t\twindow.removeEventListener('storage', readValueForKey);\n\t\t};\n\t}, [localStorageOptions?.keepSynchedWithStorage, readValueForKey]);\n\n\tuseEffect(() => {\n\t\tif (shouldDispatchStorageEventRef.current) {\n\t\t\t// dispatch event when stored value change,\n\t\t\t// but only after render to avoid possible update of parent component during render\n\t\t\twindow.dispatchEvent(new Event('storage'));\n\t\t\tshouldDispatchStorageEventRef.current = false;\n\t\t}\n\t}, [storedValue]);\n\n\treturn [storedValue, setValueForKey];\n}\n\nexport const exportForTest = createExportForTestOnly({ useLocalStorageStore });\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, {\n\tcreateContext,\n\tuseCallback,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseMemo,\n\tuseState\n} from 'react';\n\nimport {\n\tgenerateColorSet,\n\tThemeProvider as UIThemeProvider,\n\tThemeProviderProps as UIThemeProviderProps\n} from '@zextras/carbonio-design-system';\nimport { auto, disable, enable, setFetchMethod } from 'darkreader';\nimport { map, reduce } from 'lodash';\nimport { createGlobalStyle, css, DefaultTheme, SimpleInterpolation } from 'styled-components';\n\nimport { useGetPrimaryColor } from './use-get-primary-color';\nimport { DarkReaderPropValues, ThemeExtension } from '../../types';\nimport { ScalingSettings } from '../../types/settings';\nimport { darkReaderDynamicThemeFixes, LOCAL_STORAGE_SETTINGS_KEY } from '../constants';\nimport { getAutoScalingFontSize } from '../settings/components/utils';\nimport { useLocalStorage } from '../shell/hooks/useLocalStorage';\n\nsetFetchMethod(window.fetch);\n\ninterface ThemeCallbacks {\n\taddExtension: (newExtension: ThemeExtension, id: string) => void;\n\tsetDarkReaderState: (newState: DarkReaderPropValues) => void;\n}\n\nexport const ThemeCallbacksContext = createContext<ThemeCallbacks>({\n\taddExtension: () => {\n\t\tthrow Error('Not implemented');\n\t},\n\tsetDarkReaderState: () => {\n\t\tthrow Error('not implemented');\n\t}\n});\n\ntype CustomTheme = Partial<Omit<DefaultTheme, 'palette'>> & {\n\tpalette?: Partial<DefaultTheme['palette']>;\n};\n\nconst paletteExtension =\n\t(customTheme: CustomTheme = {}) =>\n\t(theme: DefaultTheme): DefaultTheme => ({\n\t\t...theme,\n\t\t...customTheme,\n\t\tpalette: {\n\t\t\t...theme.palette,\n\t\t\t...customTheme.palette,\n\t\t\tshared: {\n\t\t\t\tregular: '#FFB74D',\n\t\t\t\thover: '#FFA21A',\n\t\t\t\tactive: '#FFA21A',\n\t\t\t\tfocus: '#FF9800',\n\t\t\t\tdisabled: '#FFD699'\n\t\t\t},\n\t\t\tlinked: {\n\t\t\t\tregular: '#AB47BC',\n\t\t\t\thover: '#8B3899',\n\t\t\t\tactive: '#8B3899',\n\t\t\t\tfocus: '#7A3187',\n\t\t\t\tdisabled: '#DDB4E4'\n\t\t\t}\n\t\t}\n\t});\n\nconst iconExtension: ThemeExtension = (theme) => ({\n\t...theme,\n\ticons: {\n\t\t...theme.icons,\n\t\tShared: theme.icons.ArrowCircleRight,\n\t\tLinked: theme.icons.ArrowCircleLeft\n\t}\n});\n\nconst globalCursorsExtension: ThemeExtension = (theme) => ({\n\t...theme,\n\tglobalCursors: [\n\t\t...(theme.globalCursors || []),\n\t\t'ns-resize',\n\t\t'ew-resize',\n\t\t'nesw-resize',\n\t\t'nwse-resize',\n\t\t'move'\n\t]\n});\n\ninterface GlobalStyledProps {\n\tbaseFontSize: number;\n}\n\nconst GlobalStyle = createGlobalStyle<GlobalStyledProps>`\n  html {\n    font-size: ${({ baseFontSize }): string => `${baseFontSize}%`};\n  }\n  ${({ theme }): SimpleInterpolation =>\n\t\tmap(\n\t\t\ttheme.globalCursors,\n\t\t\t(cursor) => css`\n\t\t\t\t.global-cursor-${cursor} * {\n\t\t\t\t\tcursor: ${cursor} !important;\n\t\t\t\t}\n\t\t\t`\n\t\t)}\n  .no-active-background:active {\n\t  background-color: inherit;\n  }\n`;\n\ninterface ThemeProviderProps {\n\tchildren?: React.ReactNode | React.ReactNode[];\n}\nexport const ThemeProvider = ({ children }: ThemeProviderProps): JSX.Element => {\n\tconst [localStorageSettings] = useLocalStorage<ScalingSettings>(LOCAL_STORAGE_SETTINGS_KEY, {});\n\n\tconst [extensions, setExtensions] = useState<Partial<Record<keyof DefaultTheme, ThemeExtension>>>(\n\t\t{}\n\t);\n\n\tconst primaryColor = useGetPrimaryColor();\n\n\tuseLayoutEffect(() => {\n\t\tconst customThemePalette: Partial<DefaultTheme['palette']> = primaryColor\n\t\t\t? { primary: generateColorSet({ regular: primaryColor }) }\n\t\t\t: {};\n\t\tsetExtensions((extension) => ({\n\t\t\t...extension,\n\t\t\tpalette: paletteExtension({\n\t\t\t\tpalette: customThemePalette\n\t\t\t}),\n\t\t\ticons: iconExtension,\n\t\t\tglobalCursors: globalCursorsExtension\n\t\t}));\n\t}, [primaryColor]);\n\n\tconst [darkReaderState, setDarkReaderState] = useState<DarkReaderPropValues>('disabled');\n\n\tuseEffect(() => {\n\t\tswitch (darkReaderState) {\n\t\t\tcase 'disabled':\n\t\t\t\tauto(false);\n\t\t\t\tdisable();\n\t\t\t\tbreak;\n\t\t\tcase 'enabled':\n\t\t\t\tauto(false);\n\t\t\t\tenable({}, darkReaderDynamicThemeFixes);\n\t\t\t\tbreak;\n\t\t\tcase 'auto':\n\t\t\tdefault:\n\t\t\t\tauto({}, darkReaderDynamicThemeFixes);\n\t\t\t\tbreak;\n\t\t}\n\t}, [darkReaderState]);\n\n\tconst aggregatedExtensions = useCallback<NonNullable<UIThemeProviderProps['extension']>>(\n\t\t(theme) =>\n\t\t\treduce(\n\t\t\t\textensions,\n\t\t\t\t(themeAccumulator, themeExtensionFn) => {\n\t\t\t\t\tif (themeExtensionFn) {\n\t\t\t\t\t\treturn themeExtensionFn(themeAccumulator);\n\t\t\t\t\t}\n\t\t\t\t\treturn themeAccumulator;\n\t\t\t\t},\n\t\t\t\ttheme\n\t\t\t),\n\t\t[extensions]\n\t);\n\n\tconst addExtension = useCallback<ThemeCallbacks['addExtension']>((newExtension, id) => {\n\t\tsetExtensions((ext) => ({ ...ext, [id]: newExtension }));\n\t}, []);\n\n\tconst baseFontSize = useMemo<GlobalStyledProps['baseFontSize']>(() => {\n\t\tconst savedScalingValueSetting = localStorageSettings['settings.appearance_setting.scaling'];\n\t\tif (savedScalingValueSetting !== undefined) {\n\t\t\treturn savedScalingValueSetting;\n\t\t}\n\t\treturn getAutoScalingFontSize();\n\t}, [localStorageSettings]);\n\n\tconst themeCallbacksContextValue = useMemo<ThemeCallbacks>(\n\t\t() => ({ addExtension, setDarkReaderState }),\n\t\t[addExtension]\n\t);\n\n\treturn (\n\t\t<UIThemeProvider extension={aggregatedExtensions}>\n\t\t\t<ThemeCallbacksContext.Provider value={themeCallbacksContextValue}>\n\t\t\t\t<GlobalStyle baseFontSize={baseFontSize} />\n\t\t\t\t{children}\n\t\t\t</ThemeCallbacksContext.Provider>\n\t\t</UIThemeProvider>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useEffect, useMemo } from 'react';\n\nimport { useTheme } from '@zextras/carbonio-design-system';\nimport { size } from 'lodash';\n\nimport { LOCAL_STORAGE_LAST_PRIMARY_KEY } from '../constants';\nimport { useDarkMode } from '../dark-mode/use-dark-mode';\nimport { useLocalStorage } from '../shell/hooks/useLocalStorage';\nimport { useLoginConfigStore } from '../store/login/store';\n\nexport function useGetPrimaryColor(): string | undefined {\n\tconst [localStorageLastPrimary, setLocalStorageLastPrimary] = useLocalStorage<\n\t\tPartial<Record<'dark' | 'light', string>> | undefined\n\t>(LOCAL_STORAGE_LAST_PRIMARY_KEY, undefined);\n\tconst { carbonioWebUiPrimaryColor, carbonioWebUiDarkPrimaryColor } = useLoginConfigStore();\n\tconst { darkModeEnabled, darkReaderStatus } = useDarkMode();\n\tconst theme = useTheme();\n\n\tconst primaryColor = useMemo(() => {\n\t\tif (\n\t\t\tdarkReaderStatus !== undefined &&\n\t\t\t(carbonioWebUiPrimaryColor || carbonioWebUiDarkPrimaryColor)\n\t\t) {\n\t\t\tif (darkModeEnabled) {\n\t\t\t\treturn carbonioWebUiDarkPrimaryColor || carbonioWebUiPrimaryColor;\n\t\t\t}\n\t\t\treturn carbonioWebUiPrimaryColor || carbonioWebUiDarkPrimaryColor;\n\t\t}\n\t\tif (localStorageLastPrimary && size(localStorageLastPrimary) > 0) {\n\t\t\treturn (\n\t\t\t\t(darkModeEnabled && (localStorageLastPrimary.dark || localStorageLastPrimary.light)) ||\n\t\t\t\tlocalStorageLastPrimary.light ||\n\t\t\t\tlocalStorageLastPrimary.dark\n\t\t\t);\n\t\t}\n\t\tif (theme) {\n\t\t\treturn theme.palette.primary.regular;\n\t\t}\n\t\treturn undefined;\n\t}, [\n\t\tcarbonioWebUiDarkPrimaryColor,\n\t\tcarbonioWebUiPrimaryColor,\n\t\tdarkModeEnabled,\n\t\tdarkReaderStatus,\n\t\tlocalStorageLastPrimary,\n\t\ttheme\n\t]);\n\n\tuseEffect(() => {\n\t\tif (darkReaderStatus !== undefined) {\n\t\t\tsetLocalStorageLastPrimary((prevState) => ({\n\t\t\t\t...prevState,\n\t\t\t\t[darkModeEnabled ? 'dark' : 'light']: primaryColor\n\t\t\t}));\n\t\t}\n\t}, [darkModeEnabled, darkReaderStatus, primaryColor, setLocalStorageLastPrimary]);\n\n\treturn primaryColor;\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useContext, useEffect, useMemo, useState } from 'react';\n\nimport { Select, SelectItem, SingleSelectionOnChange, Text } from '@zextras/carbonio-design-system';\nimport { find } from 'lodash';\n\nimport type { AddMod, DarkReaderPropValues, RemoveMod } from '../../../../types';\nimport { ThemeCallbacksContext } from '../../../boot/theme-provider';\nimport { DARK_READER_PROP_KEY, SHELL_APP_ID } from '../../../constants';\nimport {\n\tisDarkReaderPropValues,\n\tuseDarkReaderResultValue\n} from '../../../dark-mode/use-dark-reader-result-value';\nimport { getT } from '../../../store/i18n';\n\ntype DarkReaderSelectItem = Array<SelectItem & { value: DarkReaderPropValues }>;\n\ninterface DarkThemeSettingSectionProps {\n\taddMod: AddMod;\n\tremoveMod: RemoveMod;\n}\n\nconst DarkThemeSettingSection = ({\n\taddMod,\n\tremoveMod\n}: DarkThemeSettingSectionProps): JSX.Element | null => {\n\tconst { setDarkReaderState } = useContext(ThemeCallbacksContext);\n\tconst darkReaderResultValue = useDarkReaderResultValue();\n\tconst [selection, setSelection] = useState<SelectItem>();\n\n\tconst t = getT();\n\tconst items = useMemo(\n\t\t(): DarkReaderSelectItem => [\n\t\t\t{\n\t\t\t\tlabel: t('settings.general.theme_auto', 'Auto'),\n\t\t\t\tvalue: 'auto'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('settings.general.theme_enabled', 'Enabled'),\n\t\t\t\tvalue: 'enabled'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('settings.general.theme_disabled', 'Disabled'),\n\t\t\t\tvalue: 'disabled'\n\t\t\t}\n\t\t],\n\t\t[t]\n\t);\n\n\tconst setSelectNewValue = useCallback(\n\t\t(value: DarkReaderPropValues) => {\n\t\t\tconst item = find(items, { value });\n\t\t\tif (item) {\n\t\t\t\tsetSelection(item);\n\t\t\t}\n\t\t\tsetDarkReaderState(value);\n\t\t},\n\t\t[items, setDarkReaderState]\n\t);\n\n\tconst onSelectionChange = useCallback<SingleSelectionOnChange>(\n\t\t(value) => {\n\t\t\tif (isDarkReaderPropValues(value)) {\n\t\t\t\tif (value) {\n\t\t\t\t\tsetSelectNewValue(value);\n\t\t\t\t}\n\t\t\t\tif (value !== darkReaderResultValue) {\n\t\t\t\t\taddMod('props', DARK_READER_PROP_KEY, { app: SHELL_APP_ID, value });\n\t\t\t\t} else {\n\t\t\t\t\tremoveMod('props', DARK_READER_PROP_KEY);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[addMod, darkReaderResultValue, removeMod, setSelectNewValue]\n\t);\n\n\tuseEffect(() => {\n\t\tif (darkReaderResultValue) {\n\t\t\tsetSelectNewValue(darkReaderResultValue);\n\t\t}\n\t}, [darkReaderResultValue, items, setSelectNewValue]);\n\n\tif (!selection) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<>\n\t\t\t<Text size=\"medium\" weight=\"bold\">\n\t\t\t\t{t('settings.general.theme_options', 'Theme Options')}\n\t\t\t</Text>\n\t\t\t<Select\n\t\t\t\titems={items}\n\t\t\t\tselection={selection}\n\t\t\t\tlabel={t('settings.general.dark_mode', 'Dark Mode')}\n\t\t\t\tonChange={onSelectionChange}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default DarkThemeSettingSection;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { getSoapFetch } from './fetch';\nimport { goTo, goToLogin } from './utils';\nimport { SHELL_APP_ID } from '../constants';\nimport { useLoginConfigStore } from '../store/login/store';\n\nexport function logout(): Promise<void> {\n\treturn getSoapFetch(SHELL_APP_ID)('EndSession', {\n\t\t_jsns: 'urn:zimbraAccount',\n\t\tlogoff: true\n\t})\n\t\t.then(() => fetch('/?loginOp=logout', { redirect: 'manual' }))\n\t\t.then(() => {\n\t\t\tconst customLogoutUrl = useLoginConfigStore.getState().carbonioWebUiLogoutURL;\n\t\t\tcustomLogoutUrl ? goTo(customLogoutUrl) : goToLogin();\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useMemo } from 'react';\n\nimport { Button, FormSubSection } from '@zextras/carbonio-design-system';\nimport { useTranslation } from 'react-i18next';\n\nimport { logout } from '../../../network/logout';\nimport { accountSubSection } from '../../general-settings-sub-sections';\n\nexport const Logout = (): JSX.Element => {\n\tconst [t] = useTranslation();\n\n\tconst sectionTitle = useMemo(() => accountSubSection(t), [t]);\n\n\treturn (\n\t\t<FormSubSection\n\t\t\tlabel={sectionTitle.label}\n\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\twidth=\"50%\"\n\t\t\tid={sectionTitle.id}\n\t\t>\n\t\t\t<Button label={t('settings.general.account_logout', 'Logout')} onClick={logout} />\n\t\t</FormSubSection>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useMemo } from 'react';\n\nimport {\n\tBadge,\n\tContainer,\n\tDivider,\n\tFormSubSection,\n\tText,\n\tTextProps,\n\tTooltip,\n\tuseTheme\n} from '@zextras/carbonio-design-system';\nimport { map } from 'lodash';\n\nimport { CarbonioModule } from '../../../../types';\nimport { SEARCH_APP_ID, SETTINGS_APP_ID } from '../../../constants';\nimport { useAppList } from '../../../store/app';\nimport { getT } from '../../../store/i18n';\nimport { versionsSubSection } from '../../general-settings-sub-sections';\n\nconst ModuleVersionSettings = (): JSX.Element => {\n\tconst apps = useAppList();\n\tconst t = getT();\n\tconst theme = useTheme();\n\n\tconst copyToClipboard = useCallback<NonNullable<TextProps['onClick']>>((e) => {\n\t\te.preventDefault();\n\t\tif (e.target instanceof HTMLElement) {\n\t\t\tnavigator.clipboard.writeText(e.target.innerText);\n\t\t}\n\t}, []);\n\n\tconst filteredList = useMemo(\n\t\t() => apps.filter((app) => app.name !== SEARCH_APP_ID && app.name !== SETTINGS_APP_ID),\n\t\t[apps]\n\t);\n\tconst sectionTitle = useMemo(() => versionsSubSection(t), [t]);\n\n\treturn (\n\t\t<>\n\t\t\t<FormSubSection\n\t\t\t\tlabel={sectionTitle.label}\n\t\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\t\twidth=\"50%\"\n\t\t\t\tid={sectionTitle.id}\n\t\t\t>\n\t\t\t\t{map(filteredList, (app: CarbonioModule) => (\n\t\t\t\t\t<Container key={app.name} padding={{ horizontal: 'large', vertical: 'small' }}>\n\t\t\t\t\t\t<Container orientation=\"horizontal\" mainAlignment=\"space-between\">\n\t\t\t\t\t\t\t<Text>{app.display}</Text>\n\t\t\t\t\t\t\t<Tooltip placement=\"top\" label={t('label.click_to_copy', 'Click to copy')}>\n\t\t\t\t\t\t\t\t<Text style={{ cursor: 'pointer' }} onClick={copyToClipboard}>\n\t\t\t\t\t\t\t\t\tVersion: {app.version}\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\tmainAlignment=\"space-between\"\n\t\t\t\t\t\t\tpadding={{ top: 'extrasmall', bottom: 'medium' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Text color=\"secondary\">{app.description}</Text>\n\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\tvalue=\"Active\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackgroundColor: theme.palette.success.regular,\n\t\t\t\t\t\t\t\t\tcolor: theme.palette.gray6.regular\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t<Divider color=\"gray2\" />\n\t\t\t\t\t</Container>\n\t\t\t\t))}\n\t\t\t</FormSubSection>\n\t\t</>\n\t);\n};\n\nexport default ModuleVersionSettings;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport {\n\tCheckbox,\n\tContainer,\n\tDateTimePicker,\n\tDateTimePickerProps\n} from '@zextras/carbonio-design-system';\n\nimport { AddMod, GeneralizedTime } from '../../../../types';\nimport { getT } from '../../../store/i18n';\nimport { useReset } from '../../hooks/use-reset';\nimport {\n\tdateToGenTime,\n\tendOfDay,\n\tgenTimeToDate,\n\tSettingsSectionProps,\n\tstartOfDay,\n\tupsertPrefOnUnsavedChanges\n} from '../utils';\n\ninterface OutOfOfficeTimePeriodSectionProps extends SettingsSectionProps {\n\taddMod: AddMod;\n\tdisabled: boolean;\n\tprefOutOfOfficeFromDate: GeneralizedTime | undefined;\n\tprefOutOfOfficeUntilDate: GeneralizedTime | undefined;\n}\n\nfunction coerceGenTime(genTime: GeneralizedTime | undefined): Date {\n\treturn genTime ? genTimeToDate(genTime) : new Date();\n}\n\nexport const OutOfOfficeTimePeriodSection = ({\n\taddMod,\n\tdisabled,\n\tprefOutOfOfficeFromDate,\n\tprefOutOfOfficeUntilDate,\n\tresetRef\n}: OutOfOfficeTimePeriodSectionProps): JSX.Element => {\n\tconst t = getT();\n\tconst [fromDate, setFromDate] = useState<Date>(coerceGenTime(prefOutOfOfficeFromDate));\n\tconst [untilDate, setUntilDate] = useState<Date>(coerceGenTime(prefOutOfOfficeUntilDate));\n\tconst [allDayEnabled, setAllDayEnabled] = useState<boolean>(false);\n\tconst editTimeIsDisabled = useMemo(() => disabled || allDayEnabled, [disabled, allDayEnabled]);\n\n\tconst updatePref = useMemo(() => upsertPrefOnUnsavedChanges(addMod), [addMod]);\n\n\tconst initPrefs = useCallback(() => {\n\t\tconst fromDatePref = coerceGenTime(prefOutOfOfficeFromDate);\n\t\tconst untilDatePref = coerceGenTime(prefOutOfOfficeUntilDate);\n\t\tsetFromDate(fromDatePref);\n\t\tsetUntilDate(untilDatePref);\n\t\t// there is no pref for the all day check. It is considered all day if the start date time is midnight\n\t\t// and the until date time is 23:59:59:00\n\t\tconst fromDateAllDay = startOfDay(fromDatePref);\n\t\tconst untilDateAllDay = endOfDay(untilDatePref);\n\t\tsetAllDayEnabled(\n\t\t\tfromDatePref.getTime() === fromDateAllDay.getTime() &&\n\t\t\t\tuntilDatePref.getTime() === untilDateAllDay.getTime()\n\t\t);\n\t}, [prefOutOfOfficeFromDate, prefOutOfOfficeUntilDate]);\n\n\tuseEffect(() => {\n\t\tinitPrefs();\n\t}, [initPrefs]);\n\n\tuseReset(resetRef, initPrefs);\n\n\tconst outOfOfficeFromDateOnChange = useCallback<NonNullable<DateTimePickerProps['onChange']>>(\n\t\t(newFromDate) => {\n\t\t\tif (newFromDate) {\n\t\t\t\tsetFromDate((prevState) => {\n\t\t\t\t\tif (newFromDate.getTime() !== prevState.getTime()) {\n\t\t\t\t\t\tupdatePref('zimbraPrefOutOfOfficeFromDate', dateToGenTime(newFromDate));\n\t\t\t\t\t}\n\t\t\t\t\treturn newFromDate;\n\t\t\t\t});\n\t\t\t\tif (newFromDate.getTime() > untilDate.getTime()) {\n\t\t\t\t\tconst newUntilDate = new Date(newFromDate);\n\t\t\t\t\tsetUntilDate(newUntilDate);\n\t\t\t\t\tupdatePref('zimbraPrefOutOfOfficeUntilDate', dateToGenTime(newUntilDate));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// force an update by cloning the date, so that the input is not left empty\n\t\t\t\tsetFromDate((prevState) => new Date(prevState));\n\t\t\t}\n\t\t},\n\t\t[untilDate, updatePref]\n\t);\n\n\tconst outOfOfficeUntilDateOnChange = useCallback<NonNullable<DateTimePickerProps['onChange']>>(\n\t\t(newUntilDate) => {\n\t\t\tif (newUntilDate) {\n\t\t\t\tsetUntilDate((prevState) => {\n\t\t\t\t\tif (newUntilDate.getTime() !== prevState.getTime()) {\n\t\t\t\t\t\tupdatePref('zimbraPrefOutOfOfficeUntilDate', dateToGenTime(newUntilDate));\n\t\t\t\t\t}\n\t\t\t\t\treturn newUntilDate;\n\t\t\t\t});\n\t\t\t\tif (newUntilDate.getTime() < fromDate.getTime()) {\n\t\t\t\t\tconst newFromDate = new Date(newUntilDate);\n\t\t\t\t\tsetFromDate(newFromDate);\n\t\t\t\t\tupdatePref('zimbraPrefOutOfOfficeFromDate', dateToGenTime(newFromDate));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// force an update by cloning the date, so that the input is not left empty\n\t\t\t\tsetUntilDate((prevState) => new Date(prevState));\n\t\t\t}\n\t\t},\n\t\t[fromDate, updatePref]\n\t);\n\n\tconst toggleAllDay = useCallback(() => {\n\t\tsetAllDayEnabled((prevWasEnabled) => {\n\t\t\tconst nowIsEnabled = !prevWasEnabled;\n\t\t\tif (nowIsEnabled) {\n\t\t\t\tsetFromDate((prevState) => {\n\t\t\t\t\tconst startOfFromDate = startOfDay(prevState);\n\t\t\t\t\tif (startOfFromDate.getTime() !== prevState.getTime()) {\n\t\t\t\t\t\tupdatePref('zimbraPrefOutOfOfficeFromDate', dateToGenTime(startOfFromDate));\n\t\t\t\t\t}\n\t\t\t\t\treturn startOfFromDate;\n\t\t\t\t});\n\t\t\t\tsetUntilDate((prevState) => {\n\t\t\t\t\tconst endOfUntilDate = endOfDay(prevState);\n\t\t\t\t\tif (endOfUntilDate.getTime() !== prevState.getTime()) {\n\t\t\t\t\t\tupdatePref('zimbraPrefOutOfOfficeUntilDate', dateToGenTime(endOfUntilDate));\n\t\t\t\t\t}\n\t\t\t\t\treturn endOfUntilDate;\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn nowIsEnabled;\n\t\t});\n\t}, [updatePref]);\n\n\treturn (\n\t\t<Container padding={{ vertical: 'small' }} gap={'0.5rem'} crossAlignment={'flex-start'}>\n\t\t\t<Container orientation={'horizontal'} gap={'0.5rem'}>\n\t\t\t\t<DateTimePicker\n\t\t\t\t\tlabel={t('settings.out_of_office.labels.start_date', 'Start Date')}\n\t\t\t\t\tdateFormat={'P'}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tdefaultValue={fromDate}\n\t\t\t\t\tonChange={outOfOfficeFromDateOnChange}\n\t\t\t\t\tincludeTime={false}\n\t\t\t\t\twidth={'fill'}\n\t\t\t\t/>\n\t\t\t\t<DateTimePicker\n\t\t\t\t\tlabel={t('settings.out_of_office.labels.end_date', 'End Date')}\n\t\t\t\t\tdateFormat={'P'}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\ttimeLabel={''}\n\t\t\t\t\tdefaultValue={untilDate}\n\t\t\t\t\tonChange={outOfOfficeUntilDateOnChange}\n\t\t\t\t\tincludeTime={false}\n\t\t\t\t\twidth={'fill'}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t\t<Checkbox\n\t\t\t\tdisabled={disabled}\n\t\t\t\tlabel={t('settings.out_of_office.labels.all_day', 'All Day:')}\n\t\t\t\tvalue={allDayEnabled}\n\t\t\t\tonClick={toggleAllDay}\n\t\t\t/>\n\t\t\t<Container orientation={'horizontal'} gap={'0.5rem'}>\n\t\t\t\t<DateTimePicker\n\t\t\t\t\tlabel={t('settings.out_of_office.labels.start_time', 'Start Time')}\n\t\t\t\t\tshowTimeSelect\n\t\t\t\t\tshowTimeSelectOnly\n\t\t\t\t\ttimeLabel=\"\"\n\t\t\t\t\tdateFormat=\"p\"\n\t\t\t\t\tdefaultValue={fromDate}\n\t\t\t\t\tonChange={outOfOfficeFromDateOnChange}\n\t\t\t\t\tdisabled={editTimeIsDisabled}\n\t\t\t\t\twidth={'fill'}\n\t\t\t\t/>\n\t\t\t\t<DateTimePicker\n\t\t\t\t\tlabel={t('settings.out_of_office.labels.end_time', 'End Time')}\n\t\t\t\t\tshowTimeSelect\n\t\t\t\t\tshowTimeSelectOnly\n\t\t\t\t\ttimeLabel=\"\"\n\t\t\t\t\tdateFormat=\"p\"\n\t\t\t\t\tdefaultValue={untilDate}\n\t\t\t\t\tonChange={outOfOfficeUntilDateOnChange}\n\t\t\t\t\tdisabled={editTimeIsDisabled}\n\t\t\t\t\twidth={'fill'}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\n\nimport {\n\tCheckbox,\n\tContainer,\n\tFormSubSection,\n\tPadding,\n\tRow,\n\tSelect,\n\tSelectItem,\n\tSingleSelectionOnChange,\n\tText,\n\tTextArea,\n\tTextAreaProps\n} from '@zextras/carbonio-design-system';\nimport { type TFunction } from 'i18next';\nimport { find } from 'lodash';\n\nimport { OutOfOfficeTimePeriodSection } from './out-of-office-time-period-section';\nimport { AccountSettings, AccountSettingsPrefs, AddMod, BooleanString } from '../../../../types';\nimport { getT } from '../../../store/i18n';\nimport { outOfOfficeSubSection } from '../../general-settings-sub-sections';\nimport { useReset } from '../../hooks/use-reset';\nimport {\n\tdateToGenTime,\n\tResetComponentImperativeHandler,\n\tSettingsSectionProps,\n\tupsertPrefOnUnsavedChanges\n} from '../utils';\n\ntype CoercedPrefType<T> = T extends BooleanString | undefined ? boolean | undefined : T;\n\nexport const buildItemsPrefOutOfOfficeReplyEnabled = (\n\tt: TFunction\n): Array<\n\tSelectItem<\n\t\tNonNullable<CoercedPrefType<AccountSettingsPrefs['zimbraPrefOutOfOfficeReplyEnabled']>>\n\t>\n> => [\n\t{\n\t\tlabel: t('settings.out_of_office.send_auto_replies', 'Send auto-replies'),\n\t\tvalue: true\n\t},\n\t{\n\t\tlabel: t('settings.out_of_office.do_not_send_auto_replies', 'Do not send auto-replies'),\n\t\tvalue: false\n\t}\n];\n\ntype ExternalSenders =\n\t| 'SEND_AUTO_REPLY'\n\t| 'SHOW_EXTERNAL_INPUT'\n\t| 'SEND_NOT_IN_ORG'\n\t| 'SUPPRESS_EXTERNAL';\n\nexport const buildItemsExternalSenders = (\n\tt: TFunction\n): Record<ExternalSenders, SelectItem<ExternalSenders>> => ({\n\tSEND_AUTO_REPLY: {\n\t\tlabel: t(\n\t\t\t'settings.out_of_office.external_senders.send_standard_auto_reply',\n\t\t\t'Send standard auto-reply message'\n\t\t),\n\t\tvalue: 'SEND_AUTO_REPLY'\n\t},\n\tSHOW_EXTERNAL_INPUT: {\n\t\tlabel: t(\n\t\t\t'settings.out_of_office.external_senders.send_custom_in_organisation',\n\t\t\t'Send custom message to those who are not in my organization'\n\t\t),\n\t\tvalue: 'SHOW_EXTERNAL_INPUT'\n\t},\n\tSEND_NOT_IN_ORG: {\n\t\tlabel: t(\n\t\t\t'settings.out_of_office.external_senders.send_custom_not_in_organisation',\n\t\t\t'Send custom message to those who are not in my organization or address book'\n\t\t),\n\t\tvalue: 'SEND_NOT_IN_ORG'\n\t},\n\tSUPPRESS_EXTERNAL: {\n\t\tlabel: t(\n\t\t\t'settings.out_of_office.external_senders.do_not_send_to_external',\n\t\t\t\"Don't send an auto-reply message to external sender\"\n\t\t),\n\t\tvalue: 'SUPPRESS_EXTERNAL'\n\t}\n});\n\nexport const getExternalSendersPrefsData = (\n\tsettings: AccountSettings,\n\tt: TFunction\n): SelectItem<ExternalSenders> => {\n\tconst itemsExternalSenders = buildItemsExternalSenders(t);\n\tif (\n\t\tsettings.prefs.zimbraPrefOutOfOfficeSuppressExternalReply === 'FALSE' &&\n\t\tsettings.prefs.zimbraPrefOutOfOfficeExternalReplyEnabled === 'FALSE'\n\t) {\n\t\treturn itemsExternalSenders.SEND_AUTO_REPLY;\n\t}\n\tif (\n\t\tsettings.prefs.zimbraPrefExternalSendersType === 'ALL' &&\n\t\tsettings.prefs.zimbraPrefOutOfOfficeExternalReplyEnabled === 'TRUE'\n\t) {\n\t\treturn itemsExternalSenders.SHOW_EXTERNAL_INPUT;\n\t}\n\tif (\n\t\tsettings.prefs.zimbraPrefExternalSendersType === 'ALLNOTINAB' &&\n\t\tsettings.prefs.zimbraPrefOutOfOfficeExternalReplyEnabled === 'TRUE'\n\t) {\n\t\treturn itemsExternalSenders.SEND_NOT_IN_ORG;\n\t}\n\treturn itemsExternalSenders.SUPPRESS_EXTERNAL;\n};\n\ninterface OutOfOfficeViewProps extends SettingsSectionProps {\n\tsettings: AccountSettings;\n\taddMod: AddMod;\n}\n\nexport const OutOfOfficeSettings = ({\n\tsettings,\n\taddMod,\n\tresetRef\n}: OutOfOfficeViewProps): JSX.Element => {\n\tconst t = getT();\n\tconst outOfOfficeSectionTitle = useMemo(() => outOfOfficeSubSection(t), [t]);\n\tconst [prefOutOfOfficeReplyEnabled, setPrefOutOfOfficeReplyEnabled] = useState<boolean>(\n\t\tsettings.prefs.zimbraPrefOutOfOfficeReplyEnabled === 'TRUE'\n\t);\n\tconst [prefOutOfOfficeReply, setPrefOutOfOfficeReply] = useState<string>(\n\t\tsettings.prefs.zimbraPrefOutOfOfficeReply ?? ''\n\t);\n\tconst [prefOutOfOfficeExternalReplyEnabled, setPrefOutOfOfficeExternalReplyEnabled] =\n\t\tuseState<boolean>(settings.prefs.zimbraPrefOutOfOfficeExternalReplyEnabled === 'TRUE');\n\tconst [prefOutOfOfficeExternalReply, setPrefOutOfOfficeExternalReply] = useState<string>(\n\t\tsettings.prefs.zimbraPrefOutOfOfficeExternalReply ?? ''\n\t);\n\tconst [externalSendersSelectedItem, setExternalSendersSelectedItem] = useState<\n\t\tSelectItem<ExternalSenders>\n\t>(getExternalSendersPrefsData(settings, t));\n\tconst [sendAutoReplyTimePeriodEnabled, setSendAutoReplyTimePeriodEnabled] = useState<boolean>(\n\t\t!!settings.prefs.zimbraPrefOutOfOfficeFromDate &&\n\t\t\t!!settings.prefs.zimbraPrefOutOfOfficeUntilDate\n\t);\n\n\tconst outOfOfficeTimePeriodResetRef = useRef<ResetComponentImperativeHandler>(null);\n\n\tconst initPrefs = useCallback(() => {\n\t\tsetPrefOutOfOfficeReplyEnabled(settings.prefs.zimbraPrefOutOfOfficeReplyEnabled === 'TRUE');\n\t\tsetPrefOutOfOfficeReply(settings.prefs.zimbraPrefOutOfOfficeReply ?? '');\n\t\tsetPrefOutOfOfficeExternalReplyEnabled(\n\t\t\tsettings.prefs.zimbraPrefOutOfOfficeExternalReplyEnabled === 'TRUE'\n\t\t);\n\t\tsetPrefOutOfOfficeExternalReply(settings.prefs.zimbraPrefOutOfOfficeExternalReply ?? '');\n\t\tsetExternalSendersSelectedItem(getExternalSendersPrefsData(settings, t));\n\t\tsetSendAutoReplyTimePeriodEnabled(\n\t\t\t!!settings.prefs.zimbraPrefOutOfOfficeFromDate &&\n\t\t\t\t!!settings.prefs.zimbraPrefOutOfOfficeUntilDate\n\t\t);\n\t\toutOfOfficeTimePeriodResetRef.current?.reset();\n\t}, [settings, t]);\n\n\tuseEffect(() => {\n\t\tinitPrefs();\n\t}, [initPrefs]);\n\n\tuseReset(resetRef, initPrefs);\n\n\tconst updatePref = useMemo(() => upsertPrefOnUnsavedChanges(addMod), [addMod]);\n\n\tconst prefOutOfOfficeReplyEnabledSelectItems = useMemo(\n\t\t() => buildItemsPrefOutOfOfficeReplyEnabled(t),\n\t\t[t]\n\t);\n\n\tconst prefOutOfOfficeReplyEnabledSelectedValue = useMemo<SelectItem<boolean>>(\n\t\t() =>\n\t\t\tfind(\n\t\t\t\tprefOutOfOfficeReplyEnabledSelectItems,\n\t\t\t\t(item) => item.value === prefOutOfOfficeReplyEnabled\n\t\t\t) as SelectItem<boolean>,\n\t\t[prefOutOfOfficeReplyEnabled, prefOutOfOfficeReplyEnabledSelectItems]\n\t);\n\n\tconst prefOutOfOfficeReplyEnabledOnChange = useCallback<\n\t\tSingleSelectionOnChange<\n\t\t\tNonNullable<CoercedPrefType<AccountSettingsPrefs['zimbraPrefOutOfOfficeReplyEnabled']>>\n\t\t>\n\t>(\n\t\t(value): void => {\n\t\t\tif (value !== null) {\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeReplyEnabled', value);\n\t\t\t\tsetPrefOutOfOfficeReplyEnabled(value);\n\t\t\t}\n\t\t},\n\t\t[updatePref]\n\t);\n\n\tconst externalSendersSelectItems = useMemo(\n\t\t() => Object.values(buildItemsExternalSenders(t)),\n\t\t[t]\n\t);\n\n\tconst externalSendersHandler = useCallback(\n\t\t(value: ExternalSenders) => {\n\t\t\tif (value === 'SEND_AUTO_REPLY') {\n\t\t\t\tupdatePref('zimbraPrefExternalSendersType', 'INSD');\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeExternalReplyEnabled', false);\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeSuppressExternalReply', false);\n\t\t\t\tsetPrefOutOfOfficeExternalReplyEnabled(false);\n\t\t\t} else if (value === 'SHOW_EXTERNAL_INPUT') {\n\t\t\t\tupdatePref('zimbraPrefExternalSendersType', 'ALL');\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeExternalReplyEnabled', true);\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeSuppressExternalReply', false);\n\t\t\t\tsetPrefOutOfOfficeExternalReplyEnabled(true);\n\t\t\t} else if (value === 'SEND_NOT_IN_ORG') {\n\t\t\t\tupdatePref('zimbraPrefExternalSendersType', 'ALLNOTINAB');\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeExternalReplyEnabled', true);\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeSuppressExternalReply', false);\n\t\t\t\tsetPrefOutOfOfficeExternalReplyEnabled(true);\n\t\t\t} else if (value === 'SUPPRESS_EXTERNAL') {\n\t\t\t\tupdatePref('zimbraPrefExternalSendersType', 'INAB');\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeExternalReplyEnabled', false);\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeSuppressExternalReply', true);\n\t\t\t\tsetPrefOutOfOfficeExternalReplyEnabled(false);\n\t\t\t}\n\t\t},\n\t\t[updatePref]\n\t);\n\n\tconst externalSendersOnChange = useCallback<SingleSelectionOnChange<ExternalSenders>>(\n\t\t(value) => {\n\t\t\tif (value !== null) {\n\t\t\t\texternalSendersHandler(value);\n\t\t\t\tconst newSelectItem = find(externalSendersSelectItems, (item) => item.value === value);\n\t\t\t\tnewSelectItem && setExternalSendersSelectedItem(newSelectItem);\n\t\t\t}\n\t\t},\n\t\t[externalSendersHandler, externalSendersSelectItems]\n\t);\n\n\tconst prefOutOfOfficeReplyOnChange = useCallback<NonNullable<TextAreaProps['onChange']>>(\n\t\t(ev) => {\n\t\t\tsetPrefOutOfOfficeReply(ev.target.value);\n\t\t\tupdatePref('zimbraPrefOutOfOfficeReply', ev.target.value);\n\t\t},\n\t\t[updatePref]\n\t);\n\n\tconst prefOutOfOfficeExternalReplyOnChange = useCallback<NonNullable<TextAreaProps['onChange']>>(\n\t\t(ev) => {\n\t\t\tsetPrefOutOfOfficeExternalReply(ev.target.value);\n\t\t\tupdatePref('zimbraPrefOutOfOfficeExternalReply', ev.target.value);\n\t\t},\n\t\t[updatePref]\n\t);\n\n\tconst toggleSendAutoReplyTimePeriod = useCallback(() => {\n\t\tsetSendAutoReplyTimePeriodEnabled((prevState) => {\n\t\t\tconst nextState = !prevState;\n\t\t\tif (!nextState) {\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeFromDate', undefined);\n\t\t\t\tupdatePref('zimbraPrefOutOfOfficeUntilDate', undefined);\n\t\t\t} else {\n\t\t\t\tif (!settings.prefs.zimbraPrefOutOfOfficeFromDate) {\n\t\t\t\t\tupdatePref('zimbraPrefOutOfOfficeFromDate', dateToGenTime(new Date()));\n\t\t\t\t}\n\t\t\t\tif (!settings.prefs.zimbraPrefOutOfOfficeUntilDate) {\n\t\t\t\t\tupdatePref('zimbraPrefOutOfOfficeUntilDate', dateToGenTime(new Date()));\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn nextState;\n\t\t});\n\t}, [\n\t\tsettings.prefs.zimbraPrefOutOfOfficeFromDate,\n\t\tsettings.prefs.zimbraPrefOutOfOfficeUntilDate,\n\t\tupdatePref\n\t]);\n\n\treturn (\n\t\t<FormSubSection\n\t\t\tlabel={outOfOfficeSectionTitle.label}\n\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\twidth=\"50%\"\n\t\t\tid={outOfOfficeSectionTitle.id}\n\t\t>\n\t\t\t<Container crossAlignment=\"baseline\" padding={{ all: 'small' }} gap={'0.5rem'}>\n\t\t\t\t<Select\n\t\t\t\t\titems={prefOutOfOfficeReplyEnabledSelectItems}\n\t\t\t\t\tlabel={t('label.out_of_office', 'Out of Office')}\n\t\t\t\t\tonChange={prefOutOfOfficeReplyEnabledOnChange}\n\t\t\t\t\tselection={prefOutOfOfficeReplyEnabledSelectedValue}\n\t\t\t\t/>\n\t\t\t\t<TextArea\n\t\t\t\t\tvalue={prefOutOfOfficeReply}\n\t\t\t\t\tdisabled={!prefOutOfOfficeReplyEnabled}\n\t\t\t\t\tlabel={t('settings.out_of_office.labels.auto_reply_message', 'Auto-Reply Message:')}\n\t\t\t\t\tonChange={prefOutOfOfficeReplyOnChange}\n\t\t\t\t/>\n\t\t\t\t<Select\n\t\t\t\t\tdisabled={!prefOutOfOfficeReplyEnabled}\n\t\t\t\t\titems={externalSendersSelectItems}\n\t\t\t\t\tlabel={t('settings.out_of_office.labels.external_senders', 'External Senders')}\n\t\t\t\t\tonChange={externalSendersOnChange}\n\t\t\t\t\tselection={externalSendersSelectedItem}\n\t\t\t\t\tdropdownWidth={'auto'}\n\t\t\t\t\tdropdownMaxWidth={'unset'}\n\t\t\t\t\tplacement={'bottom-start'}\n\t\t\t\t/>\n\t\t\t\t{prefOutOfOfficeExternalReplyEnabled && (\n\t\t\t\t\t<TextArea\n\t\t\t\t\t\tvalue={prefOutOfOfficeExternalReply}\n\t\t\t\t\t\tdisabled={!prefOutOfOfficeReplyEnabled}\n\t\t\t\t\t\tlabel={t(\n\t\t\t\t\t\t\t'settings.out_of_office.labels.auto_reply_message_external',\n\t\t\t\t\t\t\t'Auto-Reply Message for External senders:'\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tonChange={prefOutOfOfficeExternalReplyOnChange}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</Container>\n\t\t\t<Container crossAlignment=\"baseline\" padding={{ all: 'small' }}>\n\t\t\t\t<Row\n\t\t\t\t\tpadding={{ all: 'small' }}\n\t\t\t\t\tmainAlignment=\"baseline\"\n\t\t\t\t\tcrossAlignment=\"baseline\"\n\t\t\t\t\twidth=\"100%\"\n\t\t\t\t>\n\t\t\t\t\t<Text size=\"large\" weight=\"bold\">\n\t\t\t\t\t\t{t('settings.out_of_office.headings.time_period', 'Time Period')}\n\t\t\t\t\t</Text>\n\t\t\t\t</Row>\n\t\t\t\t<Padding vertical=\"small\" />\n\t\t\t\t<Checkbox\n\t\t\t\t\tlabel={t(\n\t\t\t\t\t\t'settings.out_of_office.labels.send_auto_reply_period',\n\t\t\t\t\t\t'Send auto-replies during the following period:'\n\t\t\t\t\t)}\n\t\t\t\t\tvalue={sendAutoReplyTimePeriodEnabled}\n\t\t\t\t\tonClick={toggleSendAutoReplyTimePeriod}\n\t\t\t\t\tdisabled={!prefOutOfOfficeReplyEnabled}\n\t\t\t\t/>\n\t\t\t\t<OutOfOfficeTimePeriodSection\n\t\t\t\t\taddMod={addMod}\n\t\t\t\t\tdisabled={!prefOutOfOfficeReplyEnabled || !sendAutoReplyTimePeriodEnabled}\n\t\t\t\t\tprefOutOfOfficeFromDate={settings.prefs.zimbraPrefOutOfOfficeFromDate}\n\t\t\t\t\tprefOutOfOfficeUntilDate={settings.prefs.zimbraPrefOutOfOfficeUntilDate}\n\t\t\t\t\tresetRef={outOfOfficeTimePeriodResetRef}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t</FormSubSection>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport {\n\tButton,\n\tCheckbox,\n\tContainer,\n\tSlider,\n\tSliderProps,\n\tText,\n\tTooltip\n} from '@zextras/carbonio-design-system';\nimport { useTranslation } from 'react-i18next';\nimport styled, { SimpleInterpolation } from 'styled-components';\n\nimport { ScalingSettings } from '../../../../types/settings';\nimport { BASE_FONT_SIZE, SCALING_OPTIONS } from '../../../constants';\nimport { useReset } from '../../hooks/use-reset';\nimport { getAutoScalingFontSize, ResetComponentImperativeHandler } from '../utils';\n\nconst ScalingSliderContainer = styled(Container)`\n\tbox-shadow: 0px 0px 4px rgba(166, 166, 166, 0.5);\n\tborder-radius: 0.5rem;\n`;\n\nconst ExampleContainer = styled(Container)<{ $fontSize: number | undefined }>`\n\tfont-size: ${({ $fontSize }): SimpleInterpolation => $fontSize && `${$fontSize}%`};\n`;\n\nconst ExampleText = styled(Text)`\n\tfont-size: 1em; /* font-size needs to be relative to ExampleContainer */\n`;\n\ninterface ScalingSettingSectionProps {\n\tscalingSettings: ScalingSettings;\n\taddLocalStoreChange: (\n\t\tkey: keyof ScalingSettings,\n\t\tvalue: ScalingSettings[keyof ScalingSettings]\n\t) => void;\n\tcleanLocalStoreChange: (key: keyof ScalingSettings) => void;\n\tresetRef: React.RefObject<ResetComponentImperativeHandler>;\n}\n\nconst BASE_FONT_OPTION_INDEX = SCALING_OPTIONS.findIndex(\n\t(option) => option.value === BASE_FONT_SIZE\n);\n\nconst AUTOSCALING_FONT_SIZE = getAutoScalingFontSize();\nconst AUTOSCALING_FONT_OPTION_INDEX = SCALING_OPTIONS.findIndex(\n\t(option) => option.value === AUTOSCALING_FONT_SIZE\n);\n\nexport const ScalingSettingSection = ({\n\tscalingSettings,\n\taddLocalStoreChange,\n\tcleanLocalStoreChange,\n\tresetRef\n}: ScalingSettingSectionProps): JSX.Element => {\n\tconst [t] = useTranslation();\n\n\tconst [scalingOptionValues, scalingOptionLabels] = useMemo<[number[], string[]]>(\n\t\t() =>\n\t\t\tSCALING_OPTIONS.reduce<[number[], string[]]>(\n\t\t\t\t([values, labels], option) => {\n\t\t\t\t\tvalues.push(option.value);\n\t\t\t\t\tlabels.push(t('settings.appearance.option', { context: option.label }));\n\t\t\t\t\treturn [values, labels];\n\t\t\t\t},\n\t\t\t\t[[], []]\n\t\t\t),\n\t\t[t]\n\t);\n\n\tconst savedOptionIndex = useMemo<number>(() => {\n\t\tconst savedScalingValueSetting = scalingSettings['settings.appearance_setting.scaling'];\n\t\tif (savedScalingValueSetting !== undefined) {\n\t\t\tconst optionIndex = scalingOptionValues.findIndex(\n\t\t\t\t(option) => option === savedScalingValueSetting\n\t\t\t);\n\t\t\tif (optionIndex >= 0) {\n\t\t\t\treturn optionIndex;\n\t\t\t}\n\t\t}\n\t\treturn AUTOSCALING_FONT_OPTION_INDEX;\n\t}, [scalingOptionValues, scalingSettings]);\n\n\tconst [autoScaling, setAutoScaling] = useState(\n\t\tscalingSettings['settings.appearance_setting.auto'] ?? true\n\t);\n\tconst [scalingValue, setScalingValue] = useState<number>(savedOptionIndex);\n\n\tuseEffect(() => {\n\t\t// update input value when setting is updated\n\t\tsetScalingValue(savedOptionIndex);\n\t}, [savedOptionIndex]);\n\n\tuseEffect(() => {\n\t\tif (scalingOptionValues[scalingValue]) {\n\t\t\tif (scalingValue !== savedOptionIndex) {\n\t\t\t\taddLocalStoreChange(\n\t\t\t\t\t'settings.appearance_setting.scaling',\n\t\t\t\t\tscalingOptionValues[scalingValue]\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcleanLocalStoreChange('settings.appearance_setting.scaling');\n\t\t\t}\n\t\t}\n\t}, [\n\t\taddLocalStoreChange,\n\t\tcleanLocalStoreChange,\n\t\tsavedOptionIndex,\n\t\tscalingOptionValues,\n\t\tscalingSettings,\n\t\tscalingValue\n\t]);\n\n\tuseEffect(() => {\n\t\tif (\n\t\t\t(scalingSettings['settings.appearance_setting.auto'] !== undefined &&\n\t\t\t\tautoScaling !== scalingSettings['settings.appearance_setting.auto']) ||\n\t\t\t(scalingSettings['settings.appearance_setting.auto'] === undefined && !autoScaling)\n\t\t) {\n\t\t\taddLocalStoreChange('settings.appearance_setting.auto', autoScaling);\n\t\t\tif (autoScaling) {\n\t\t\t\taddLocalStoreChange('settings.appearance_setting.scaling', undefined);\n\t\t\t}\n\t\t} else {\n\t\t\tcleanLocalStoreChange('settings.appearance_setting.auto');\n\t\t}\n\t}, [addLocalStoreChange, autoScaling, cleanLocalStoreChange, scalingSettings]);\n\n\tconst increaseScalingByStep = useCallback(() => {\n\t\tsetScalingValue((prevState) =>\n\t\t\tprevState < SCALING_OPTIONS.length - 1 ? prevState + 1 : prevState\n\t\t);\n\t}, []);\n\n\tconst decreaseScalingByStep = useCallback(() => {\n\t\tsetScalingValue((prevState) => (prevState > 0 ? prevState - 1 : prevState));\n\t}, []);\n\n\tconst toggleAutoScaling = useCallback(() => {\n\t\tsetAutoScaling((prevState) => !prevState);\n\t\tsetScalingValue(savedOptionIndex);\n\t}, [savedOptionIndex]);\n\n\tconst onChangeScalingValue = useCallback<NonNullable<SliderProps['onChange']>>(\n\t\t(ev, newValueIndex) => {\n\t\t\tsetScalingValue(newValueIndex);\n\t\t},\n\t\t[]\n\t);\n\n\tconst resetHandler = useCallback((): void => {\n\t\tsetScalingValue(savedOptionIndex);\n\t\tsetAutoScaling(scalingSettings['settings.appearance_setting.auto'] ?? true);\n\t}, [savedOptionIndex, scalingSettings]);\n\n\tuseReset(resetRef, resetHandler);\n\n\tconst exampleText = useMemo(\n\t\t() =>\n\t\t\tt(\n\t\t\t\t'settings.appearance.labels.choose_size_pangram',\n\t\t\t\t'The quick brown fox jumps over the lazy dog.'\n\t\t\t),\n\t\t[t]\n\t);\n\n\tconst exampleFontSize = useMemo<number>(\n\t\t() =>\n\t\t\t// Revert the percentage and then apply the new value to use the browser base font-size and not the html font-size rule\n\t\t\t// Explanation:\n\t\t\t// - reverting factor (factor to apply to current font to obtain the browser font size) = unsaved input value / local storage value\n\t\t\t// - new font size percentage = reverting factor * 100\n\t\t\t// The resulting value is the percentage to apply to current html font-size to obtain the same calculated value\n\t\t\t// as if the scalingValue was set in the html.\n\t\t\t// E.g.: html: 75%, scalingValue: 100 -> 1 rem is 12px (because of the 75%). In the browser the base font is set to 16px.\n\t\t\t// To make scalingValue 100 equals to 16px, we need to get the reverting factor (100 / 75 = 1.3333).\n\t\t\t// This is the factor required to have 16 starting from 12 (12*1.3333 ~= 16)\n\t\t\t// The percentage to apply to the example container is then 1.3333 * 100 = 133.33 (133.33%(75) ~= 100 ~= 16px)\n\t\t\t((scalingOptionValues[Math.round(scalingValue)] || 100) /\n\t\t\t\tscalingOptionValues[savedOptionIndex]) *\n\t\t\t100,\n\t\t[savedOptionIndex, scalingOptionValues, scalingValue]\n\t);\n\n\treturn (\n\t\t<Container\n\t\t\torientation={'vertical'}\n\t\t\tmainAlignment={'flex-start'}\n\t\t\tcrossAlignment={'flex-start'}\n\t\t\tgap={'1rem'}\n\t\t\theight={'fit'}\n\t\t\twidth={'fill'}\n\t\t>\n\t\t\t<Container\n\t\t\t\torientation={'vertical'}\n\t\t\t\tgap={'1rem'}\n\t\t\t\theight={'fit'}\n\t\t\t\twidth={'fit'}\n\t\t\t\tmainAlignment={'flex-start'}\n\t\t\t\tcrossAlignment={'flex-start'}\n\t\t\t\tmaxWidth={'100%'}\n\t\t\t>\n\t\t\t\t<Text size=\"small\" overflow={'break-word'}>\n\t\t\t\t\t{t(\n\t\t\t\t\t\t'settings.appearance.labels.choose_size_description',\n\t\t\t\t\t\t'Choose Type Size and Styles for Carbonio Environment'\n\t\t\t\t\t)}\n\t\t\t\t</Text>\n\t\t\t\t<ScalingSliderContainer\n\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\twidth=\"fill\"\n\t\t\t\t\theight=\"auto\"\n\t\t\t\t\tpadding={{ vertical: 'small', horizontal: 'large' }}\n\t\t\t\t\tgap={'0.5rem'}\n\t\t\t\t\tflexGrow={1}\n\t\t\t\t>\n\t\t\t\t\t<Tooltip\n\t\t\t\t\t\tlabel={t('settings.appearance.labels.decrease', 'Decrease', {\n\t\t\t\t\t\t\tcontext: scalingValue === 0 ? 'disabled' : ''\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Container width=\"fit\" height=\"fit\" minWidth={'fit-content'}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tdisabled={autoScaling || scalingValue === 0}\n\t\t\t\t\t\t\t\tlabel={t('settings.appearance.labels.a', 'A')}\n\t\t\t\t\t\t\t\ttype={'ghost'}\n\t\t\t\t\t\t\t\tsize={'extrasmall'}\n\t\t\t\t\t\t\t\tcolor={'text'}\n\t\t\t\t\t\t\t\tonClick={decreaseScalingByStep}\n\t\t\t\t\t\t\t\tminWidth={'fit-content'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t\t<Slider\n\t\t\t\t\t\tdisabled={autoScaling}\n\t\t\t\t\t\toptions={scalingOptionLabels}\n\t\t\t\t\t\tonChange={onChangeScalingValue}\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\tautoScaling && BASE_FONT_OPTION_INDEX >= 0 ? BASE_FONT_OPTION_INDEX : scalingValue\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Tooltip\n\t\t\t\t\t\tlabel={t('settings.appearance.labels.increase', 'Increase', {\n\t\t\t\t\t\t\tcontext: scalingValue === SCALING_OPTIONS.length - 1 ? 'disabled' : ''\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Container width=\"fit\" height=\"fit\" minWidth={'fit-content'}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tdisabled={autoScaling || scalingValue === SCALING_OPTIONS.length - 1}\n\t\t\t\t\t\t\t\tlabel={t('settings.appearance.labels.a', 'A')}\n\t\t\t\t\t\t\t\ttype={'ghost'}\n\t\t\t\t\t\t\t\tsize={'extralarge'}\n\t\t\t\t\t\t\t\tonClick={increaseScalingByStep}\n\t\t\t\t\t\t\t\tcolor={'text'}\n\t\t\t\t\t\t\t\tminWidth={'fit-content'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</ScalingSliderContainer>\n\t\t\t\t<Checkbox\n\t\t\t\t\tvalue={autoScaling}\n\t\t\t\t\tonClick={toggleAutoScaling}\n\t\t\t\t\tlabel={t(\n\t\t\t\t\t\t'settings.appearance.labels.choose_size_auto',\n\t\t\t\t\t\t'Automatically resize the text size depending on the device'\n\t\t\t\t\t)}\n\t\t\t\t\tsize={'small'}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t\t<ExampleContainer\n\t\t\t\tbackground={'gray5'}\n\t\t\t\tpadding={'large'}\n\t\t\t\tgap={'0.5rem'}\n\t\t\t\torientation={'vertical'}\n\t\t\t\tmainAlignment={'flex-start'}\n\t\t\t\tcrossAlignment={'flex-start'}\n\t\t\t\twidth={'fill'}\n\t\t\t\t$fontSize={exampleFontSize}\n\t\t\t>\n\t\t\t\t<ExampleText weight={'light'} overflow={'break-word'}>\n\t\t\t\t\t{exampleText}\n\t\t\t\t</ExampleText>\n\t\t\t\t<ExampleText weight={'regular'} overflow={'break-word'}>\n\t\t\t\t\t{exampleText}\n\t\t\t\t</ExampleText>\n\t\t\t\t<ExampleText weight={'bold'} overflow={'break-word'}>\n\t\t\t\t\t{exampleText}\n\t\t\t\t</ExampleText>\n\t\t\t</ExampleContainer>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { Checkbox, Container, FormSubSection } from '@zextras/carbonio-design-system';\n\nimport { AccountSettings, AddMod } from '../../../../types';\nimport { getT } from '../../../store/i18n';\nimport { searchPrefsSubSection } from '../../general-settings-sub-sections';\nimport { useReset } from '../../hooks/use-reset';\nimport { SettingsSectionProps, upsertPrefOnUnsavedChanges } from '../utils';\n\ntype SearchSettingsViewProps = SettingsSectionProps & {\n\tsettings: AccountSettings;\n\taddMod: AddMod;\n};\n\nexport const SearchSettings = ({\n\tsettings,\n\taddMod,\n\tresetRef\n}: SearchSettingsViewProps): JSX.Element => {\n\tconst t = getT();\n\tconst [searchInSpamFolder, setSearchInSpamFolder] = useState<boolean>(\n\t\tsettings.prefs.zimbraPrefIncludeSpamInSearch === 'TRUE'\n\t);\n\tconst [searchInTrashFolder, setSearchInTrashFolder] = useState<boolean>(\n\t\tsettings.prefs.zimbraPrefIncludeTrashInSearch === 'TRUE'\n\t);\n\tconst [searchInSharedFolder, setSearchInSharedFolder] = useState<boolean>(\n\t\tsettings.prefs.zimbraPrefIncludeSharedItemsInSearch === 'TRUE'\n\t);\n\tconst setMode = useMemo(() => upsertPrefOnUnsavedChanges(addMod), [addMod]);\n\n\tconst init = useCallback(() => {\n\t\tsetSearchInSpamFolder(settings.prefs.zimbraPrefIncludeSpamInSearch === 'TRUE');\n\t\tsetSearchInTrashFolder(settings.prefs.zimbraPrefIncludeTrashInSearch === 'TRUE');\n\t\tsetSearchInSharedFolder(settings.prefs.zimbraPrefIncludeSharedItemsInSearch === 'TRUE');\n\t}, [\n\t\tsettings.prefs.zimbraPrefIncludeSharedItemsInSearch,\n\t\tsettings.prefs.zimbraPrefIncludeSpamInSearch,\n\t\tsettings.prefs.zimbraPrefIncludeTrashInSearch\n\t]);\n\n\tuseReset(resetRef, init);\n\n\tuseEffect(() => {\n\t\tinit();\n\t}, [init]);\n\n\tconst onClickSpam = useCallback(() => {\n\t\tsetSearchInSpamFolder((prevState) => {\n\t\t\tconst newValue = !prevState;\n\t\t\tsetMode('zimbraPrefIncludeSpamInSearch', newValue);\n\t\t\treturn newValue;\n\t\t});\n\t}, [setMode]);\n\n\tconst onClickTrash = useCallback(() => {\n\t\tsetSearchInTrashFolder((prevState) => {\n\t\t\tconst newValue = !prevState;\n\t\t\tsetMode('zimbraPrefIncludeTrashInSearch', newValue);\n\t\t\treturn newValue;\n\t\t});\n\t}, [setMode]);\n\n\tconst onClickShared = useCallback(() => {\n\t\tsetSearchInSharedFolder((prevState) => {\n\t\t\tconst newValue = !prevState;\n\t\t\tsetMode('zimbraPrefIncludeSharedItemsInSearch', newValue);\n\t\t\treturn newValue;\n\t\t});\n\t}, [setMode]);\n\n\tconst sectionTitle = useMemo(() => searchPrefsSubSection(t), [t]);\n\n\treturn (\n\t\t<FormSubSection\n\t\t\tlabel={sectionTitle.label}\n\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\twidth=\"50%\"\n\t\t\tid={sectionTitle.id}\n\t\t>\n\t\t\t<Container crossAlignment=\"baseline\" padding={{ all: 'small' }}>\n\t\t\t\t<Checkbox\n\t\t\t\t\tlabel={t(\n\t\t\t\t\t\t'settings.search_settings.labels.include_search_in_spam_folder',\n\t\t\t\t\t\t'Include Spam Folder in Searches'\n\t\t\t\t\t)}\n\t\t\t\t\tvalue={searchInSpamFolder}\n\t\t\t\t\tonClick={onClickSpam}\n\t\t\t\t/>\n\t\t\t\t<Checkbox\n\t\t\t\t\tlabel={t(\n\t\t\t\t\t\t'settings.search_settings.labels.include_search_in_trash_folder',\n\t\t\t\t\t\t'Include Trash Folder in Searches'\n\t\t\t\t\t)}\n\t\t\t\t\tvalue={searchInTrashFolder}\n\t\t\t\t\tonClick={onClickTrash}\n\t\t\t\t/>\n\t\t\t\t<Checkbox\n\t\t\t\t\tlabel={t(\n\t\t\t\t\t\t'settings.search_settings.labels.include_search_in_shared_folder',\n\t\t\t\t\t\t'Include Shared Folder in Searches'\n\t\t\t\t\t)}\n\t\t\t\t\tvalue={searchInSharedFolder}\n\t\t\t\t\tonClick={onClickShared}\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t</FormSubSection>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC, useMemo } from 'react';\n\nimport { Container, FormSubSection, Quota, Text, Tooltip } from '@zextras/carbonio-design-system';\n\nimport { useUserSettings } from '../../../store/account/hooks';\nimport { useAccountStore } from '../../../store/account/store';\nimport { getT } from '../../../store/i18n';\nimport { quotaSubSection } from '../../general-settings-sub-sections';\n\ninterface UserQuotaProps {\n\tmobileView: boolean;\n}\n\nconst UserQuota: FC<UserQuotaProps> = ({ mobileView }) => {\n\tconst t = getT();\n\n\tconst settings = useUserSettings();\n\tconst used = useAccountStore((s) => s.usedQuota);\n\tconst quota = useMemo(() => {\n\t\tconst userQuota = Number(settings?.attrs?.zimbraMailQuota);\n\t\tif (used && userQuota && userQuota > 0) {\n\t\t\treturn Math.round((used / userQuota) * 100);\n\t\t}\n\t\treturn -1;\n\t}, [settings?.attrs?.zimbraMailQuota, used]);\n\n\tconst filledQuota = useMemo(() => {\n\t\tif (quota === -1 || quota >= 100) {\n\t\t\treturn 100;\n\t\t}\n\t\treturn quota;\n\t}, [quota]);\n\n\tconst description = useMemo(() => {\n\t\tswitch (true) {\n\t\t\tcase !quota || quota < 0:\n\t\t\t\treturn t('user_quota.unlimited', 'You have unlimited space available');\n\t\t\tcase quota === 100:\n\t\t\t\treturn t('user_quota.space_full', 'It seems that all available space is full');\n\t\t\tdefault:\n\t\t\t\treturn t('user_quota.limited', {\n\t\t\t\t\tdefaultValue: 'You have filled {{quota}}% of the available space',\n\t\t\t\t\tquota\n\t\t\t\t});\n\t\t}\n\t}, [quota, t]);\n\n\tconst fillBackground = useMemo(() => {\n\t\tswitch (true) {\n\t\t\tcase quota >= 95:\n\t\t\t\treturn 'error';\n\t\t\tcase quota >= 90:\n\t\t\t\treturn 'warning';\n\t\t\tcase quota === -1:\n\t\t\t\treturn 'gray4';\n\t\t\tdefault:\n\t\t\t\treturn 'primary';\n\t\t}\n\t}, [quota]);\n\tconst sectionTitle = useMemo(() => quotaSubSection(t), [t]);\n\treturn mobileView ? (\n\t\t<Container width=\"fit\" padding={{ right: 'medium' }}>\n\t\t\t<Tooltip label={description} placement=\"bottom\">\n\t\t\t\t<Quota fill={filledQuota} fillBackground={fillBackground} />\n\t\t\t</Tooltip>\n\t\t</Container>\n\t) : (\n\t\t<FormSubSection\n\t\t\tlabel={sectionTitle.label}\n\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\twidth=\"50%\"\n\t\t\tid={sectionTitle.id}\n\t\t>\n\t\t\t<Container width=\"fill\" padding={{ vertical: 'medium' }}>\n\t\t\t\t<Container\n\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\tpadding={{ bottom: 'medium' }}\n\t\t\t\t>\n\t\t\t\t\t<Text>{description}</Text>\n\t\t\t\t</Container>\n\t\t\t\t<Quota fill={filledQuota} fillBackground={fillBackground} />\n\t\t\t</Container>\n\t\t</FormSubSection>\n\t);\n};\n\nexport default UserQuota;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC, useCallback, useMemo } from 'react';\n\nimport {\n\tContainer,\n\tFormSubSection,\n\tModal,\n\tPadding,\n\tSelect,\n\tSingleSelectionOnChange,\n\tText\n} from '@zextras/carbonio-design-system';\nimport { find } from 'lodash';\n\nimport { localeList, timeZoneList } from './components/utils';\nimport { timezoneAndLanguageSubSection } from './general-settings-sub-sections';\nimport { AccountSettings, AddMod, PrefsMods } from '../../types';\nimport { getT } from '../store/i18n';\n\nconst LanguageAndTimeZone: FC<{\n\tsettings: AccountSettings;\n\topen: boolean;\n\tsetOpen: (arg: boolean) => void;\n\taddMod: AddMod;\n}> = ({ settings, addMod, open, setOpen }) => {\n\tconst t = getT();\n\tconst locales = useMemo(() => localeList(t), [t]);\n\tconst timezones = useMemo(() => timeZoneList(t), [t]);\n\tconst sectionTitle = useMemo(() => timezoneAndLanguageSubSection(t), [t]);\n\n\tconst updatePrefs = useCallback(\n\t\t(prefValue: PrefsMods[keyof PrefsMods], prefKey: keyof PrefsMods) => {\n\t\t\taddMod('prefs', prefKey, prefValue);\n\t\t},\n\t\t[addMod]\n\t);\n\n\tconst defaultLocale = useMemo(\n\t\t() =>\n\t\t\t(settings.prefs.zimbraPrefLocale &&\n\t\t\t\tfind(locales, { id: `${settings.prefs.zimbraPrefLocale}` })) ||\n\t\t\tfind(locales, { id: 'en' }),\n\t\t[locales, settings.prefs.zimbraPrefLocale]\n\t);\n\n\tconst onLocaleChange = useCallback<SingleSelectionOnChange>(\n\t\t(value) => {\n\t\t\tif (value && value !== settings.prefs.zimbraPrefLocale)\n\t\t\t\tupdatePrefs(value, 'zimbraPrefLocale');\n\t\t},\n\t\t[settings.prefs.zimbraPrefLocale, updatePrefs]\n\t);\n\n\tconst defaultTimeZone = useMemo(\n\t\t() =>\n\t\t\t(settings.prefs.zimbraPrefTimeZoneId &&\n\t\t\t\tfind(timezones, { value: `${settings.prefs.zimbraPrefTimeZoneId}` })) ||\n\t\t\tfind(timezones, { value: 'UTC' }),\n\t\t[timezones, settings.prefs.zimbraPrefTimeZoneId]\n\t);\n\n\tconst onTimeZoneChange = useCallback<SingleSelectionOnChange>(\n\t\t(value) => {\n\t\t\tif (value && value !== settings.prefs.zimbraPrefTimeZoneId)\n\t\t\t\tupdatePrefs(value, 'zimbraPrefTimeZoneId');\n\t\t},\n\t\t[settings.prefs.zimbraPrefTimeZoneId, updatePrefs]\n\t);\n\n\treturn (\n\t\t<FormSubSection\n\t\t\tlabel={sectionTitle.label}\n\t\t\tminWidth=\"calc(min(100%, 32rem))\"\n\t\t\twidth=\"50%\"\n\t\t\tid={sectionTitle.id}\n\t\t>\n\t\t\t<Container crossAlignment=\"baseline\" padding={{ all: 'small' }}>\n\t\t\t\t{Object.keys(settings.prefs).length > 0 && (\n\t\t\t\t\t<Select\n\t\t\t\t\t\titems={locales}\n\t\t\t\t\t\tbackground={'gray5'}\n\t\t\t\t\t\tlabel={t('label.language', 'Language')}\n\t\t\t\t\t\tonChange={onLocaleChange}\n\t\t\t\t\t\tdefaultSelection={defaultLocale}\n\t\t\t\t\t\tshowCheckbox={false}\n\t\t\t\t\t\tdropdownMaxHeight=\"12.5rem\"\n\t\t\t\t\t\tselectedBackgroundColor=\"highlight\"\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t<Padding top=\"small\" width=\"100%\">\n\t\t\t\t\t{Object.keys(settings.prefs).length > 0 && timezones && defaultTimeZone && (\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\titems={timezones}\n\t\t\t\t\t\t\tbackground={'gray5'}\n\t\t\t\t\t\t\tlabel={t('label.time_zone', 'Time Zone')}\n\t\t\t\t\t\t\tonChange={onTimeZoneChange}\n\t\t\t\t\t\t\tselection={defaultTimeZone}\n\t\t\t\t\t\t\tshowCheckbox={false}\n\t\t\t\t\t\t\tdropdownMaxHeight=\"12.5rem\"\n\t\t\t\t\t\t\tselectedBackgroundColor=\"highlight\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Padding>\n\t\t\t\t<Modal\n\t\t\t\t\ttitle={t('label.reload', 'Reload')}\n\t\t\t\t\topen={open}\n\t\t\t\t\tdismissLabel={t('label.no', 'No')}\n\t\t\t\t\tonConfirm={(): void => window.location.reload()}\n\t\t\t\t\tconfirmLabel={t('label.reload', 'Reload')}\n\t\t\t\t\tonClose={(): void => setOpen(false)}\n\t\t\t\t>\n\t\t\t\t\t<Text overflow=\"break-word\">\n\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t'message.reload',\n\t\t\t\t\t\t\t`\tWould you like to reload the application now to show the new language?\n\t\t\t\t\t\t\t(Otherwise, the new language will appear the next time you sign in.)`\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Text>\n\t\t\t\t</Modal>\n\t\t\t</Container>\n\t\t</FormSubSection>\n\t);\n};\n\nexport default LanguageAndTimeZone;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useMemo, useRef, useState } from 'react';\n\nimport { Container, useSnackbar } from '@zextras/carbonio-design-system';\nimport { findIndex, includes, isEmpty, map, reduce, size } from 'lodash';\n\nimport AppearanceSettings from './components/general-settings/appearance-settings';\nimport DarkThemeSettingSection from './components/general-settings/dark-theme-settings-section';\nimport { Logout } from './components/general-settings/logout';\nimport ModuleVersionSettings from './components/general-settings/module-version-settings';\nimport { OutOfOfficeSettings } from './components/general-settings/out-of-office-settings';\nimport { ScalingSettingSection } from './components/general-settings/scaling-setting-section';\nimport { SearchSettings } from './components/general-settings/search-settings';\nimport UserQuota from './components/general-settings/user-quota';\nimport SettingsHeader, { SettingsHeaderProps } from './components/settings-header';\nimport { ResetComponentImperativeHandler } from './components/utils';\nimport LanguageAndTimeZoneSettings from './language-and-timezone-settings';\nimport {\n\tAccountState,\n\tAddMod,\n\tBatchRequest,\n\tModifyPrefsRequest,\n\tModifyPrefsResponse,\n\tModifyPropertiesRequest,\n\tModifyPropertiesResponse,\n\tMods,\n\tRemoveMod\n} from '../../types';\nimport { ScalingSettings } from '../../types/settings';\nimport { LOCAL_STORAGE_SETTINGS_KEY, SHELL_APP_ID } from '../constants';\nimport { getSoapFetch } from '../network/fetch';\nimport { useLocalStorage } from '../shell/hooks/useLocalStorage';\nimport { useAccountStore, useUserSettings } from '../store/account';\nimport { getT } from '../store/i18n';\n\nconst GeneralSettings = (): JSX.Element => {\n\tconst [mods, setMods] = useState<Mods>({});\n\tconst t = getT();\n\tconst userSettings = useUserSettings();\n\tconst [localStorageUnAppliedChanges, setLocalStorageUnAppliedChanges] = useState<ScalingSettings>(\n\t\t{}\n\t);\n\tconst [localStorageSettings, setLocalStorageSettings] = useLocalStorage<ScalingSettings>(\n\t\tLOCAL_STORAGE_SETTINGS_KEY,\n\t\t{}\n\t);\n\tconst [open, setOpen] = useState(false);\n\n\tconst addLocalStoreChange = useCallback((key, value) => {\n\t\tsetLocalStorageUnAppliedChanges((prevState) => ({\n\t\t\t...prevState,\n\t\t\t[key]: value\n\t\t}));\n\t}, []);\n\n\tconst cleanLocalStoreChange = useCallback<(key: keyof ScalingSettings) => void>((key) => {\n\t\tsetLocalStorageUnAppliedChanges((prevState) => {\n\t\t\tconst nextState = { ...prevState };\n\t\t\tdelete nextState[key];\n\t\t\treturn nextState;\n\t\t});\n\t}, []);\n\n\tconst addMod = useCallback<AddMod>((type, key, value) => {\n\t\tsetMods((prevState) => ({\n\t\t\t...prevState,\n\t\t\t[type]: {\n\t\t\t\t...prevState?.[type],\n\t\t\t\t[key]: value\n\t\t\t}\n\t\t}));\n\t}, []);\n\n\tconst removeMod = useCallback<RemoveMod>((type, key) => {\n\t\tsetMods((prevState) => {\n\t\t\tconst prevType = prevState[type];\n\t\t\tif (prevType && prevType[key] !== undefined) {\n\t\t\t\tconst nextState = { ...prevState, [type]: { ...prevState[type] } };\n\t\t\t\tconst nextType = nextState[type];\n\t\t\t\tif (nextType && nextType[key] !== undefined) {\n\t\t\t\t\tdelete nextType[key];\n\t\t\t\t}\n\t\t\t\tif (size(nextState[type]) === 0) {\n\t\t\t\t\tdelete nextState[type];\n\t\t\t\t}\n\t\t\t\treturn nextState;\n\t\t\t}\n\t\t\treturn prevState;\n\t\t});\n\t}, []);\n\tconst createSnackbar = useSnackbar();\n\n\tconst onSave = useCallback<SettingsHeaderProps['onSave']>(() => {\n\t\tsetLocalStorageUnAppliedChanges((unAppliedPrevState) => {\n\t\t\tif (size(unAppliedPrevState) > 0) {\n\t\t\t\tsetLocalStorageSettings((localStorageSettingsPrevState) => ({\n\t\t\t\t\t...localStorageSettingsPrevState,\n\t\t\t\t\t...unAppliedPrevState\n\t\t\t\t}));\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\treturn unAppliedPrevState;\n\t\t});\n\t\tif (size(mods) > 0) {\n\t\t\tlet modifyPropertiesRequest: ModifyPropertiesRequest | undefined;\n\t\t\tif (mods.props) {\n\t\t\t\tconst mappedProperties = map(\n\t\t\t\t\tmods.props,\n\t\t\t\t\t(prop, key): ModifyPropertiesRequest['prop'][0] => ({\n\t\t\t\t\t\tname: key,\n\t\t\t\t\t\tzimlet: prop.app,\n\t\t\t\t\t\t_content: prop.value\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tmodifyPropertiesRequest = { _jsns: 'urn:zimbraAccount', prop: mappedProperties };\n\t\t\t}\n\n\t\t\tlet modifyPrefsRequest: ModifyPrefsRequest | undefined;\n\n\t\t\tif (mods.prefs) {\n\t\t\t\tconst attrs = mods.prefs;\n\t\t\t\tif ('zimbraPrefMailTrustedSenderList' in attrs) {\n\t\t\t\t\tattrs.zimbraPrefMailTrustedSenderList =\n\t\t\t\t\t\tattrs.zimbraPrefMailTrustedSenderList instanceof Array &&\n\t\t\t\t\t\tattrs.zimbraPrefMailTrustedSenderList.length === 0\n\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t: attrs.zimbraPrefMailTrustedSenderList;\n\t\t\t\t}\n\t\t\t\tmodifyPrefsRequest = { _jsns: 'urn:zimbraAccount', _attrs: attrs };\n\t\t\t}\n\n\t\t\tconst promise = getSoapFetch(SHELL_APP_ID)<\n\t\t\t\tBatchRequest,\n\t\t\t\t{\n\t\t\t\t\tModifyPropertiesResponse?: ModifyPropertiesResponse;\n\t\t\t\t\tModifyPrefsResponse?: ModifyPrefsResponse;\n\t\t\t\t}\n\t\t\t>('Batch', {\n\t\t\t\t_jsns: 'urn:zimbra',\n\t\t\t\tModifyPropertiesRequest: modifyPropertiesRequest,\n\t\t\t\tModifyPrefsRequest: modifyPrefsRequest\n\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tuseAccountStore.setState((s: AccountState) => ({\n\t\t\t\t\t\tsettings: {\n\t\t\t\t\t\t\t...s.settings,\n\t\t\t\t\t\t\tprefs: reduce(\n\t\t\t\t\t\t\t\tmods.prefs,\n\t\t\t\t\t\t\t\t(acc, pref, key) => ({\n\t\t\t\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t\t\t\t[key]: pref as string\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\ts.settings.prefs\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tprops: reduce(\n\t\t\t\t\t\t\t\tmods.props,\n\t\t\t\t\t\t\t\t(acc, { app, value }, key) => {\n\t\t\t\t\t\t\t\t\tconst propIndex = findIndex(acc, (p) => p.name === key && p.zimlet === app);\n\t\t\t\t\t\t\t\t\tif (propIndex >= 0) {\n\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\t\t\t\t\tacc[propIndex] = {\n\t\t\t\t\t\t\t\t\t\t\tname: key,\n\t\t\t\t\t\t\t\t\t\t\tzimlet: app,\n\t\t\t\t\t\t\t\t\t\t\t_content: value as string\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tacc.push({\n\t\t\t\t\t\t\t\t\t\t\tname: key,\n\t\t\t\t\t\t\t\t\t\t\tzimlet: app,\n\t\t\t\t\t\t\t\t\t\t\t_content: value as string\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn acc;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ts.settings.props\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\n\t\t\t\t\tif (mods.prefs && includes(Object.keys(mods.prefs), 'zimbraPrefLocale')) {\n\t\t\t\t\t\tsetOpen(true);\n\t\t\t\t\t}\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: `new`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\tlabel: t('message.snackbar.settings_saved', 'Edits saved correctly'),\n\t\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\t\thideButton: true\n\t\t\t\t\t});\n\t\t\t\t\tsetMods({});\n\t\t\t\t})\n\t\t\t\t.catch((error: unknown) => {\n\t\t\t\t\tcreateSnackbar({\n\t\t\t\t\t\tkey: `new`,\n\t\t\t\t\t\treplace: true,\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\tlabel: t('snackbar.error', 'Something went wrong, please try again'),\n\t\t\t\t\t\tautoHideTimeout: 3000,\n\t\t\t\t\t\thideButton: true\n\t\t\t\t\t});\n\t\t\t\t\tif (error instanceof Error) {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t\tthrow new Error(typeof error === 'string' ? error : 'edit setting error');\n\t\t\t\t});\n\t\t\treturn Promise.allSettled([promise]);\n\t\t}\n\t\treturn Promise.allSettled([Promise.resolve()]);\n\t}, [mods, setLocalStorageSettings, createSnackbar, t]);\n\n\tconst scalingSettingSectionRef = useRef<ResetComponentImperativeHandler>(null);\n\tconst outOfOfficeSettingsSectionRef = useRef<ResetComponentImperativeHandler>(null);\n\tconst searchSettingsSectionRef = useRef<ResetComponentImperativeHandler>(null);\n\n\tconst onCancel = useCallback(() => {\n\t\tsetMods({});\n\t\tif (size(localStorageUnAppliedChanges) > 0) {\n\t\t\tscalingSettingSectionRef.current?.reset();\n\t\t}\n\t\toutOfOfficeSettingsSectionRef.current?.reset();\n\t\tsearchSettingsSectionRef?.current?.reset();\n\t}, [localStorageUnAppliedChanges]);\n\n\tconst isDirty = useMemo(\n\t\t() => !isEmpty(mods) || !isEmpty(localStorageUnAppliedChanges),\n\t\t[mods, localStorageUnAppliedChanges]\n\t);\n\n\tconst title = useMemo(() => t('settings.general.general', 'General Settings'), [t]);\n\n\treturn (\n\t\t<>\n\t\t\t<SettingsHeader title={title} onCancel={onCancel} onSave={onSave} isDirty={isDirty} />\n\t\t\t<Container\n\t\t\t\tbackground={'gray5'}\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tcrossAlignment={'flex-start'}\n\t\t\t\tgap=\"0.5rem\"\n\t\t\t\tpadding={{ all: 'medium' }}\n\t\t\t\tstyle={{ overflow: 'auto' }}\n\t\t\t>\n\t\t\t\t<AppearanceSettings>\n\t\t\t\t\t<ScalingSettingSection\n\t\t\t\t\t\tresetRef={scalingSettingSectionRef}\n\t\t\t\t\t\tscalingSettings={localStorageSettings}\n\t\t\t\t\t\taddLocalStoreChange={addLocalStoreChange}\n\t\t\t\t\t\tcleanLocalStoreChange={cleanLocalStoreChange}\n\t\t\t\t\t/>\n\t\t\t\t\t<DarkThemeSettingSection addMod={addMod} removeMod={removeMod} />\n\t\t\t\t</AppearanceSettings>\n\t\t\t\t<LanguageAndTimeZoneSettings\n\t\t\t\t\tsettings={userSettings}\n\t\t\t\t\taddMod={addMod}\n\t\t\t\t\topen={open}\n\t\t\t\t\tsetOpen={setOpen}\n\t\t\t\t/>\n\n\t\t\t\t<OutOfOfficeSettings\n\t\t\t\t\tsettings={userSettings}\n\t\t\t\t\taddMod={addMod}\n\t\t\t\t\tresetRef={outOfOfficeSettingsSectionRef}\n\t\t\t\t/>\n\t\t\t\t<SearchSettings\n\t\t\t\t\tsettings={userSettings}\n\t\t\t\t\taddMod={addMod}\n\t\t\t\t\tresetRef={searchSettingsSectionRef}\n\t\t\t\t/>\n\t\t\t\t<ModuleVersionSettings />\n\t\t\t\t<UserQuota mobileView={false} />\n\t\t\t\t<Logout />\n\t\t\t</Container>\n\t\t</>\n\t);\n};\n\nexport default GeneralSettings;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC, useMemo } from 'react';\n\nimport { Accordion, IconButton, Tooltip } from '@zextras/carbonio-design-system';\nimport { map } from 'lodash';\nimport { useHistory, useLocation } from 'react-router-dom';\n\nimport { SETTINGS_APP_ID } from '../constants';\nimport { useAppStore } from '../store/app';\n\nexport const SettingsSidebar: FC<{ expanded: boolean }> = ({ expanded }) => {\n\tconst settingsViews = useAppStore((s) => s.views.settings);\n\tconst history = useHistory();\n\tconst location = useLocation();\n\tconst items = useMemo(\n\t\t() =>\n\t\t\tsettingsViews.map((view) => ({\n\t\t\t\tid: view.route,\n\t\t\t\tlabel: view.label,\n\t\t\t\ticon: view.icon,\n\t\t\t\tactive: location.pathname === `/${SETTINGS_APP_ID}/${view.route}` && location.search === '',\n\t\t\t\tdisableHover:\n\t\t\t\t\tlocation.pathname === `/${SETTINGS_APP_ID}/${view.route}` && location.search === '',\n\t\t\t\tonClick: (e: KeyboardEvent | React.SyntheticEvent): void => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\thistory.push(`/${SETTINGS_APP_ID}/${view.route}`);\n\t\t\t\t},\n\t\t\t\titems: map(view.subSections, (item) => ({\n\t\t\t\t\t...item,\n\t\t\t\t\tactive: location.search === `?section=${item.id}`,\n\t\t\t\t\tdisableHover: location.search === `?section=${item.id}`,\n\t\t\t\t\tonClick: (e: KeyboardEvent | React.SyntheticEvent): void => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\thistory.replace(`/${SETTINGS_APP_ID}/${view.route}?section=${item.id}`);\n\t\t\t\t\t}\n\t\t\t\t}))\n\t\t\t})),\n\t\t[history, location.pathname, location.search, settingsViews]\n\t);\n\tconst collapsedItems = useMemo(\n\t\t() =>\n\t\t\tsettingsViews.map((v) => (\n\t\t\t\t<Tooltip label={v.label} placement=\"right\" key={v.id}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\ticon={v.icon}\n\t\t\t\t\t\t\tonClick={(): void => history.push(`/${SETTINGS_APP_ID}/${v.route}`)}\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Tooltip>\n\t\t\t)),\n\t\t[history, settingsViews]\n\t);\n\treturn expanded ? <Accordion items={items} /> : <>{collapsedItems}</>;\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n/* eslint-disable no-param-reassign */\n\nimport type { TFunction } from 'i18next';\nimport produce from 'immer';\nimport { size } from 'lodash';\n\nimport type { AppState, PrimaryBarView, SettingsView } from '../../../types';\nimport { SEARCH_APP_ID, SETTINGS_APP_ID, SHELL_APP_ID } from '../../constants';\nimport Feedback from '../../reporting/feedback';\nimport { SearchAppView } from '../../search/search-app-view';\nimport { AccountsSettings } from '../../settings/accounts-settings';\nimport GeneralSettings from '../../settings/general-settings';\nimport { settingsSubSections } from '../../settings/general-settings-sub-sections';\nimport { SettingsAppView } from '../../settings/settings-app-view';\nimport { SettingsSidebar } from '../../settings/settings-sidebar';\nimport { useAccountStore } from '../../store/account';\nimport { useAppStore } from '../../store/app';\n\nconst settingsRoute = {\n\troute: SETTINGS_APP_ID,\n\tid: SETTINGS_APP_ID,\n\tapp: SETTINGS_APP_ID\n};\n\nconst settingsPrimaryBar = (t: TFunction): PrimaryBarView => ({\n\tid: SETTINGS_APP_ID,\n\tapp: SETTINGS_APP_ID,\n\troute: SETTINGS_APP_ID,\n\tcomponent: 'SettingsModOutline',\n\tposition: 16,\n\tvisible: true,\n\tlabel: t('settings.app', 'Settings'),\n\tbadge: {\n\t\tshow: false\n\t}\n});\nconst settingsSecondaryBar = {\n\tid: SETTINGS_APP_ID,\n\tapp: SETTINGS_APP_ID,\n\troute: SETTINGS_APP_ID,\n\tcomponent: SettingsSidebar\n};\n\nconst settingsAppView = {\n\tid: SETTINGS_APP_ID,\n\tapp: SETTINGS_APP_ID,\n\troute: SETTINGS_APP_ID,\n\tcomponent: SettingsAppView\n};\nconst settingsGeneralView = (t: TFunction): SettingsView => ({\n\tid: 'general',\n\troute: 'general',\n\tapp: SHELL_APP_ID,\n\tcomponent: GeneralSettings,\n\ticon: 'SettingsModOutline',\n\tlabel: t('settings.general.general', 'General Settings'),\n\tposition: 1,\n\tsubSections: settingsSubSections(t)\n});\n\nconst settingsAccountsView = (t: TFunction): SettingsView => ({\n\tid: 'accounts',\n\troute: 'accounts',\n\tapp: SHELL_APP_ID,\n\tcomponent: AccountsSettings,\n\ticon: 'PersonOutline',\n\tlabel: t('settings.accounts', 'Accounts'),\n\tposition: 1\n});\n\nconst searchRoute = {\n\troute: SEARCH_APP_ID,\n\tid: SEARCH_APP_ID,\n\tapp: SEARCH_APP_ID\n};\nconst searchPrimaryBar = (t: TFunction): PrimaryBarView => ({\n\tid: SEARCH_APP_ID,\n\tapp: SEARCH_APP_ID,\n\troute: SEARCH_APP_ID,\n\tcomponent: 'SearchModOutline',\n\tposition: 15,\n\tvisible: true,\n\tlabel: t('search.app', 'Search'),\n\tbadge: {\n\t\tshow: false\n\t}\n});\nconst searchAppView = {\n\tid: SEARCH_APP_ID,\n\tapp: SEARCH_APP_ID,\n\troute: SEARCH_APP_ID,\n\tcomponent: SearchAppView\n};\n\nconst feedbackBoardView = {\n\tid: 'feedback',\n\tapp: SHELL_APP_ID,\n\tcomponent: Feedback,\n\troute: 'feedback'\n};\nexport const registerDefaultViews = (t: TFunction): void => {\n\tuseAppStore.setState(\n\t\tproduce((s: AppState) => {\n\t\t\tconst { attrs } = useAccountStore.getState().settings;\n\t\t\tif (size(attrs) === 0 || attrs.zimbraFeatureOptionsEnabled === 'FALSE') {\n\t\t\t\ts.routes = {\n\t\t\t\t\t[SEARCH_APP_ID]: searchRoute\n\t\t\t\t};\n\t\t\t\ts.views.primaryBar = [searchPrimaryBar(t)];\n\t\t\t\ts.views.appView = [searchAppView];\n\t\t\t} else {\n\t\t\t\ts.routes = {\n\t\t\t\t\t[SEARCH_APP_ID]: searchRoute,\n\t\t\t\t\t[SETTINGS_APP_ID]: settingsRoute\n\t\t\t\t};\n\t\t\t\ts.views.primaryBar = [searchPrimaryBar(t), settingsPrimaryBar(t)];\n\t\t\t\ts.views.secondaryBar = [settingsSecondaryBar];\n\t\t\t\ts.views.appView = [searchAppView, settingsAppView];\n\t\t\t\ts.views.settings = [settingsGeneralView(t), settingsAccountsView(t)];\n\t\t\t}\n\t\t\ts.views.board = [feedbackBoardView];\n\t\t})\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC, useMemo } from 'react';\n\nimport { map } from 'lodash';\nimport { Redirect, Route, Switch } from 'react-router-dom';\n\nimport AppContextProvider from '../boot/app/app-context-provider';\nimport { SETTINGS_APP_ID } from '../constants';\nimport { useAppStore } from '../store/app';\n\nexport const SettingsAppView: FC = () => {\n\tconst settingsViews = useAppStore((s) => s.views.settings);\n\tconst routes = useMemo(\n\t\t() =>\n\t\t\tmap(settingsViews, (view) => (\n\t\t\t\t<Route key={view.route} exact path={`/${SETTINGS_APP_ID}/${view.route}`}>\n\t\t\t\t\t<AppContextProvider pkg={view.app}>\n\t\t\t\t\t\t<view.component />\n\t\t\t\t\t</AppContextProvider>\n\t\t\t\t</Route>\n\t\t\t)),\n\t\t[settingsViews]\n\t);\n\treturn (\n\t\t<Switch>\n\t\t\t{routes}\n\t\t\t<Redirect from={`/${SETTINGS_APP_ID}`} exact strict to={`/${SETTINGS_APP_ID}/general`} />\n\t\t</Switch>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { useEffect } from 'react';\n\nimport { reduce } from 'lodash';\nimport { create } from 'zustand';\n\nimport type { ContextBridgeState } from '../../types';\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useContextBridge = create<ContextBridgeState>()((set) => ({\n\tpackageDependentFunctions: {},\n\tfunctions: {},\n\tadd: ({ packageDependentFunctions, functions }): void => {\n\t\tset((s) => ({\n\t\t\tpackageDependentFunctions: reduce(\n\t\t\t\tpackageDependentFunctions ?? {},\n\t\t\t\t(acc, f, key) => {\n\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\tacc[key] = f;\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\ts.packageDependentFunctions\n\t\t\t),\n\t\t\tfunctions: reduce(\n\t\t\t\tfunctions ?? {},\n\t\t\t\t(acc, f, key) => {\n\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\tacc[key] = f;\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\ts.functions\n\t\t\t)\n\t\t}));\n\t}\n}));\n\nexport const useBridge = (content: Partial<Omit<ContextBridgeState, 'add'>>): void => {\n\tconst addFunctions = useContextBridge(({ add }) => add);\n\tuseEffect(() => {\n\t\taddFunctions(content);\n\t}, [content, addFunctions]);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { useMemo, useCallback } from 'react';\n\nimport { To } from 'history';\nimport { find, startsWith, replace, trim } from 'lodash';\nimport { useLocation, useHistory } from 'react-router-dom';\n\nimport { AppRoute, HistoryParams } from '../../types';\nimport { SEARCH_APP_ID } from '../constants';\nimport { useSearchStore } from '../search/search-store';\nimport { useRoutes, getRoutes } from '../store/app';\nimport { useContextBridge } from '../store/context-bridge';\n\nexport const useCurrentRoute = (): AppRoute | undefined => {\n\tconst location = useLocation();\n\tconst routes = useRoutes();\n\treturn useMemo(\n\t\t() => find(routes, ({ route }) => startsWith(trim(location.pathname, '/'), route)),\n\t\t[location.pathname, routes]\n\t);\n};\nexport const getCurrentRoute = (): AppRoute | undefined => {\n\tconst history = useContextBridge.getState().functions.getHistory?.();\n\tconst routes = getRoutes();\n\tconst route = find(routes, (r) => startsWith(trim(history.location.pathname, '/'), r.route));\n\tif (route?.route === SEARCH_APP_ID) {\n\t\treturn {\n\t\t\t...route,\n\t\t\troute: `${route.route}/${useSearchStore.getState().module}`\n\t\t};\n\t}\n\treturn route;\n};\n\nexport const parseParams = (params: HistoryParams): To => {\n\tif (typeof params === 'string') {\n\t\treturn replace(`/${getCurrentRoute()?.route}/${params}`, '//', '/');\n\t}\n\tconst routeToApply = params.route\n\t\t? find(getRoutes(), (r) => r.id === params.route || r.route === params.route)\n\t\t: getCurrentRoute();\n\treturn typeof params.path === 'string'\n\t\t? replace(`/${routeToApply?.route}/${params.path}`, '//', '/')\n\t\t: {\n\t\t\t\tsearch: params.path.search,\n\t\t\t\thash: params.path.hash,\n\t\t\t\tpathname: replace(`/${routeToApply?.route}/${params.path.pathname}`, '//', '/')\n\t\t  };\n};\n\nexport const usePushHistoryCallback = (): ((params: HistoryParams) => void) => {\n\tconst history = useHistory();\n\treturn useCallback((params: HistoryParams): void => history.push(parseParams(params)), [history]);\n};\n\nexport const useReplaceHistoryCallback = (): ((params: HistoryParams) => void) => {\n\tconst history = useHistory();\n\treturn useCallback(\n\t\t(params: HistoryParams): void => history.replace(parseParams(params)),\n\t\t[history]\n\t);\n};\n\nexport function useGoBackHistoryCallback(): () => void {\n\tconst history = useHistory();\n\treturn history.goBack;\n}\n\nexport const pushHistory = (params: HistoryParams): void => {\n\tconst history = useContextBridge.getState().functions.getHistory?.();\n\thistory.push(parseParams(params));\n};\n\nexport const replaceHistory = (params: HistoryParams): void => {\n\tconst history = useContextBridge.getState().functions.getHistory?.();\n\thistory.replace(parseParams(params));\n};\n\nexport const goBackHistory = (): void =>\n\tuseContextBridge.getState().functions.getHistory?.().goBack();\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { getSoapFetch } from './fetch';\nimport {\n\tCreateTagRequest,\n\tCreateTagResponse,\n\tTagActionRequest,\n\tTagActionResponse\n} from '../../types';\nimport { Tag } from '../../types/tags';\nimport { SHELL_APP_ID } from '../constants';\n\nexport const createTag = (tag: Omit<Tag, 'id'>): Promise<CreateTagResponse> =>\n\tgetSoapFetch(SHELL_APP_ID)<CreateTagRequest, CreateTagResponse>('CreateTag', {\n\t\t_jsns: 'urn:zimbraMail',\n\t\ttag\n\t});\nexport const deleteTag = (id: string): Promise<TagActionResponse> =>\n\tgetSoapFetch(SHELL_APP_ID)<TagActionRequest, TagActionResponse>('TagAction', {\n\t\t_jsns: 'urn:zimbraMail',\n\t\taction: { op: 'delete', id }\n\t});\n\nexport const renameTag = (id: string, name: string): Promise<TagActionResponse> =>\n\tgetSoapFetch(SHELL_APP_ID)<TagActionRequest, TagActionResponse>('TagAction', {\n\t\t_jsns: 'urn:zimbraMail',\n\t\taction: { op: 'rename', id, name }\n\t});\n\nexport const changeTagColor = (id: string, color: string | number): Promise<TagActionResponse> =>\n\tgetSoapFetch(SHELL_APP_ID)<TagActionRequest, TagActionResponse>('TagAction', {\n\t\t_jsns: 'urn:zimbraMail',\n\t\taction: typeof color === 'number' ? { op: 'color', color, id } : { op: 'color', rgb: color, id }\n\t});\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useLoginConfigStore } from './store';\n\nexport function getFavicon(): string {\n\treturn useLoginConfigStore.getState().carbonioWebUiFavicon;\n}\n\nexport function getClientTitle(): string {\n\treturn useLoginConfigStore.getState().carbonioWebUiTitle;\n}\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { debounce, noop } from 'lodash';\n\nimport defaultAudio from '../../assets/notification.mp3';\nimport type {\n\tAudioNotificationConfig,\n\tINotificationManager,\n\tNotificationConfig,\n\tPopupNotificationConfig\n} from '../../types';\nimport { getFavicon } from '../store/login/getters';\n\n/**\n * The main goals of the NotificationManager are:\n * - to provide a single and rich implementation for all the Carbonio modules,\n *   reducing the boilerplate code needed to send a notification to the user\n * - to optimize the audio notifications avoiding to spam the same sound file\n *   in a short period of time\n * - to act as a collector for all the notification (for possible future\n *   implementations)\n *\n * In order to reduce the effort needed to send a notification the class\n * provided a set of default values/assets (e.g. icon, sound, title, ...)\n *\n * The class is provided as a singleton\n */\nexport class NotificationManager implements INotificationManager {\n\tprivate static instance: NotificationManager;\n\n\t/**\n\t * Minimum time (ms) to wait before the same audio file will be played\n\t * @private\n\t */\n\tprivate static DEBOUNCE_TIME = 1000;\n\n\t/**\n\t * Default configuration for the popup-only notification\n\t * @private\n\t */\n\tprivate PopupNotificationDefaultConfig = {\n\t\ttitle: '',\n\t\tvibrate: [200, 100, 200],\n\t\ticon: getFavicon()\n\t};\n\n\t/**\n\t * Default configuration for the audio-only notification\n\t * @private\n\t */\n\tprivate AudioNotificationDefaultConfig: AudioNotificationConfig = {\n\t\tsound: defaultAudio\n\t};\n\n\t/**\n\t * Default configuration for a notification with both popup and audio\n\t * @private\n\t */\n\tprivate NotificationDefaultConfig: NotificationConfig = {\n\t\t...this.PopupNotificationDefaultConfig,\n\t\t...this.AudioNotificationDefaultConfig,\n\t\tshowPopup: true,\n\t\tplaySound: false\n\t};\n\n\t/**\n\t * Map of functions to play a specific audio file\n\t * @private\n\t */\n\tprivate functions = new Map<string, () => void>();\n\n\t/**\n\t * Gets or creates the (debounced) function to play the audio file\n\t * @param sound - relative path to the audio file to play\n\t */\n\tprivate getAudioFileFunction = (sound: string): (() => void) => {\n\t\tif (!this.functions.has(sound)) {\n\t\t\tthis.functions.set(\n\t\t\t\tsound,\n\t\t\t\tdebounce(() => {\n\t\t\t\t\tnew Audio(sound).play().then();\n\t\t\t\t\tthis.functions.delete(sound);\n\t\t\t\t}, NotificationManager.DEBOUNCE_TIME)\n\t\t\t);\n\t\t}\n\t\tconst result = this.functions.get(sound);\n\t\treturn result ?? noop;\n\t};\n\n\t/**\n\t * Executes the debounced function to play the audio file\n\t * @param config - Configuration for the audio notification. In case of\n\t * missing properties default values are used\n\t */\n\tpublic playSound = (config: AudioNotificationConfig): void => {\n\t\tconst defConfig = {\n\t\t\t...this.AudioNotificationDefaultConfig,\n\t\t\t...config\n\t\t};\n\t\tif (!defConfig.sound) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getAudioFileFunction(defConfig.sound)();\n\t};\n\n\t/**\n\t * Shows a popup notification\n\t * @param config - Configuration for the popup notification. In case of\n\t * missing properties default values are used\n\t */\n\tpublic showPopup = (config: PopupNotificationConfig): void => {\n\t\tconst defConfig = {\n\t\t\t...this.PopupNotificationDefaultConfig,\n\t\t\t...config\n\t\t};\n\n\t\tconst n = new Notification(defConfig.title, {\n\t\t\tbody: defConfig.message,\n\t\t\tvibrate: defConfig.vibrate,\n\t\t\ticon: defConfig.icon,\n\t\t\ttag: defConfig?.tag\n\t\t});\n\n\t\tif (defConfig.onClick) {\n\t\t\tn.addEventListener('click', defConfig.onClick);\n\t\t}\n\t};\n\n\t/**\n\t * Sends a popup/audio notification to the user\n\t * @param config - Configuration for the notification. In case of\n\t * missing properties default values are used\n\t */\n\tpublic notify = (config: NotificationConfig): void => {\n\t\tconst defConfig = {\n\t\t\t...this.NotificationDefaultConfig,\n\t\t\t...config\n\t\t};\n\n\t\tif (defConfig?.showPopup) {\n\t\t\tthis.showPopup(defConfig);\n\t\t}\n\n\t\tif (defConfig?.playSound) {\n\t\t\tthis.playSound(defConfig);\n\t\t}\n\t};\n\n\t/**\n\t * Sends multiple notifications\n\t * @param config - Array of configurations for the notifications. In case of\n\t * missing properties default values are used\n\t */\n\tpublic multipleNotify = (config: NotificationConfig[]): void => {\n\t\tconfig.forEach((conf) => this.notify(conf));\n\t};\n\n\t/**\n\t * Return the singleton instance\n\t */\n\tpublic static getInstance(): NotificationManager {\n\t\tif (!NotificationManager.instance) {\n\t\t\tNotificationManager.instance = new NotificationManager();\n\t\t}\n\n\t\treturn NotificationManager.instance;\n\t}\n}\n\nexport const getNotificationManager = (): INotificationManager => NotificationManager.getInstance();\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useSearchStore } from './search-store';\nimport { QueryChip } from '../../types';\nimport { SEARCH_APP_ID } from '../constants';\nimport { pushHistory } from '../history/hooks';\n\nexport const runSearch = (query: Array<QueryChip>, module: string): void => {\n\tuseSearchStore.setState({ query, module, searchDisabled: false });\n\tpushHistory({ route: SEARCH_APP_ID, path: `/${module}` });\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { createContext } from 'react';\n\nconst ShellContext = createContext({ isMobile: true });\n\nexport default ShellContext;\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { useContext } from 'react';\n\nimport ShellContext from '../shell-context';\n\nexport function useIsMobile(): boolean {\n\tconst { isMobile } = useContext(ShellContext);\n\treturn isMobile;\n}\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, useCallback, useMemo, useRef } from 'react';\n\nimport { Editor, IAllProps as EditorProps } from '@tinymce/tinymce-react';\nimport { Container } from '@zextras/carbonio-design-system';\nimport styled from 'styled-components';\nimport type { EditorOptions, TinyMCE, Ui } from 'tinymce/tinymce';\n// TinyMCE so the global var exists\nimport tinymce from 'tinymce/tinymce';\nimport 'tinymce/models/dom';\n// Theme\nimport 'tinymce/themes/silver';\n// Toolbar icons\nimport 'tinymce/icons/default';\n// Editor styles\nimport 'tinymce/skins/ui/oxide/skin.min.css';\n// importing the plugin js.\nimport 'tinymce/plugins/advlist';\nimport 'tinymce/plugins/anchor';\nimport 'tinymce/plugins/autolink';\nimport 'tinymce/plugins/autoresize';\nimport 'tinymce/plugins/charmap';\nimport 'tinymce/plugins/code';\nimport 'tinymce/plugins/directionality';\nimport 'tinymce/plugins/fullscreen';\nimport 'tinymce/plugins/help';\nimport 'tinymce/plugins/image';\nimport 'tinymce/plugins/insertdatetime';\nimport 'tinymce/plugins/link';\nimport 'tinymce/plugins/lists';\nimport 'tinymce/plugins/media';\nimport 'tinymce/plugins/preview';\nimport 'tinymce/plugins/quickbars';\nimport 'tinymce/plugins/searchreplace';\nimport 'tinymce/plugins/table';\nimport 'tinymce/plugins/visualblocks';\nimport 'tinymce/plugins/wordcount';\n\nimport { useUserSettings } from '../account';\nimport { getT, useI18nStore } from '../i18n';\n\ntype ComposerProps = EditorProps & {\n\t/** The callback invoked when an edit is performed into the editor. `([text, html]) => {}` */\n\tonEditorChange?: (values: [string, string]) => void;\n\t/** Enable the distraction-free mode */\n\tinline?: boolean;\n\t/** The initial content of the editor */\n\tinitialValue?: EditorProps['initialValue'];\n\t/** The content of the editor (controlled mode) */\n\tvalue?: EditorProps['value'];\n\t/**\n\t * Callback called when user choose some file from the os.\n\t * If defined, a menu item to add inline images is added to the composer.\n\t */\n\tonFileSelect?: (arg: { editor: TinyMCE; files: HTMLInputElement['files'] | undefined }) => void;\n\tcustomInitOptions?: Partial<EditorProps['init']>;\n};\n\nexport const FileInput = styled.input`\n\tdisplay: none;\n`;\n\nconst Composer: FC<ComposerProps> = ({\n\tonEditorChange,\n\tonFileSelect,\n\tinline = false,\n\tvalue,\n\tinitialValue,\n\tcustomInitOptions,\n\t...rest\n}) => {\n\tconst _onEditorChange = useCallback<NonNullable<EditorProps['onEditorChange']>>(\n\t\t(newContent, editor) => {\n\t\t\tonEditorChange?.([\n\t\t\t\teditor.getContent({ format: 'text' }),\n\t\t\t\teditor.getContent({ format: 'html' })\n\t\t\t]);\n\t\t},\n\t\t[onEditorChange]\n\t);\n\tconst { prefs } = useUserSettings();\n\tconst defaultStyle = useMemo(\n\t\t() => ({\n\t\t\tfont: prefs?.zimbraPrefHtmlEditorDefaultFontFamily,\n\t\t\tfontSize: prefs?.zimbraPrefHtmlEditorDefaultFontSize,\n\t\t\tcolor: prefs?.zimbraPrefHtmlEditorDefaultFontColor\n\t\t}),\n\t\t[prefs]\n\t);\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\tconst onFileClick = useCallback(() => {\n\t\tif (inputRef.current) {\n\t\t\tinputRef.current.value = '';\n\t\t\tinputRef.current.click();\n\t\t}\n\t}, []);\n\tconst t = getT();\n\tconst { locale } = useI18nStore.getState();\n\tconst inlineLabel = useMemo(() => t('label.add_inline_image', 'Add inline image'), [t]);\n\n\tconst setupCallback = useCallback<NonNullable<EditorOptions['setup']>>(\n\t\t(editor) => {\n\t\t\tif (onFileSelect)\n\t\t\t\teditor.ui.registry.addMenuButton('imageSelector', {\n\t\t\t\t\ticon: 'gallery',\n\t\t\t\t\ttooltip: t('label.select_image', 'Select image'),\n\t\t\t\t\tfetch: (callback) => {\n\t\t\t\t\t\tconst items: Ui.Menu.MenuItemSpec[] = [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'menuitem',\n\t\t\t\t\t\t\t\ttext: inlineLabel,\n\t\t\t\t\t\t\t\tonAction: (): void => {\n\t\t\t\t\t\t\t\t\tonFileClick();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t];\n\t\t\t\t\t\tcallback(items);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\t[inlineLabel, onFileClick, onFileSelect, t]\n\t);\n\n\tconst editorInitConfig = useMemo<EditorProps['init']>(\n\t\t() => ({\n\t\t\tcontent_css: `${BASE_PATH}/tinymce/skins/content/default/content.css`,\n\t\t\tlanguage_url: `${BASE_PATH}tinymce/langs/${locale}.js`,\n\t\t\tlanguage: locale,\n\t\t\tsetup: setupCallback,\n\t\t\tmin_height: 350,\n\t\t\tauto_focus: true,\n\t\t\tmenubar: false,\n\t\t\tstatusbar: false,\n\t\t\tbranding: false,\n\t\t\tresize: true,\n\t\t\tinline,\n\t\t\tfont_size_formats:\n\t\t\t\t'8pt 9pt 10pt 11pt 12pt 13pt 14pt 16pt 18pt 24pt 30pt 36pt 48pt 60pt 72pt 96pt',\n\t\t\tobject_resizing: 'img',\n\t\t\tstyle_formats: [\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Headers',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{ title: 'h1', block: 'h1' },\n\t\t\t\t\t\t{ title: 'h2', block: 'h2' },\n\t\t\t\t\t\t{ title: 'h3', block: 'h3' },\n\t\t\t\t\t\t{ title: 'h4', block: 'h4' },\n\t\t\t\t\t\t{ title: 'h5', block: 'h5' },\n\t\t\t\t\t\t{ title: 'h6', block: 'h6' }\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Blocks',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{ title: 'p', block: 'p' },\n\t\t\t\t\t\t{ title: 'div', block: 'div' },\n\t\t\t\t\t\t{ title: 'pre', block: 'pre' }\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Containers',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{ title: 'section', block: 'section', wrapper: true, merge_siblings: false },\n\t\t\t\t\t\t{ title: 'article', block: 'article', wrapper: true, merge_siblings: false },\n\t\t\t\t\t\t{ title: 'blockquote', block: 'blockquote', wrapper: true },\n\t\t\t\t\t\t{ title: 'hgroup', block: 'hgroup', wrapper: true },\n\t\t\t\t\t\t{ title: 'aside', block: 'aside', wrapper: true },\n\t\t\t\t\t\t{ title: 'figure', block: 'figure', wrapper: true }\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t],\n\t\t\tplugins: [\n\t\t\t\t'advlist',\n\t\t\t\t'autolink',\n\t\t\t\t'lists',\n\t\t\t\t'link',\n\t\t\t\t'image',\n\t\t\t\t'charmap',\n\t\t\t\t'preview',\n\t\t\t\t'anchor',\n\t\t\t\t'searchreplace',\n\t\t\t\t'code',\n\t\t\t\t'fullscreen',\n\t\t\t\t'insertdatetime',\n\t\t\t\t'media',\n\t\t\t\t'table',\n\t\t\t\t'code',\n\t\t\t\t'help',\n\t\t\t\t'quickbars',\n\t\t\t\t'directionality',\n\t\t\t\t'autoresize',\n\t\t\t\t'visualblocks'\n\t\t\t],\n\t\t\ttoolbar: inline\n\t\t\t\t? false\n\t\t\t\t: [\n\t\t\t\t\t\t'fontfamily fontsize styles visualblocks',\n\t\t\t\t\t\t'bold italic underline strikethrough',\n\t\t\t\t\t\t'removeformat code',\n\t\t\t\t\t\t'alignleft aligncenter alignright alignjustify',\n\t\t\t\t\t\t'forecolor backcolor',\n\t\t\t\t\t\t'bullist numlist outdent indent',\n\t\t\t\t\t\t'ltr rtl',\n\t\t\t\t\t\t'insertfile image',\n\t\t\t\t\t\t'imageSelector'\n\t\t\t\t  ].join(' | '),\n\t\t\tquickbars_insert_toolbar: inline ? 'bullist numlist' : '',\n\t\t\tquickbars_selection_toolbar: inline\n\t\t\t\t? 'bold italic underline | forecolor backcolor | removeformat | quicklink'\n\t\t\t\t: 'quicklink',\n\t\t\tcontextmenu: '',\n\t\t\ttoolbar_mode: 'wrap',\n\t\t\tcontent_style: `body  {  color: ${defaultStyle?.color}; font-size: ${defaultStyle?.fontSize}; font-family: ${defaultStyle?.font}; }`,\n\t\t\tvisualblocks_default_state: false,\n\t\t\tend_container_on_empty_block: true,\n\t\t\trelative_urls: false,\n\t\t\tremove_script_host: false,\n\t\t\tnewline_behavior: 'invert',\n\t\t\t...customInitOptions\n\t\t}),\n\t\t[\n\t\t\tdefaultStyle?.color,\n\t\t\tdefaultStyle?.font,\n\t\t\tdefaultStyle?.fontSize,\n\t\t\tinline,\n\t\t\tlocale,\n\t\t\tsetupCallback,\n\t\t\tcustomInitOptions\n\t\t]\n\t);\n\n\tconst fileInputOnChange = useCallback((): void => {\n\t\tonFileSelect?.({ editor: tinymce, files: inputRef?.current?.files });\n\t}, [onFileSelect]);\n\n\treturn (\n\t\t<Container\n\t\t\theight=\"100%\"\n\t\t\tcrossAlignment=\"baseline\"\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tstyle={{ overflowY: 'hidden' }}\n\t\t>\n\t\t\t<FileInput\n\t\t\t\ttype=\"file\"\n\t\t\t\tref={inputRef}\n\t\t\t\taccept=\"image/*\"\n\t\t\t\tonChange={fileInputOnChange}\n\t\t\t\tmultiple\n\t\t\t/>\n\n\t\t\t<Editor\n\t\t\t\tinitialValue={initialValue}\n\t\t\t\tvalue={value}\n\t\t\t\tinit={editorInitConfig}\n\t\t\t\tonEditorChange={_onEditorChange}\n\t\t\t\t{...rest}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n\nexport default Composer;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { ComponentType } from 'react';\n\nimport produce from 'immer';\nimport { forEach, includes, omit } from 'lodash';\nimport { create } from 'zustand';\n\nimport Composer from './composer';\nimport type { ActionFactory, AnyFunction, IntegrationsState } from '../../../types';\nimport { SHELL_APP_ID } from '../../constants';\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useIntegrationsStore = create<IntegrationsState>()((set) => ({\n\tactions: {},\n\tcomponents: {\n\t\tcomposer: {\n\t\t\titem: Composer,\n\t\t\tapp: SHELL_APP_ID\n\t\t}\n\t},\n\tfunctions: {},\n\tregisterActions: <T>(\n\t\t...items: Array<{ id: string; action: ActionFactory<T>; type: string }>\n\t): void =>\n\t\tset(\n\t\t\tproduce((state) => {\n\t\t\t\tforEach(items, ({ id, action, type }) => {\n\t\t\t\t\tif (!state.actions[type]) state.actions[type] = {};\n\t\t\t\t\tstate.actions[type][id] = action;\n\t\t\t\t});\n\t\t\t})\n\t\t),\n\tregisterComponents:\n\t\t(app: string) =>\n\t\t(...items: Array<{ id: string; component: ComponentType }>): void =>\n\t\t\tset(\n\t\t\t\tproduce((state) => {\n\t\t\t\t\tforEach(items, ({ id, component }) => {\n\t\t\t\t\t\tstate.components[id] = { app, item: component };\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t),\n\tregisterFunctions: (...items: Array<{ id: string; fn: AnyFunction }>): void =>\n\t\tset(\n\t\t\tproduce((state) => {\n\t\t\t\tforEach(items, ({ id, fn }) => {\n\t\t\t\t\tstate.functions[id] = fn;\n\t\t\t\t});\n\t\t\t})\n\t\t),\n\tremoveActions: (...ids: Array<string>): void =>\n\t\tset(\n\t\t\tproduce((state) => {\n\t\t\t\tforEach(state.actions, (actionTypeMap, type) => {\n\t\t\t\t\tforEach(actionTypeMap, (actionFactory, actionFactoryId) => {\n\t\t\t\t\t\tif (includes(ids, actionFactoryId)) {\n\t\t\t\t\t\t\tdelete state.actions[type][actionFactoryId];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t})\n\t\t),\n\tremoveComponents: (...ids: Array<string>): void =>\n\t\tset((s) => ({\n\t\t\t...s,\n\t\t\tcomponents: omit(s.components, ids)\n\t\t})),\n\tremoveFunctions: (...ids: Array<string>): void =>\n\t\tset((s) => ({\n\t\t\t...s,\n\t\t\tfunctions: omit(s.functions, ids)\n\t\t}))\n}));\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\n/* THIS FILE CONTAINS HOOKS, BUT ESLINT IS DUMB */\n\nimport React, { FC, FunctionComponent } from 'react';\n\nimport { compact, map } from 'lodash';\n\nimport { useIntegrationsStore } from './store';\nimport { Action, ActionFactory } from '../../../types';\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nimport AppContextProvider from '../../boot/app/app-context-provider';\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport const getIntegratedFunction = (id: string): [Function, boolean] => {\n\tconst integration = useIntegrationsStore.getState().functions?.[id];\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\treturn integration ? [integration, true] : [(): void => {}, false];\n};\n\nexport const getIntegratedComponent = (id: string): [FunctionComponent<unknown>, boolean] => {\n\tconst Integration = useIntegrationsStore.getState().components?.[id];\n\tif (Integration) {\n\t\tconst C: FC = (props: unknown) => (\n\t\t\t<AppContextProvider pkg={Integration.app}>\n\t\t\t\t{/* eslint-disable-next-line @typescript-eslint/ban-ts-comment */}\n\t\t\t\t{/* @ts-ignore */}\n\t\t\t\t<Integration.item {...props} />\n\t\t\t</AppContextProvider>\n\t\t);\n\t\treturn [C, true];\n\t}\n\treturn [(): null => null, false];\n};\n\nexport const getActions = <T,>(target: T, type: string): Array<Action> => {\n\tconst factories = useIntegrationsStore.getState().actions[type];\n\treturn compact(\n\t\tmap(factories, (f) => {\n\t\t\ttry {\n\t\t\t\treturn f(target);\n\t\t\t} catch (e) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error(e);\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t})\n\t);\n};\n\nexport const getActionsFactory = (type: string): (<T>(target: T) => Array<Action>) => {\n\tconst factories = useIntegrationsStore.getState().actions[type];\n\treturn <T,>(target: T): Array<Action> =>\n\t\tcompact(\n\t\t\tmap(factories, (f) => {\n\t\t\t\ttry {\n\t\t\t\t\treturn f(target);\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t})\n\t\t);\n};\n\nexport const getAction = <T,>(\n\ttype: string,\n\tid: string,\n\ttarget?: T\n): [Action | undefined, boolean] => {\n\tconst factory = useIntegrationsStore.getState().actions[type]?.[id];\n\tconst action = factory?.(target);\n\treturn [action, !!action];\n};\n\nexport const getActionFactory = <T,>(\n\ttype: string,\n\tid: string\n): [ActionFactory<T> | undefined, boolean] => {\n\tconst factory = useIntegrationsStore.getState().actions[type]?.[id];\n\treturn [factory, !!factory];\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\n/* THIS FILE CONTAINS HOOKS, BUT ESLINT IS DUMB */\n\nimport React, { useMemo, FC, FunctionComponent, useCallback } from 'react';\n\nimport { compact, map } from 'lodash';\n\nimport { useIntegrationsStore } from './store';\nimport { Action, ActionFactory, CombinedActionFactory } from '../../../types';\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nimport AppContextProvider from '../../boot/app/app-context-provider';\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport const useIntegratedFunction = (id: string): [Function, boolean] => {\n\tconst integration = useIntegrationsStore((s) => s.functions?.[id]);\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\treturn integration ? [integration, true] : [(): void => {}, false];\n};\n\nexport const useIntegratedComponent = (id: string): [FunctionComponent<unknown>, boolean] => {\n\tconst Integration = useIntegrationsStore((s) => s.components?.[id]);\n\treturn useMemo(() => {\n\t\tif (Integration) {\n\t\t\tconst C: FC = (props: unknown) => (\n\t\t\t\t<AppContextProvider pkg={Integration.app}>\n\t\t\t\t\t{/* eslint-disable-next-line @typescript-eslint/ban-ts-comment */}\n\t\t\t\t\t{/* @ts-ignore */}\n\t\t\t\t\t<Integration.item {...props} />\n\t\t\t\t</AppContextProvider>\n\t\t\t);\n\t\t\treturn [C, true];\n\t\t}\n\t\treturn [(): null => null, false];\n\t}, [Integration]);\n};\n\nexport const useActions = <T,>(target: T, type: string): Array<Action> => {\n\tconst factories = useIntegrationsStore((s) => s.actions[type]);\n\treturn useMemo(\n\t\t() =>\n\t\t\tcompact(\n\t\t\t\tmap(factories, (f) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn f(target);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t) ?? [],\n\t\t[factories, target]\n\t);\n};\n\nexport const useActionsFactory = <T,>(type: string): CombinedActionFactory<T> => {\n\tconst factories = useIntegrationsStore((s) => s.actions[type]);\n\treturn useCallback(\n\t\t(target: unknown) =>\n\t\t\tcompact(\n\t\t\t\tmap(factories, (f) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn f(target);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t),\n\t\t[factories]\n\t);\n};\n\nexport const useAction = <T,>(\n\ttype: string,\n\tid: string,\n\ttarget?: T\n): [Action | undefined, boolean] => {\n\tconst factory = useIntegrationsStore((s) => s.actions[type][id]);\n\tconst action = useMemo(() => {\n\t\ttry {\n\t\t\treturn factory?.(target);\n\t\t} catch (e) {\n\t\t\treturn undefined;\n\t\t}\n\t}, [factory, target]);\n\treturn [action, !!action];\n};\n\nexport const useActionFactory = <T,>(\n\ttype: string,\n\tid: string\n): [ActionFactory<T> | undefined, boolean] => {\n\tconst factory = useIntegrationsStore((s) => s.actions[type][id]);\n\treturn [factory, !!factory];\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { filter, find, findIndex, map, reduce, isArray } from 'lodash';\n\nimport { getXmlSoapFetch } from './fetch';\nimport {\n\tAccountState,\n\tMods,\n\tAccount,\n\tCreateIdentityResponse,\n\tModifyPropertiesResponse,\n\tModifyPrefsResponse,\n\tModifyIdentityResponse,\n\tRevokeRightsResponse,\n\tDeleteIdentityResponse,\n\tGrantRightsResponse\n} from '../../types';\nimport { SHELL_APP_ID } from '../constants';\nimport { useAccountStore } from '../store/account';\n\ntype EditSettingsBatchResponse = {\n\tModifyPropertiesResponse?: ModifyPropertiesResponse[];\n\tModifyPrefsResponse?: ModifyPrefsResponse[];\n\tModifyIdentityResponse?: ModifyIdentityResponse[];\n\tDeleteIdentityResponse?: DeleteIdentityResponse[];\n\tCreateIdentityResponse?: CreateIdentityResponse[];\n\tRevokeRightsResponse?: RevokeRightsResponse[];\n\tGrantRightsResponse?: GrantRightsResponse[];\n};\n\nexport const editSettings = (\n\tmods: Partial<Mods>,\n\tappId: string = SHELL_APP_ID\n): Promise<EditSettingsBatchResponse> =>\n\tgetXmlSoapFetch(SHELL_APP_ID)<string, EditSettingsBatchResponse>(\n\t\t'Batch',\n\t\t`<BatchRequest xmlns=\"urn:zimbra\" onerror=\"stop\">${\n\t\t\tmods.props\n\t\t\t\t? `<ModifyPropertiesRequest xmlns=\"urn:zimbraAccount\">${map(\n\t\t\t\t\t\tmods.props,\n\t\t\t\t\t\t(prop, key) => `<prop name=\"${key}\" zimlet=\"${prop.app ?? appId}\">${prop.value}</prop>`\n\t\t\t\t  )}</ModifyPropertiesRequest>`\n\t\t\t\t: ''\n\t\t}${\n\t\t\tmods.prefs\n\t\t\t\t? `<ModifyPrefsRequest xmlns=\"urn:zimbraAccount\">${map(mods.prefs, (pref, key) =>\n\t\t\t\t\t\tisArray(pref)\n\t\t\t\t\t\t\t? map(pref, (p) => `<pref name=\"${key}\">${p}</pref>`).join('')\n\t\t\t\t\t\t\t: `<pref name=\"${key}\">${pref}</pref>`\n\t\t\t\t  ).join('')}</ModifyPrefsRequest>`\n\t\t\t\t: ''\n\t\t}${\n\t\t\tmods.identity?.modifyList\n\t\t\t\t? map(\n\t\t\t\t\t\tmods.identity.modifyList,\n\t\t\t\t\t\t(item) =>\n\t\t\t\t\t\t\t`<ModifyIdentityRequest xmlns=\"urn:zimbraAccount\" requestId=\"0\"><identity id=\"${\n\t\t\t\t\t\t\t\titem.id\n\t\t\t\t\t\t\t}\">${map(item.prefs, (value, key) => `<a name=\"${key}\">${value}</a>`).join(\n\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t)}</identity></ModifyIdentityRequest>`\n\t\t\t\t  ).join('')\n\t\t\t\t: ''\n\t\t}${\n\t\t\tmods.identity?.deleteList\n\t\t\t\t? map(\n\t\t\t\t\t\tmods.identity.deleteList,\n\t\t\t\t\t\t(item) =>\n\t\t\t\t\t\t\t`<DeleteIdentityRequest xmlns=\"urn:zimbraAccount\" requestId=\"0\"><identity id=\"${item}\"/></DeleteIdentityRequest>`\n\t\t\t\t  ).join('')\n\t\t\t\t: ''\n\t\t}${\n\t\t\tmods.identity?.createList\n\t\t\t\t? map(\n\t\t\t\t\t\tmods.identity.createList,\n\t\t\t\t\t\t(item, index) =>\n\t\t\t\t\t\t\t`<CreateIdentityRequest xmlns=\"urn:zimbraAccount\" requestId=\"${index}\"><identity name=\"${item.prefs.zimbraPrefIdentityName}\"><a name=\"zimbraPrefIdentityName\">${item.prefs.zimbraPrefIdentityName}</a><a name=\"zimbraPrefFromDisplay\">${item.prefs.zimbraPrefFromDisplay}</a><a name=\"zimbraPrefFromAddress\">${item.prefs.zimbraPrefFromAddress}</a><a name=\"zimbraPrefFromAddressType\">sendAs</a><a name=\"zimbraPrefReplyToEnabled\">${item.prefs.zimbraPrefReplyToEnabled}</a><a name=\"zimbraPrefReplyToDisplay\">${item.prefs.zimbraPrefReplyToDisplay}</a><a name=\"zimbraPrefReplyToAddress\">${item.prefs.zimbraPrefReplyToAddress}</a><a name=\"zimbraPrefDefaultSignatureId\">${item.prefs.zimbraPrefDefaultSignatureId}</a><a name=\"zimbraPrefForwardReplySignatureId\">${item.prefs.zimbraPrefForwardReplySignatureId}</a><a name=\"zimbraPrefWhenSentToEnabled\">${item.prefs.zimbraPrefWhenSentToEnabled}</a><a name=\"zimbraPrefWhenInFoldersEnabled\">${item.prefs.zimbraPrefWhenInFoldersEnabled}</a></identity></CreateIdentityRequest>`\n\t\t\t\t  ).join('')\n\t\t\t\t: ''\n\t\t}${\n\t\t\tmods.permissions\n\t\t\t\t? `<RevokeRightsRequest xmlns=\"urn:zimbraAccount\" requestId=\"0\">${\n\t\t\t\t\t\tmods.permissions.freeBusy\n\t\t\t\t\t\t\t? map(mods.permissions.freeBusy.current, (right) => {\n\t\t\t\t\t\t\t\t\tif (right.gt === 'dom')\n\t\t\t\t\t\t\t\t\t\treturn `<ace right=\"viewFreeBusy\" gt=\"${right.gt}\" zid=\"${right.zid}\" d=\"zextras.com\"/>`;\n\t\t\t\t\t\t\t\t\tif (right.gt === 'all' && right.deny)\n\t\t\t\t\t\t\t\t\t\treturn `<ace right=\"viewFreeBusy\" gt=\"${right.gt}\" zid=\"${right.zid}\" deny=\"1\"/>`;\n\t\t\t\t\t\t\t\t\tif (right.gt === 'usr')\n\t\t\t\t\t\t\t\t\t\treturn `<ace right=\"viewFreeBusy\" gt=\"${right.gt}\" zid=\"${right.zid}\" d=\"${right.d}\"/>`;\n\t\t\t\t\t\t\t\t\treturn `<ace right=\"viewFreeBusy\" gt=\"${right.gt}\" zid=\"${right.zid}\" />`;\n\t\t\t\t\t\t\t  }).join('')\n\t\t\t\t\t\t\t: ''\n\t\t\t\t  }${\n\t\t\t\t\t\tmods.permissions.inviteRight\n\t\t\t\t\t\t\t? map(mods.permissions.inviteRight.current, (right) => {\n\t\t\t\t\t\t\t\t\tif (right.gt === 'all' && right.deny)\n\t\t\t\t\t\t\t\t\t\treturn `<ace right=\"invite\" gt=\"${right.gt}\" zid=\"${right.zid}\" deny=\"1\"/>`;\n\t\t\t\t\t\t\t\t\tif (right.gt === 'usr')\n\t\t\t\t\t\t\t\t\t\treturn `<ace right=\"invite\" gt=\"${right.gt}\" zid=\"${right.zid}\" d=\"${right.d}\"/>`;\n\t\t\t\t\t\t\t\t\treturn `<ace right=\"invite\" gt=\"${right.gt}\" zid=\"${right.zid}\" />`;\n\t\t\t\t\t\t\t  }).join('')\n\t\t\t\t\t\t\t: ''\n\t\t\t\t  }</RevokeRightsRequest><GrantRightsRequest xmlns=\"urn:zimbraAccount\" requestId=\"1\">${\n\t\t\t\t\t\tmods.permissions.freeBusy\n\t\t\t\t\t\t\t? `${((): string => {\n\t\t\t\t\t\t\t\t\tif (mods.permissions.freeBusy.new.gt === 'dom') {\n\t\t\t\t\t\t\t\t\t\treturn `<ace right=\"viewFreeBusy\" gt=\"${mods.permissions.freeBusy.new.gt}\" d=\"zextras.com\"/>`;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tmods.permissions.freeBusy.new.gt === 'all' &&\n\t\t\t\t\t\t\t\t\t\tmods.permissions.freeBusy.new.deny\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\treturn `<ace right=\"viewFreeBusy\" gt=\"${mods.permissions.freeBusy.new.gt}\" deny=\"1\"/>`;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (mods.permissions.freeBusy.new.gt === 'usr') {\n\t\t\t\t\t\t\t\t\t\treturn map(\n\t\t\t\t\t\t\t\t\t\t\tmods.permissions.freeBusy.new.d,\n\t\t\t\t\t\t\t\t\t\t\t(u) =>\n\t\t\t\t\t\t\t\t\t\t\t\t// FIXME: usage differs from the declaration of the AccountACE\n\t\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t`<ace right=\"viewFreeBusy\" gt=\"${mods.permissions?.freeBusy.new.gt}\" d=\"${u.email}\"/>`\n\t\t\t\t\t\t\t\t\t\t).join('');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn `<ace right=\"viewFreeBusy\" gt=\"${mods.permissions.freeBusy.new.gt}\" />`;\n\t\t\t\t\t\t\t  })()}`\n\t\t\t\t\t\t\t: ''\n\t\t\t\t  }${\n\t\t\t\t\t\tmods.permissions.inviteRight\n\t\t\t\t\t\t\t? `${((): string => {\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tmods.permissions.inviteRight.new.gt === 'all' &&\n\t\t\t\t\t\t\t\t\t\tmods.permissions.inviteRight.new.deny\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\treturn `<ace right=\"invite\" gt=\"${mods.permissions.inviteRight.new.gt}\" deny=\"1\"/>`;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (mods.permissions.inviteRight.new.gt === 'usr') {\n\t\t\t\t\t\t\t\t\t\treturn map(\n\t\t\t\t\t\t\t\t\t\t\tmods.permissions.inviteRight.new.d,\n\t\t\t\t\t\t\t\t\t\t\t(u) =>\n\t\t\t\t\t\t\t\t\t\t\t\t// FIXME: usage differs from the declaration of the AccountACE\n\t\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t`<ace right=\"invite\" gt=\"${mods.permissions?.inviteRight.new.gt}\" d=\"${u.email}\"/>`\n\t\t\t\t\t\t\t\t\t\t).join('');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn `<ace right=\"invite\" gt=\"${mods.permissions?.inviteRight.new.gt}\" />`;\n\t\t\t\t\t\t\t  })()}`\n\t\t\t\t\t\t\t: ''\n\t\t\t\t  }\n\t</GrantRightsRequest>`\n\t\t\t\t: ''\n\t\t}</BatchRequest>`\n\t).then((r) => {\n\t\tuseAccountStore.setState((s: AccountState) => ({\n\t\t\tsettings: {\n\t\t\t\t...s.settings,\n\t\t\t\tprefs: reduce(\n\t\t\t\t\tmods.prefs,\n\t\t\t\t\t(acc, pref, key) => ({\n\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t[key]: pref as string\n\t\t\t\t\t}),\n\t\t\t\t\ts.settings.prefs\n\t\t\t\t),\n\t\t\t\tprops: reduce(\n\t\t\t\t\tmods.props,\n\t\t\t\t\t(acc, { app, value }, key) => {\n\t\t\t\t\t\tconst propIndex = findIndex(acc, (p) => p.name === key && p.zimlet === app);\n\t\t\t\t\t\tif (propIndex >= 0) {\n\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\t\tacc[propIndex] = {\n\t\t\t\t\t\t\t\tname: key,\n\t\t\t\t\t\t\t\tzimlet: app,\n\t\t\t\t\t\t\t\t_content: value as string\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tacc.push({\n\t\t\t\t\t\t\t\tname: key,\n\t\t\t\t\t\t\t\tzimlet: app,\n\t\t\t\t\t\t\t\t_content: value as string\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t},\n\t\t\t\t\ts.settings.props\n\t\t\t\t)\n\t\t\t},\n\t\t\taccount: {\n\t\t\t\t...s.account,\n\t\t\t\tdisplayName:\n\t\t\t\t\tfind(mods?.identity?.modifyList, (item) => item.id === s?.account?.id)?.prefs\n\t\t\t\t\t\t.zimbraPrefIdentityName || s.account?.displayName,\n\t\t\t\tidentities: {\n\t\t\t\t\tidentity:\n\t\t\t\t\t\ttypeof s.account !== 'undefined'\n\t\t\t\t\t\t\t? reduce(\n\t\t\t\t\t\t\t\t\tmods?.identity?.modifyList,\n\t\t\t\t\t\t\t\t\t(acc, { id, prefs }) => {\n\t\t\t\t\t\t\t\t\t\tconst propIndex = findIndex(\n\t\t\t\t\t\t\t\t\t\t\tacc,\n\t\t\t\t\t\t\t\t\t\t\t(itemMods, indexAccount) => acc[indexAccount].id === id\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tif (propIndex > -1) {\n\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\t\t\t\t\t\tacc[propIndex]._attrs = {\n\t\t\t\t\t\t\t\t\t\t\t\t...acc[propIndex]._attrs,\n\t\t\t\t\t\t\t\t\t\t\t\t...prefs\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\tif (prefs.zimbraPrefIdentityName && acc[propIndex].name !== 'DEFAULT') {\n\t\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\t\t\t\t\t\t\tacc[propIndex].name = prefs.zimbraPrefIdentityName;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn acc;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t...filter(\n\t\t\t\t\t\t\t\t\t\t\ts.account.identities.identity,\n\t\t\t\t\t\t\t\t\t\t\t(item) => !mods?.identity?.deleteList?.includes(item.id)\n\t\t\t\t\t\t\t\t\t\t).filter((i) => i.name !== 'DEFAULT'),\n\t\t\t\t\t\t\t\t\t\t...map(r?.CreateIdentityResponse, (item) => item.identity[0]),\n\t\t\t\t\t\t\t\t\t\t...filter(\n\t\t\t\t\t\t\t\t\t\t\ts.account.identities.identity,\n\t\t\t\t\t\t\t\t\t\t\t(item) => !mods?.identity?.deleteList?.includes(item.id)\n\t\t\t\t\t\t\t\t\t\t).filter((i) => i.name === 'DEFAULT')\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t}\n\t\t\t} as Account\n\t\t}));\n\t\treturn r;\n\t});\n\nexport const getEditSettingsForApp =\n\t(app: string) =>\n\t(mods: Mods): Promise<EditSettingsBatchResponse & { type?: 'fulfilled' }> =>\n\t\teditSettings(mods, app).then((r) => ({\n\t\t\t...r,\n\t\t\ttype: 'fulfilled'\n\t\t}));\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC, useMemo } from 'react';\n\nimport { Link as RRLink, LinkProps } from 'react-router-dom';\n\nimport { parseParams } from '../history/hooks';\n\ntype AppLinkProps = LinkProps & {\n\troute?: string;\n};\nexport const AppLink: FC<AppLinkProps> = ({ to, route, ...rest }) => {\n\tconst _to = useMemo(() => parseParams({ path: to, route }), [route, to]);\n\treturn <RRLink style={{ textDecoration: 'none' }} to={_to} {...rest} />;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC } from 'react';\n\nimport { Button, Container } from '@zextras/carbonio-design-system';\nimport { noop } from 'lodash';\n\nexport const Spinner: FC = () => (\n\t<Container width=\"fill\" height=\"fill\" mainAlignment=\"center\" crossAlignment=\"center\">\n\t\t{/* the \"Button\" string doesn't need to be translated as it's not rendered */}\n\t\t<Button type=\"ghost\" label=\"Button\" color=\"primary\" loading onClick={noop} />\n\t</Container>\n);\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { ComponentType, memo } from 'react';\n\nimport { forOwn } from 'lodash';\n\nimport { getAppFunctions } from './app-loader-functions';\nimport { getAppSetters } from './app-loader-setters';\nimport type { CarbonioModule } from '../../../types';\nimport * as CONSTANTS from '../../constants';\nimport { report } from '../../reporting/functions';\nimport SettingsHeader from '../../settings/components/settings-header';\nimport { useAppStore } from '../../store/app';\nimport { AppLink } from '../../ui-extras/app-link';\nimport { Spinner } from '../../ui-extras/spinner';\n\nexport const _scripts: { [pkgName: string]: HTMLScriptElement } = {};\nlet _scriptId = 0;\n\nexport function loadApp(appPkg: CarbonioModule): Promise<CarbonioModule> {\n\treturn new Promise((resolve, reject) => {\n\t\ttry {\n\t\t\tif (\n\t\t\t\twindow.__ZAPP_SHARED_LIBRARIES__ &&\n\t\t\t\twindow.__ZAPP_SHARED_LIBRARIES__['@zextras/carbonio-shell-ui']\n\t\t\t) {\n\t\t\t\twindow.__ZAPP_SHARED_LIBRARIES__['@zextras/carbonio-shell-ui'][appPkg.name] = {\n\t\t\t\t\treport: report(appPkg.name),\n\t\t\t\t\tAppLink,\n\t\t\t\t\tSpinner,\n\t\t\t\t\tSettingsHeader,\n\t\t\t\t\t...getAppSetters(appPkg),\n\t\t\t\t\t...getAppFunctions(appPkg),\n\t\t\t\t\t...CONSTANTS\n\t\t\t\t};\n\t\t\t}\n\n\t\t\twindow.__ZAPP_HMR_EXPORT__[appPkg.name] = (appComponent: ComponentType): void => {\n\t\t\t\tuseAppStore.setState((state) => ({\n\t\t\t\t\tentryPoints: {\n\t\t\t\t\t\t...state.entryPoints,\n\t\t\t\t\t\t[appPkg.name]: memo(appComponent)\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.info(\n\t\t\t\t\t`%c loaded ${appPkg.name}`,\n\t\t\t\t\t'color: white; background: #539507;padding: 4px 8px 2px 4px; font-family: sans-serif; border-radius: 12px; width: 100%'\n\t\t\t\t);\n\t\t\t\tresolve(appPkg);\n\t\t\t};\n\n\t\t\tconst script = document.createElement('script');\n\t\t\tscript.setAttribute('type', 'text/javascript');\n\t\t\tscript.setAttribute('data-pkg_name', appPkg.name);\n\t\t\tscript.setAttribute('data-pkg_version', appPkg.version);\n\t\t\tscript.setAttribute('data-is_app', 'true');\n\t\t\tscript.setAttribute('src', `${appPkg.js_entrypoint}`);\n\t\t\tdocument.body.appendChild(script);\n\t\t\t_scriptId += 1;\n\t\t\t_scripts[`${appPkg.name}-loader-${_scriptId}`] = script;\n\t\t} catch (err: unknown) {\n\t\t\tconsole.error(err);\n\t\t\treject(err);\n\t\t}\n\t});\n}\n\nexport function unloadApps(): Promise<void> {\n\treturn new Promise((resolve) => {\n\t\tforOwn(_scripts, (script) => {\n\t\t\tif (script.parentNode) {\n\t\t\t\tscript.parentNode.removeChild(script);\n\t\t\t}\n\t\t});\n\t\tresolve();\n\t});\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { registerLocale, setDefaultLocale } from '@zextras/carbonio-design-system';\nimport type { Locale as DateFnsLocale } from 'date-fns';\nimport { filter, map } from 'lodash';\n\nimport { loadApp, unloadApps } from './load-app';\nimport { injectSharedLibraries } from './shared-libraries';\nimport { CarbonioModule } from '../../../types';\nimport { SHELL_APP_ID } from '../../constants';\nimport { useReporter } from '../../reporting/store';\nimport { localeList } from '../../settings/components/utils';\nimport { getUserSetting, useAccountStore } from '../../store/account';\nimport { getT, useI18nStore } from '../../store/i18n';\n\nconst getDateFnsLocale = (locale: string): Promise<DateFnsLocale> =>\n\timport(`date-fns/locale/${locale}/index.js`);\n\nexport function loadApps(\n\tapps: Array<CarbonioModule>\n): Promise<PromiseSettledResult<CarbonioModule>[]> {\n\tinjectSharedLibraries();\n\tconst appsToLoad = filter(apps, (app) => {\n\t\tif (app.name === SHELL_APP_ID) return false;\n\t\treturn !(app.attrKey && getUserSetting('attrs', app.attrKey) === 'FALSE');\n\t});\n\t// eslint-disable-next-line no-console\n\tconsole.log(\n\t\t'%cLOADING APPS',\n\t\t'color: white; background: #2b73d2;padding: 4px 8px 2px 4px; font-family: sans-serif; border-radius: 12px; width: 100%'\n\t);\n\tconst { settings } = useAccountStore.getState();\n\tconst locale =\n\t\t(settings?.prefs?.zimbraPrefLocale as string) ??\n\t\t(settings?.attrs?.zimbraLocale as string) ??\n\t\t'en';\n\tuseI18nStore.getState().actions.addI18n(appsToLoad, locale);\n\tconst localeObj = localeList(getT()).find((item) => item.id === locale);\n\tif (localeObj) {\n\t\tconst localeDateFnsKey = localeObj.dateFnsLocale || localeObj.value;\n\t\tgetDateFnsLocale(localeDateFnsKey).then((localeDateFns) => {\n\t\t\tregisterLocale(localeDateFnsKey, localeDateFns);\n\t\t\tsetDefaultLocale(localeDateFnsKey);\n\t\t});\n\t}\n\tuseReporter.getState().setClients(appsToLoad);\n\treturn Promise.allSettled(map(appsToLoad, (app) => loadApp(app)));\n}\n\nexport function unloadAllApps(): Promise<void> {\n\treturn unloadApps();\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React from 'react';\n\nimport * as ReduxJSToolkit from '@reduxjs/toolkit';\nimport * as ZappUI from '@zextras/carbonio-design-system';\nimport * as Preview from '@zextras/carbonio-ui-preview';\nimport * as Lodash from 'lodash';\nimport * as Moment from 'moment';\nimport * as ReactDOM from 'react-dom';\nimport * as ReactI18n from 'react-i18next';\nimport * as ReactRedux from 'react-redux';\nimport * as ReactRouterDom from 'react-router-dom';\nimport * as StyledComponents from 'styled-components';\n\nexport function injectSharedLibraries(): void {\n\tif (!window.__ZAPP_SHARED_LIBRARIES__) {\n\t\twindow.__ZAPP_SHARED_LIBRARIES__ = {\n\t\t\treact: React,\n\t\t\t'react-dom': ReactDOM,\n\t\t\t'react-i18next': ReactI18n,\n\t\t\t'react-redux': ReactRedux,\n\t\t\tlodash: Lodash,\n\t\t\t'react-router-dom': ReactRouterDom,\n\t\t\tmoment: Moment,\n\t\t\t'styled-components': StyledComponents,\n\t\t\t'@reduxjs/toolkit': ReduxJSToolkit,\n\t\t\t'@zextras/carbonio-shell-ui': {},\n\t\t\t'@zextras/carbonio-design-system': ZappUI,\n\t\t\t'@zextras/carbonio-ui-preview': Preview\n\t\t};\n\t\twindow.__ZAPP_HMR_EXPORT__ = {};\n\t}\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n// The 'useXXX' functions actually return hooks\n/* eslint-disable react-hooks/rules-of-hooks */\n\nimport {\n\tAppRouteDescriptor,\n\tBoardView,\n\tCarbonioModule,\n\tPrimaryAccessoryView,\n\tSearchView,\n\tSecondaryAccessoryView,\n\tSettingsView,\n\tUtilityView\n} from '../../../types';\nimport { getEditSettingsForApp } from '../../network/edit-settings';\nimport { useAppStore } from '../../store/app';\nimport {\n\tnormalizeRoute,\n\tnormalizeSettingsView,\n\tnormalizeSearchView,\n\tnormalizeUtilityView,\n\tnormalizePrimaryAccessoryView,\n\tnormalizeSecondaryAccessoryView,\n\tnormalizeBoardView\n} from '../../store/app/utils';\nimport { useIntegrationsStore } from '../../store/integrations/store';\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport const getAppSetters = (pkg: CarbonioModule): Record<string, Function> => {\n\tconst appSetters = useAppStore.getState().setters;\n\tconst integrations = useIntegrationsStore.getState();\n\treturn {\n\t\tupdatePrimaryBadge: appSetters.updatePrimaryBadge,\n\t\tupdateUtilityBadge: appSetters.updateUtilityBadge,\n\t\tsetAppContext: appSetters.setAppContext(pkg.name),\n\t\taddRoute: (route: Partial<AppRouteDescriptor>) =>\n\t\t\tappSetters.addRoute(normalizeRoute(route, pkg)),\n\t\tsetRouteVisibility: (routeId: string, visible: boolean) =>\n\t\t\tappSetters.setRouteVisibility(routeId, visible),\n\t\tremoveRoute: (routeId: string) => appSetters.removeRoute(routeId),\n\t\t// add board\n\t\taddBoardView: (data: Partial<BoardView>) =>\n\t\t\tappSetters.addBoardView(normalizeBoardView(data, pkg)),\n\t\t// remove board\n\t\tremoveBoardView: appSetters.removeBoardView,\n\t\t//\n\t\t// add settings\n\t\taddSettingsView: (data: Partial<SettingsView>) =>\n\t\t\tappSetters.addSettingsView(normalizeSettingsView(data, pkg)),\n\t\t// remove settings\n\t\tremoveSettingsView: appSetters.removeSettingsView,\n\t\t//\n\t\t// add search\n\t\taddSearchView: (data: Partial<SearchView>) =>\n\t\t\tappSetters.addSearchView(normalizeSearchView(data, pkg)),\n\t\t// remove search\n\t\tremoveSearchView: appSetters.removeSearchView,\n\t\t//\n\t\t// add utility\n\t\taddUtilityView: (data: Partial<UtilityView>) =>\n\t\t\tappSetters.addUtilityView(normalizeUtilityView(data, pkg)),\n\t\t// remove utility\n\t\tremoveUtilityView: appSetters.removeUtilityView,\n\t\t//\n\t\t// add primaryAccessory\n\t\taddPrimaryAccessoryView: (data: Partial<PrimaryAccessoryView>) =>\n\t\t\tappSetters.addPrimaryAccessoryView(normalizePrimaryAccessoryView(data, pkg)),\n\t\t// remove primaryAccessory\n\t\tremovePrimaryAccessoryView: appSetters.removePrimaryAccessoryView,\n\t\t//\n\t\t// add secondaryAccessory\n\t\taddSecondaryAccessoryView: (data: Partial<SecondaryAccessoryView>) =>\n\t\t\tappSetters.addSecondaryAccessoryView(normalizeSecondaryAccessoryView(data, pkg)),\n\t\t// remove secondaryAccessory\n\t\tremoveSecondaryAccessoryView: appSetters.removeSecondaryAccessoryView,\n\t\tregisterFunctions: integrations.registerFunctions,\n\t\tremoveFunctions: integrations.removeFunctions,\n\t\tregisterActions: integrations.registerActions,\n\t\tremoveActions: integrations.removeActions,\n\t\tregisterComponents: integrations.registerComponents(pkg.name),\n\t\tremoveComponents: integrations.removeComponents,\n\t\t/** @deprecated */\n\t\teditSettings: getEditSettingsForApp(pkg.name)\n\t};\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n// The 'useXXX' functions actually return hooks\n/* eslint-disable react-hooks/rules-of-hooks */\n\nimport { reduce } from 'lodash';\n\nimport { CarbonioModule } from '../../../types';\nimport {\n\tusePushHistoryCallback,\n\tuseGoBackHistoryCallback,\n\tuseReplaceHistoryCallback,\n\tgetCurrentRoute,\n\tuseCurrentRoute,\n\treplaceHistory,\n\tgoBackHistory,\n\tpushHistory\n} from '../../history/hooks';\nimport { getSoapFetch, getXmlSoapFetch } from '../../network/fetch';\nimport { changeTagColor, createTag, deleteTag, renameTag } from '../../network/tags';\nimport { getNotificationManager } from '../../notification/NotificationManager';\nimport { runSearch } from '../../search/run-search';\nimport { useIsMobile } from '../../shell/hooks/useIsMobile';\nimport { useLocalStorage } from '../../shell/hooks/useLocalStorage';\nimport {\n\tgetUserAccount,\n\tgetUserAccounts,\n\tgetUserSetting,\n\tgetUserSettings,\n\tuseUserAccount,\n\tuseUserAccounts,\n\tuseUserSetting,\n\tuseUserSettings,\n\tuseUserRight,\n\tuseUserRights,\n\tgetUserRight,\n\tgetUserRights\n} from '../../store/account';\nimport { getApp, getAppContext, useApp, useAppContext, useAppStore } from '../../store/app';\nimport {\n\taddBoard,\n\tcloseBoard,\n\tupdateBoard,\n\tupdateBoardContext,\n\tgetBoardById,\n\tgetBoardContextById,\n\tuseBoardContextById,\n\tuseBoardById,\n\tuseBoard,\n\tminimizeBoards,\n\treopenBoards,\n\tsetCurrentBoard,\n\tuseBoardHooks\n} from '../../store/boards';\nimport { useContextBridge } from '../../store/context-bridge';\nimport {\n\tgetFolder,\n\tgetFolders,\n\tuseFolder,\n\tuseFolders,\n\tuseRoot,\n\tgetRoot,\n\tuseRoots,\n\tgetRoots,\n\tuseSearchFolder,\n\tuseSearchFolders,\n\tgetSearchFolder,\n\tgetSearchFolders,\n\tuseFoldersByView,\n\tuseFoldersAccordionByView,\n\tuseRootByUser,\n\tgetRootByUser\n} from '../../store/folder';\nimport { getI18n, getTFunction } from '../../store/i18n';\nimport {\n\tgetAction,\n\tgetActions,\n\tgetActionsFactory,\n\tgetActionFactory,\n\tgetIntegratedComponent,\n\tgetIntegratedFunction\n} from '../../store/integrations/getters';\nimport {\n\tuseAction,\n\tuseActions,\n\tuseActionsFactory,\n\tuseActionFactory,\n\tuseIntegratedComponent,\n\tuseIntegratedFunction\n} from '../../store/integrations/hooks';\nimport { useNotify, useRefresh } from '../../store/network';\nimport { getTags, useTags } from '../../store/tags';\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport const getAppFunctions = (pkg: CarbonioModule): Record<string, Function> => ({\n\t// I18N\n\tgetI18n: getI18n(pkg.name),\n\tt: getTFunction(pkg.name),\n\t// FETCH\n\tsoapFetch: getSoapFetch(pkg.name),\n\txmlSoapFetch: getXmlSoapFetch(pkg.name),\n\n\t// APP STORE FUNCTIONS\n\tuseAppContext: useAppContext(pkg.name),\n\tgetAppContext: getAppContext(pkg.name),\n\tuseApp: useApp(pkg.name),\n\tgetApp: getApp(pkg.name),\n\tgetAppViews: useAppStore((s: any) => s.views.appView),\n\n\t// INTEGRATIONS\n\tuseIntegratedFunction,\n\tgetIntegratedFunction,\n\tuseIntegratedComponent,\n\tgetIntegratedComponent,\n\tuseAction,\n\tgetAction,\n\tuseActions,\n\tgetActions,\n\tuseActionsFactory,\n\tgetActionsFactory,\n\tuseActionFactory,\n\tgetActionFactory,\n\t// ACCOUNTS\n\tuseUserAccount,\n\tgetUserAccount,\n\tuseUserAccounts,\n\tgetUserAccounts,\n\tuseUserSettings,\n\tgetUserSettings,\n\tgetUserSetting,\n\tuseUserSetting,\n\tuseUserRight,\n\tuseUserRights,\n\tgetUserRight,\n\tgetUserRights,\n\tuseTags,\n\tgetTags,\n\tuseNotify,\n\tuseRefresh,\n\t// FOLDERS\n\tuseFoldersByView,\n\tuseFoldersAccordionByView,\n\tuseFolder,\n\tgetFolder,\n\tuseFolders,\n\tgetFolders,\n\tuseRoot,\n\tgetRoot,\n\tuseRoots,\n\tgetRoots,\n\tuseSearchFolder,\n\tuseSearchFolders,\n\tgetSearchFolder,\n\tgetSearchFolders,\n\tuseRootByUser,\n\tgetRootByUser,\n\t// BOARDS\n\taddBoard: addBoard(pkg.name),\n\tcloseBoard,\n\tupdateBoard,\n\tupdateBoardContext,\n\tgetBoardById,\n\tgetBoardContextById,\n\tuseBoard,\n\tuseBoardById,\n\tuseBoardContextById,\n\tminimizeBoards,\n\treopenBoards,\n\tsetCurrentBoard,\n\tuseBoardHooks,\n\t// HISTORY\n\tusePushHistoryCallback,\n\tuseGoBackHistoryCallback,\n\tuseReplaceHistoryCallback,\n\tuseCurrentRoute,\n\tgetCurrentRoute,\n\tpushHistory,\n\tgoBackHistory,\n\treplaceHistory,\n\t// TAGS\n\tcreateTag,\n\trenameTag,\n\tchangeTagColor,\n\tdeleteTag,\n\t// NOTIFICATION\n\tgetNotificationManager,\n\n\t// STUFF\n\trunSearch,\n\tuseIsMobile,\n\tuseLocalStorage,\n\tgetBridgedFunctions: (): unknown => {\n\t\tconst { packageDependentFunctions, functions } = useContextBridge.getState();\n\t\treturn {\n\t\t\t...functions,\n\t\t\t...reduce(packageDependentFunctions, (acc, f, name) => ({ ...acc, [name]: f(pkg.name) }), {})\n\t\t};\n\t}\n});\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport { Modal, Padding, Text } from '@zextras/carbonio-design-system';\nimport { find } from 'lodash';\nimport { useTranslation } from 'react-i18next';\n\nimport { loadApps, unloadAllApps } from './app/load-apps';\nimport { getComponents } from '../network/get-components';\nimport { getInfo } from '../network/get-info';\nimport { loginConfig } from '../network/login-config';\nimport { goToLogin } from '../network/utils';\nimport { useAppStore } from '../store/app';\n\nexport function isPromiseRejectedResult<T>(\n\tpromiseSettledResult: PromiseSettledResult<T>\n): promiseSettledResult is PromiseRejectedResult {\n\treturn promiseSettledResult.status === 'rejected';\n}\n\nexport function isPromiseFulfilledResult<T>(\n\tpromiseSettledResult: PromiseSettledResult<T>\n): promiseSettledResult is PromiseFulfilledResult<T> {\n\treturn promiseSettledResult.status === 'fulfilled';\n}\n\ntype LoaderFailureModalProps = { open: boolean; closeHandler: () => void };\n\nexport const LoaderFailureModal = ({\n\topen,\n\tcloseHandler\n}: LoaderFailureModalProps): JSX.Element => {\n\tconst [t] = useTranslation();\n\tconst onConfirm = useCallback(() => window.location.reload(), []);\n\treturn (\n\t\t<Modal\n\t\t\topen={open}\n\t\t\tshowCloseIcon={false}\n\t\t\tonSecondaryAction={goToLogin}\n\t\t\ttitle={t('bootstrap.failure.modal.title', 'Something went wrong...')}\n\t\t\tconfirmLabel={t('bootstrap.failure.modal.confirmButtonLabel', 'refresh')}\n\t\t\tsecondaryActionLabel={t('bootstrap.failure.modal.secondaryButtonLabel', 'login page')}\n\t\t\tonConfirm={onConfirm}\n\t\t\tonClose={closeHandler}\n\t\t>\n\t\t\t<Padding all=\"small\">\n\t\t\t\t<Text overflow=\"break-word\">\n\t\t\t\t\t{t(\n\t\t\t\t\t\t'bootstrap.failure.modal.body',\n\t\t\t\t\t\t'Some technical issues occurred while processing your request. Please try to refresh the page or go back to the login page.'\n\t\t\t\t\t)}\n\t\t\t\t</Text>\n\t\t\t</Padding>\n\t\t</Modal>\n\t);\n};\n\nexport const Loader = (): JSX.Element => {\n\tconst [open, setOpen] = useState(false);\n\tconst closeHandler = useCallback(() => setOpen(false), []);\n\n\tuseEffect(() => {\n\t\tPromise.allSettled([loginConfig(), getComponents(), getInfo()]).then(\n\t\t\t(promiseSettledResultArray) => {\n\t\t\t\tconst [, getComponentsPromiseSettledResult, getInfoPromiseSettledResult] =\n\t\t\t\t\tpromiseSettledResultArray;\n\n\t\t\t\tconst promiseRejectedResult = find(\n\t\t\t\t\t[getComponentsPromiseSettledResult, getInfoPromiseSettledResult],\n\t\t\t\t\tisPromiseRejectedResult\n\t\t\t\t);\n\t\t\t\tif (promiseRejectedResult) {\n\t\t\t\t\tif (typeof promiseRejectedResult.reason === 'string') {\n\t\t\t\t\t\tconsole.error(promiseRejectedResult.reason);\n\t\t\t\t\t} else if ('message' in promiseRejectedResult.reason) {\n\t\t\t\t\t\tconsole.error(promiseRejectedResult.reason.message);\n\t\t\t\t\t}\n\t\t\t\t\tsetOpen(true);\n\t\t\t\t}\n\t\t\t\tif (isPromiseFulfilledResult(getComponentsPromiseSettledResult)) {\n\t\t\t\t\tloadApps(Object.values(useAppStore.getState().apps));\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\treturn () => {\n\t\t\tunloadAllApps();\n\t\t};\n\t}, []);\n\treturn <LoaderFailureModal open={open} closeHandler={closeHandler} />;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { LoginConfigStore } from '../../types/loginConfig';\nimport { LOGIN_V3_CONFIG_PATH } from '../constants';\nimport { getClientTitle, getFavicon } from '../store/login/getters';\nimport { useLoginConfigStore } from '../store/login/store';\n\nexport const loginConfig = (): Promise<void> =>\n\tfetch(LOGIN_V3_CONFIG_PATH)\n\t\t.then((response) => response.json())\n\t\t.then((data: LoginConfigStore) => {\n\t\t\tuseLoginConfigStore.setState(data);\n\t\t})\n\t\t.finally(() => {\n\t\t\tuseLoginConfigStore.setState({ loaded: true });\n\t\t\tconst favicon = document.getElementById('favicon');\n\t\t\tif (favicon && favicon instanceof HTMLLinkElement) {\n\t\t\t\tfavicon.href = getFavicon();\n\t\t\t}\n\t\t\tdocument.title = getClientTitle();\n\t\t});\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { filter } from 'lodash';\n\nimport { CarbonioModule } from '../../types';\nimport { useAppStore } from '../store/app';\n\nexport const getComponents = (): Promise<void> =>\n\tfetch('/static/iris/components.json')\n\t\t.then((response) => {\n\t\t\tif (response.ok) {\n\t\t\t\treturn response.json();\n\t\t\t}\n\t\t\tthrow Error(response.statusText);\n\t\t})\n\t\t.then(({ components }: { components: Array<CarbonioModule> }) => {\n\t\t\tuseAppStore\n\t\t\t\t.getState()\n\t\t\t\t.setters.addApps(filter(components, ({ type }) => type === 'shell' || type === 'carbonio'));\n\t\t});\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { getSoapFetch } from './fetch';\nimport { GetInfoResponse } from '../../types';\nimport { SHELL_APP_ID } from '../constants';\nimport { useAccountStore } from '../store/account';\nimport { normalizeAccount } from '../store/account/normalization';\nimport { useNetworkStore } from '../store/network';\nimport { parsePollingInterval } from '../store/network/utils';\n\nexport const getInfo = (): Promise<void> =>\n\tgetSoapFetch(SHELL_APP_ID)<{ _jsns: string; rights: string }, GetInfoResponse>('GetInfo', {\n\t\t_jsns: 'urn:zimbraAccount',\n\t\trights: 'sendAs,sendAsDistList,viewFreeBusy,sendOnBehalfOf,sendOnBehalfOfDistList'\n\t}).then((res: GetInfoResponse): void => {\n\t\tif (res) {\n\t\t\tconst { account, settings, version } = normalizeAccount(res);\n\t\t\tuseNetworkStore.setState({\n\t\t\t\tpollingInterval: parsePollingInterval(settings)\n\t\t\t});\n\t\t\tuseAccountStore.setState({\n\t\t\t\tauthenticated: true,\n\t\t\t\taccount,\n\t\t\t\tsettings,\n\t\t\t\tzimbraVersion: version\n\t\t\t});\n\t\t}\n\t});\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { GetInfoResponse, Account, AccountSettings } from '../../../types';\n\nconst normalizeSettings = (\n\tsettings: Pick<GetInfoResponse, 'attrs' | 'prefs' | 'props'>\n): AccountSettings => ({\n\tattrs: settings.attrs._attrs,\n\tprefs: settings.prefs._attrs,\n\tprops: settings.props.prop ?? []\n});\n\nexport const normalizeAccount = ({\n\tid,\n\tname,\n\tattrs,\n\tprefs,\n\tidentities,\n\tsignatures,\n\tprops,\n\tversion,\n\trights\n}: GetInfoResponse): {\n\taccount: Account;\n\tsettings: AccountSettings;\n\tversion: string;\n} => {\n\tconst settings = normalizeSettings({ attrs, prefs, props });\n\treturn {\n\t\taccount: {\n\t\t\tid,\n\t\t\tname,\n\t\t\tdisplayName: attrs._attrs.displayName,\n\t\t\tidentities,\n\t\t\tsignatures,\n\t\t\trights\n\t\t},\n\t\tsettings,\n\t\tversion\n\t};\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC } from 'react';\n\nimport { I18nextProvider } from 'react-i18next';\n\nimport { SHELL_APP_ID } from '../constants';\nimport { useI18nStore } from '../store/i18n';\n\nconst ShellI18nextProvider: FC = ({ children }) => {\n\tconst i18n = useI18nStore((s) => s.instances[SHELL_APP_ID]);\n\treturn <I18nextProvider i18n={i18n}>{children}</I18nextProvider>;\n};\nexport default ShellI18nextProvider;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, ReactElement, useEffect } from 'react';\n\nexport const NotificationPermissionChecker: FC = (): ReactElement => {\n\tuseEffect(() => {\n\t\tif (!('Notification' in window)) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn('This browser does not support desktop notifications');\n\t\t} else {\n\t\t\tNotification.requestPermission();\n\t\t}\n\t}, []);\n\n\treturn <></>;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC, useMemo } from 'react';\n\nimport { Container } from '@zextras/carbonio-design-system';\nimport { map, find } from 'lodash';\nimport { Redirect, Route, Switch, useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport AppContextProvider from '../boot/app/app-context-provider';\nimport { useAppList, useAppStore, useRoutes } from '../store/app';\n\nconst _BoardsRouterContainer = styled(Container)`\n\tflex-grow: 1;\n\tflex-basis: 0;\n\tmin-width: 0.0625rem;\n\tmax-height: calc(100vh - 3.75rem);\n\toverflow-y: auto;\n`;\n\nconst FirstAppRedirect: FC = () => {\n\tconst apps = useAppList();\n\tconst routes = useRoutes();\n\tconst location = useLocation();\n\tconst mainRoute = useMemo(\n\t\t() => find(routes, (r) => apps[0]?.name === r.app)?.route,\n\t\t[apps, routes]\n\t);\n\treturn mainRoute && location?.pathname === '/' ? (\n\t\t<Redirect exact strict from=\"/\" to={`/${mainRoute}`} />\n\t) : null;\n};\n\nconst AppViewContainer: FC = () => {\n\tconst appViews = useAppStore((s) => s.views.appView);\n\tconst routes = useMemo(\n\t\t() => [\n\t\t\t...map(appViews, (view) => (\n\t\t\t\t<Route key={view.id} path={`/${view.route}`}>\n\t\t\t\t\t<AppContextProvider key={view.app} pkg={view.app}>\n\t\t\t\t\t\t<view.component />\n\t\t\t\t\t</AppContextProvider>\n\t\t\t\t</Route>\n\t\t\t))\n\t\t],\n\t\t[appViews]\n\t);\n\n\treturn (\n\t\t<_BoardsRouterContainer>\n\t\t\t<Container mainAlignment=\"flex-start\">\n\t\t\t\t<Switch>{routes}</Switch>\n\t\t\t\t<FirstAppRedirect />\n\t\t\t</Container>\n\t\t</_BoardsRouterContainer>\n\t);\n};\n\nexport default AppViewContainer;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC, useEffect, useMemo } from 'react';\n\nimport { createMemoryHistory } from 'history';\nimport { find, startsWith } from 'lodash';\nimport { Route, Router, useHistory } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { Board } from '../../../types';\nimport AppContextProvider from '../../boot/app/app-context-provider';\nimport { useAppStore } from '../../store/app';\nimport { BoardProvider, updateBoard, useBoardStore } from '../../store/boards';\nimport { stopPropagation } from '../../utils/utils';\n\nconst BoardContainer = styled.div<{ show: boolean }>`\n\tdisplay: ${(props): string => (props.show ? 'block' : 'none')};\n\theight: 100%;\n\twidth: 100%;\n\toverflow-y: auto;\n\t&::-webkit-scrollbar {\n\t\twidth: 0.5rem;\n\t}\n\n\t&::-webkit-scrollbar-track {\n\t\tbackground-color: transparent;\n\t}\n\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: ${({ theme }): string => theme.palette.gray3.regular};\n\t\tborder-radius: 0.25rem;\n\t}\n`;\n\nexport const AppBoard: FC<{ board: Board }> = ({ board }) => {\n\tconst current = useBoardStore((s) => s.current);\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\tconst history = useMemo(() => createMemoryHistory({ initialEntries: [board.url] }), []);\n\tconst boardViews = useAppStore((s) => s.views.board);\n\tconst windowHistory = useHistory();\n\tconst route = useMemo(() => {\n\t\tconst view = find(boardViews, (v) => v.id === board.url || startsWith(board.url, v.route));\n\t\tif (view)\n\t\t\treturn (\n\t\t\t\t<Route key={view.id} path={view.route}>\n\t\t\t\t\t<AppContextProvider key={view.id} pkg={view.app}>\n\t\t\t\t\t\t<BoardProvider id={board.id}>\n\t\t\t\t\t\t\t<view.component windowHistory={windowHistory} />\n\t\t\t\t\t\t</BoardProvider>\n\t\t\t\t\t</AppContextProvider>\n\t\t\t\t</Route>\n\t\t\t);\n\t\treturn null;\n\t}, [board.id, board.url, boardViews, windowHistory]);\n\tuseEffect(() => {\n\t\tconst unlisten = history.listen(({ location }) => {\n\t\t\tif (`${location.pathname}${location.search}${location.hash}` !== board.url) {\n\t\t\t\tupdateBoard(board.id, { url: `${location.pathname}${location.search}${location.hash}` });\n\t\t\t}\n\t\t});\n\t\treturn () => {\n\t\t\tunlisten();\n\t\t};\n\t}, [board.url, board.id, history]);\n\n\tuseEffect(() => {\n\t\tconst l = history.location;\n\t\tif (`${l.pathname}${l.search}${l.hash}` !== board.url) {\n\t\t\thistory.push(board.url);\n\t\t}\n\t}, [board.url, history]);\n\n\treturn (\n\t\t<BoardContainer show={current === board.id} onMouseDown={stopPropagation}>\n\t\t\t<Router history={history}>{route}</Router>\n\t\t</BoardContainer>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC, useCallback, useEffect, useRef, useState } from 'react';\n\nimport {\n\tContainer,\n\tIcon,\n\tIconButton,\n\tRow,\n\tRowProps,\n\tText,\n\tTooltip\n} from '@zextras/carbonio-design-system';\nimport styled, { css, SimpleInterpolation } from 'styled-components';\n\nimport { closeBoard, setCurrentBoard, useBoardStore } from '../../store/boards';\nimport { getT } from '../../store/i18n';\nimport './board-tab.css';\n\nconst TabContainer = styled(Row)<RowProps & { active: boolean }>`\n\tcontainer-type: inline-size;\n\tcontainer-name: tab;\n\tmax-width: calc(3rem + 15ch);\n\tmin-width: 1rem;\n\tflex-grow: 1;\n\tflex-basis: 0;\n\tcursor: pointer;\n\theight: 1.75rem;\n\tuser-select: none;\n\tbackground-color: ${({ theme, active }): string =>\n\t\tactive ? theme.palette.gray3.regular : theme.palette.gray5.regular};\n\tgap: 0.25rem;\n\tborder-radius: 0.25rem;\n\tmargin-left: 0.25rem;\n\tmargin-right: 0.25rem;\n\toverflow: hidden;\n\t${({ active }): SimpleInterpolation =>\n\t\tactive &&\n\t\tcss`\n\t\t\tmin-width: calc(3rem + 15ch);\n\t\t`}\n`;\n\nconst CloseContainer = styled(Container)`\n\tmargin-left: auto;\n`;\n\nconst TabIcon = styled(Icon)`\n\tmin-width: 1.5rem;\n`;\n\nconst CustomText = styled(Text)<{ overflowing: boolean }>`\n\t${({ overflowing }): SimpleInterpolation =>\n\t\toverflowing &&\n\t\tcss`\n\t\t\tmask-image: linear-gradient(90deg, #000 60%, transparent);\n\t\t`}\n\ttext-overflow: unset;\n`;\n\nconst VerticalDivider = styled(Container)`\n\twidth: 0.0625rem;\n\tmin-width: 0.0625rem;\n\theight: 2.25rem;\n\tbackground: ${({ theme }): string => theme.palette.gray3.regular};\n`;\n\nexport const AppBoardTab: FC<{ id: string; icon: string; title: string; firstTab: boolean }> = ({\n\tid,\n\ticon,\n\ttitle,\n\tfirstTab\n}) => {\n\tconst current = useBoardStore((s) => s.current);\n\tconst t = getT();\n\tconst onClick = useCallback(\n\t\t(event: React.SyntheticEvent<HTMLDivElement>) => {\n\t\t\tif (!event.defaultPrevented) {\n\t\t\t\tsetCurrentBoard(id);\n\t\t\t}\n\t\t},\n\t\t[id]\n\t);\n\tconst onRemove = useCallback(\n\t\t(ev: React.SyntheticEvent | Event) => {\n\t\t\tif (!ev.defaultPrevented) {\n\t\t\t\tev.stopPropagation();\n\t\t\t\tcloseBoard(id);\n\t\t\t}\n\t\t},\n\t\t[id]\n\t);\n\n\tconst textRef = useRef<HTMLDivElement>(null);\n\tconst [textOverflowing, setTextOverflowing] = useState(false);\n\tconst resizeObserverRef = useRef<ResizeObserver>();\n\tuseEffect(() => {\n\t\tif (textRef.current && !resizeObserverRef.current) {\n\t\t\tresizeObserverRef.current = new ResizeObserver(() => {\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tif (textRef.current) {\n\t\t\t\t\t\tsetTextOverflowing(textRef.current.offsetWidth < textRef.current.scrollWidth);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tresizeObserverRef.current.observe(textRef.current);\n\t\t}\n\n\t\treturn (): void => {\n\t\t\tresizeObserverRef.current?.disconnect();\n\t\t};\n\t}, [textRef]);\n\n\treturn (\n\t\t<>\n\t\t\t{!firstTab && <VerticalDivider />}\n\t\t\t<TabContainer\n\t\t\t\twrap={'nowrap'}\n\t\t\t\torientation=\"row\"\n\t\t\t\tmainAlignment={'flex-start'}\n\t\t\t\tonClick={onClick}\n\t\t\t\tdata-testid={`board-tab-${id}`}\n\t\t\t\tpadding={{ horizontal: 'extrasmall' }}\n\t\t\t\tactive={current === id}\n\t\t\t>\n\t\t\t\t<TabIcon icon={icon} size=\"large\" />\n\t\t\t\t<Tooltip label={title} placement=\"top\" maxWidth=\"700px\" triggerRef={textRef}>\n\t\t\t\t\t<CustomText\n\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\tweight=\"regular\"\n\t\t\t\t\t\tcolor={current === id ? 'text' : 'secondary'}\n\t\t\t\t\t\toverflowing={textOverflowing}\n\t\t\t\t\t\tclassName=\"tab-text\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</CustomText>\n\t\t\t\t</Tooltip>\n\t\t\t\t<CloseContainer orientation={'row'} width={'fit'}>\n\t\t\t\t\t<Tooltip label={t('board.close_tab', 'Close Tab')} placement=\"top\">\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tclassName=\"tab-close-icon-button\"\n\t\t\t\t\t\t\ticonColor=\"secondary\"\n\t\t\t\t\t\t\ticon=\"Close\"\n\t\t\t\t\t\t\tonClick={onRemove}\n\t\t\t\t\t\t\tstyle={{ padding: '0.125rem', width: '1.5rem', height: '1.5rem' }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</CloseContainer>\n\t\t\t</TabContainer>\n\t\t</>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React from 'react';\n\nimport { Row } from '@zextras/carbonio-design-system';\nimport { isEmpty, map } from 'lodash';\nimport styled from 'styled-components';\n\nimport { AppBoardTab } from './board-tab';\nimport { useBoardStore } from '../../store/boards';\n\nconst CustomRow = styled(Row)`\n\toverflow-x: auto;\n\t&::-webkit-scrollbar {\n\t\theight: 0.5rem;\n\t}\n`;\n\nexport const TabsList = (): JSX.Element => {\n\tconst { boards, orderedBoards } = useBoardStore();\n\treturn (\n\t\t<CustomRow wrap=\"nowrap\" height=\"100%\" mainAlignment=\"flex-start\" takeAvailableSpace>\n\t\t\t{boards &&\n\t\t\t\t!isEmpty(orderedBoards) &&\n\t\t\t\tmap(orderedBoards, (boardId, idx) => (\n\t\t\t\t\t<AppBoardTab\n\t\t\t\t\t\tkey={boardId}\n\t\t\t\t\t\tid={boardId}\n\t\t\t\t\t\ttitle={boards[boardId].title}\n\t\t\t\t\t\ticon={boards[boardId].icon}\n\t\t\t\t\t\tfirstTab={idx === 0}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t</CustomRow>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { CSSProperties, useCallback, useEffect, useRef } from 'react';\n\nimport { find, forEach } from 'lodash';\n\nimport { useLocalStorage } from './useLocalStorage';\nimport {\n\tcreateExportForTestOnly,\n\tsetElementSizeAndPosition,\n\tsetGlobalCursor,\n\tSizeAndPosition\n} from '../../utils/utils';\n\n/**\n * Define the border following the cardinal points (north, south, west, east).\n * Similar to the definition of the cursor for the pointer\n */\nexport type Border = 'n' | 's' | 'e' | 'w' | 'ne' | 'sw' | 'nw' | 'se';\n\ntype UseResizableReturnType = React.MouseEventHandler;\n\ntype ResizeOptions = {\n\tlocalStorageKey?: string;\n\tkeepSynchedWithStorage?: boolean;\n};\n\nexport const BORDERS: Border[] = ['n', 's', 'e', 'w', 'ne', 'se', 'sw', 'nw'];\n\nexport function getCursorFromBorder(border: Border): NonNullable<CSSProperties['cursor']> {\n\tconst direction = find(\n\t\t[\n\t\t\t['n', 's'],\n\t\t\t['e', 'w'],\n\t\t\t['ne', 'sw'],\n\t\t\t['nw', 'se']\n\t\t],\n\t\t(borders) => borders.includes(border)\n\t)?.join('');\n\treturn (direction && direction.concat('-resize')) || '';\n}\n\nfunction calcNewSizeAndPosition(\n\tborder: Border,\n\tfrom: { clientTop: number; clientLeft: number } & SizeAndPosition,\n\tmouseEvent: MouseEvent\n): SizeAndPosition {\n\tconst newSizeAndPosition = {\n\t\ttop: from.top,\n\t\tleft: from.left,\n\t\theight: from.height,\n\t\twidth: from.width\n\t};\n\tif (border.includes('n')) {\n\t\tconst heightDifference = from.clientTop - mouseEvent.clientY;\n\t\tnewSizeAndPosition.height = from.height + heightDifference;\n\t\tnewSizeAndPosition.top = from.top - heightDifference;\n\t}\n\tif (border.includes('s')) {\n\t\tnewSizeAndPosition.height = mouseEvent.clientY - from.clientTop;\n\t}\n\tif (border.includes('e')) {\n\t\tnewSizeAndPosition.width = mouseEvent.clientX - from.clientLeft;\n\t}\n\tif (border.includes('w')) {\n\t\tconst widthDifference = from.clientLeft - mouseEvent.clientX;\n\t\tnewSizeAndPosition.width = from.width + widthDifference;\n\t\tnewSizeAndPosition.left = from.left - widthDifference;\n\t}\n\treturn newSizeAndPosition;\n}\n\nexport const useResize = (\n\telementToResizeRef: React.RefObject<HTMLElement>,\n\tborder: Border,\n\toptions?: ResizeOptions\n): UseResizableReturnType => {\n\tconst initialSizeAndPositionRef = useRef<Parameters<typeof calcNewSizeAndPosition>[1]>();\n\tconst [lastSavedSizeAndPosition, setLastSavedSizeAndPosition] = useLocalStorage<\n\t\tPartial<SizeAndPosition>\n\t>(\n\t\toptions?.localStorageKey || 'use-resize-data',\n\t\t{},\n\t\t{ keepSynchedWithStorage: options?.keepSynchedWithStorage }\n\t);\n\tconst lastSizeAndPositionRef = useRef<Partial<SizeAndPosition>>(lastSavedSizeAndPosition);\n\n\tuseEffect(() => {\n\t\tlastSizeAndPositionRef.current = { ...lastSavedSizeAndPosition };\n\t}, [lastSavedSizeAndPosition]);\n\n\tconst resizeElement = useCallback(\n\t\t({ width, height, top, left }: SizeAndPosition) => {\n\t\t\tif (elementToResizeRef.current) {\n\t\t\t\tconst elementToResize = elementToResizeRef.current;\n\t\t\t\tconst sizeAndPositionToApply: Partial<SizeAndPosition> = lastSizeAndPositionRef.current;\n\t\t\t\tconst computedStyle = getComputedStyle(elementToResizeRef.current);\n\t\t\t\tconst minHeight = parseFloat(computedStyle.minHeight) || 0;\n\t\t\t\tconst minWidth = parseFloat(computedStyle.minWidth) || 0;\n\t\t\t\tif (top >= 0 && height >= minHeight) {\n\t\t\t\t\tsizeAndPositionToApply.height = height;\n\t\t\t\t\tsizeAndPositionToApply.top = top;\n\t\t\t\t}\n\t\t\t\tif (left >= 0 && width >= minWidth) {\n\t\t\t\t\tsizeAndPositionToApply.width = width;\n\t\t\t\t\tsizeAndPositionToApply.left = left;\n\t\t\t\t}\n\t\t\t\tforEach(sizeAndPositionToApply, (value, key) => {\n\t\t\t\t\tsetElementSizeAndPosition(elementToResize, key as keyof SizeAndPosition, value);\n\t\t\t\t});\n\t\t\t\t// reset bottom in favor of top\n\t\t\t\telementToResize.style.bottom = '';\n\t\t\t\t// reset right in favor of left\n\t\t\t\telementToResize.style.right = '';\n\t\t\t\tlastSizeAndPositionRef.current = sizeAndPositionToApply;\n\t\t\t}\n\t\t},\n\t\t[elementToResizeRef]\n\t);\n\n\tconst onMouseMove = useCallback(\n\t\t(mouseMoveEvent: MouseEvent) => {\n\t\t\tif (initialSizeAndPositionRef.current) {\n\t\t\t\tconst newSizeAndPosition = calcNewSizeAndPosition(\n\t\t\t\t\tborder,\n\t\t\t\t\tinitialSizeAndPositionRef.current,\n\t\t\t\t\tmouseMoveEvent\n\t\t\t\t);\n\t\t\t\tresizeElement(newSizeAndPosition);\n\t\t\t}\n\t\t},\n\t\t[border, resizeElement]\n\t);\n\n\tconst onMouseUp = useCallback(() => {\n\t\tsetGlobalCursor(undefined);\n\t\tdocument.body.removeEventListener('mousemove', onMouseMove);\n\t\tdocument.body.removeEventListener('mouseup', onMouseUp);\n\t\tif (options?.localStorageKey) {\n\t\t\tsetLastSavedSizeAndPosition(lastSizeAndPositionRef.current);\n\t\t}\n\t}, [onMouseMove, options?.localStorageKey, setLastSavedSizeAndPosition]);\n\n\treturn useCallback(\n\t\t(mouseDownEvent: React.MouseEvent | MouseEvent) => {\n\t\t\tif (!mouseDownEvent.defaultPrevented && elementToResizeRef.current) {\n\t\t\t\tmouseDownEvent.preventDefault();\n\t\t\t\tconst clientRect = elementToResizeRef.current.getBoundingClientRect();\n\t\t\t\tinitialSizeAndPositionRef.current = {\n\t\t\t\t\twidth: elementToResizeRef.current.offsetWidth,\n\t\t\t\t\theight: elementToResizeRef.current.offsetHeight,\n\t\t\t\t\ttop: elementToResizeRef.current.offsetTop,\n\t\t\t\t\tleft: elementToResizeRef.current.offsetLeft,\n\t\t\t\t\tclientTop: clientRect.top,\n\t\t\t\t\tclientLeft: clientRect.left\n\t\t\t\t};\n\t\t\t\tsetGlobalCursor(getCursorFromBorder(border));\n\t\t\t\tdocument.body.addEventListener('mousemove', onMouseMove);\n\t\t\t\tdocument.body.addEventListener('mouseup', onMouseUp);\n\t\t\t}\n\t\t},\n\t\t[border, elementToResizeRef, onMouseMove, onMouseUp]\n\t);\n};\n\nexport const exportForTest = createExportForTestOnly({ calcNewSizeAndPosition });\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { CSSProperties, useMemo, useRef } from 'react';\n\nimport { Container, ContainerProps } from '@zextras/carbonio-design-system';\nimport styled, { css, SimpleInterpolation } from 'styled-components';\n\nimport { Border, BORDERS, getCursorFromBorder, useResize } from '../hooks/useResize';\n\ninterface ResizableBorderProps {\n\tborder: Border;\n\telementToResize: React.RefObject<HTMLElement>;\n\tlocalStorageKey?: string;\n\tkeepSynchedWithStorage?: boolean;\n}\n\ninterface ResizableContainerProps extends ContainerProps {\n\telementToResize: React.RefObject<HTMLElement>;\n\tlocalStorageKey?: string;\n\tkeepSynchedWithStorage?: boolean;\n\tdisabled?: boolean;\n\tminSize?: { width: number; height: number };\n}\n\ninterface BorderWithResizeProps {\n\t$cursor: CSSProperties['cursor'];\n\t$width: string;\n\t$height: string;\n\t$position: {\n\t\ttop?: number;\n\t\tbottom?: number;\n\t\tleft?: number;\n\t\tright?: number;\n\t};\n\t$translateTransform?: { x?: string; y?: string };\n}\n\nconst MainContainer = styled(Container)`\n\tposition: relative;\n\twidth: 100%;\n\theight: 100%;\n`;\n\nconst BorderWithResize = styled.div<\n\tBorderWithResizeProps & {\n\t\theight?: never;\n\t\twidth?: never;\n\t}\n>`\n\tposition: absolute;\n\tz-index: 2;\n\tcursor: ${({ $cursor }): CSSProperties['cursor'] => $cursor};\n\twidth: ${({ $width }): string => $width};\n\theight: ${({ $height }): string => $height};\n\t${({ $position }): SimpleInterpolation => $position};\n\t${({ $translateTransform }): SimpleInterpolation =>\n\t\t($translateTransform?.x || $translateTransform?.y) &&\n\t\tcss`\n\t\t\ttransform: translate(${$translateTransform?.x || 0}, ${$translateTransform?.y || 0});\n\t\t`}\n`;\n\nconst ResizableBorder = ({\n\tborder,\n\telementToResize,\n\tlocalStorageKey,\n\tkeepSynchedWithStorage\n}: ResizableBorderProps): JSX.Element => {\n\tconst borderRef = useRef<HTMLDivElement>(null);\n\tconst resizeHandler = useResize(elementToResize, border, {\n\t\tlocalStorageKey,\n\t\tkeepSynchedWithStorage\n\t});\n\n\tconst sizes = useMemo<Pick<BorderWithResizeProps, '$width' | '$height'>>(() => {\n\t\tswitch (border) {\n\t\t\tcase 'n':\n\t\t\tcase 's':\n\t\t\t\treturn {\n\t\t\t\t\t$width: '100%',\n\t\t\t\t\t$height: '0.25rem'\n\t\t\t\t};\n\t\t\tcase 'e':\n\t\t\tcase 'w':\n\t\t\t\treturn {\n\t\t\t\t\t$width: '0.25rem',\n\t\t\t\t\t$height: '100%'\n\t\t\t\t};\n\t\t\tcase 'ne':\n\t\t\tcase 'nw':\n\t\t\tcase 'se':\n\t\t\tcase 'sw':\n\t\t\tdefault:\n\t\t\t\treturn {\n\t\t\t\t\t$width: '0.25rem',\n\t\t\t\t\t$height: '0.25rem'\n\t\t\t\t};\n\t\t}\n\t}, [border]);\n\n\tconst positions = useMemo<\n\t\tPick<BorderWithResizeProps, '$position' | '$translateTransform'>\n\t>(() => {\n\t\tconst $position: BorderWithResizeProps['$position'] = {};\n\t\tconst $translateTransform: BorderWithResizeProps['$translateTransform'] = {};\n\t\tif (border.includes('n')) {\n\t\t\t$position.top = 0;\n\t\t\t$translateTransform.y = '-50%';\n\t\t}\n\t\tif (border.includes('s')) {\n\t\t\t$position.bottom = 0;\n\t\t\t$translateTransform.y = '50%';\n\t\t}\n\t\tif (border.includes('e')) {\n\t\t\t$position.right = 0;\n\t\t\t$translateTransform.x = '50%';\n\t\t}\n\t\tif (border.includes('w')) {\n\t\t\t$position.left = 0;\n\t\t\t$translateTransform.x = '-50%';\n\t\t}\n\t\treturn { $position, $translateTransform };\n\t}, [border]);\n\n\treturn (\n\t\t<BorderWithResize\n\t\t\tref={borderRef}\n\t\t\t{...sizes}\n\t\t\t{...positions}\n\t\t\t$cursor={getCursorFromBorder(border)}\n\t\t\tonMouseDown={resizeHandler}\n\t\t\tdata-testid={`resizable-border-${border}`}\n\t\t/>\n\t);\n};\n\nexport const ResizableContainer = ({\n\telementToResize,\n\tchildren,\n\tlocalStorageKey,\n\tdisabled = false,\n\tkeepSynchedWithStorage,\n\t...rest\n}: ResizableContainerProps): JSX.Element => {\n\tconst borders = useMemo(\n\t\t() =>\n\t\t\tBORDERS.map((border) => (\n\t\t\t\t<ResizableBorder\n\t\t\t\t\tkey={`resizable-border-${border}`}\n\t\t\t\t\tborder={border}\n\t\t\t\t\telementToResize={elementToResize}\n\t\t\t\t\tlocalStorageKey={localStorageKey}\n\t\t\t\t\tkeepSynchedWithStorage={keepSynchedWithStorage}\n\t\t\t\t/>\n\t\t\t)),\n\t\t[elementToResize, keepSynchedWithStorage, localStorageKey]\n\t);\n\n\treturn (\n\t\t<MainContainer {...rest}>\n\t\t\t{!disabled && borders}\n\t\t\t{children}\n\t\t</MainContainer>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { CSSProperties, useCallback, useEffect, useMemo, useRef, useState } from 'react';\n\nimport {\n\tContainer,\n\tDivider,\n\tDropdown,\n\tDropdownItem,\n\tIcon,\n\tIconButton,\n\tIconButtonProps,\n\tPadding,\n\tRow,\n\tText,\n\tTooltip\n} from '@zextras/carbonio-design-system';\nimport { debounce, isEmpty, map, noop, size } from 'lodash';\nimport styled, { css, SimpleInterpolation } from 'styled-components';\n\nimport { AppBoard } from './board';\nimport { TabsList } from './board-tab-list';\nimport { ResizableContainer } from './resizable-container';\nimport {\n\tBOARD_CONTAINER_ZINDEX,\n\tBOARD_HEADER_HEIGHT,\n\tBOARD_MIN_VISIBILITY,\n\tBOARD_TAB_WIDTH,\n\tHEADER_BAR_HEIGHT,\n\tLOCAL_STORAGE_BOARD_SIZE,\n\tPRIMARY_BAR_WIDTH\n} from '../../constants';\nimport { getApp } from '../../store/app';\nimport {\n\tcloseAllBoards,\n\tcloseBoard,\n\texpandBoards,\n\tminimizeBoards,\n\tonGoToPanel,\n\treduceBoards,\n\tsetCurrentBoard,\n\tuseBoardStore\n} from '../../store/boards';\nimport { getT } from '../../store/i18n';\nimport { setElementSizeAndPosition, SizeAndPosition } from '../../utils/utils';\nimport { useLocalStorage } from '../hooks/useLocalStorage';\nimport { useMove } from '../hooks/useMove';\n\nexport const BOARD_DEFAULT_POSITION: Pick<CSSProperties, 'top' | 'left' | 'right' | 'bottom'> = {\n\tleft: '1.5rem',\n\tbottom: '0'\n};\n\nconst BoardContainerComp = styled.div<{ expanded: boolean; minimized: boolean }>`\n\tposition: fixed;\n\twidth: calc(100vw - ${PRIMARY_BAR_WIDTH});\n\theight: calc(100vh - ${HEADER_BAR_HEIGHT});\n\ttop: ${HEADER_BAR_HEIGHT};\n\tleft: ${PRIMARY_BAR_WIDTH};\n\tbackground-color: rgba(0, 0, 0, 0);\n\tpointer-events: none;\n\tz-index: ${BOARD_CONTAINER_ZINDEX};\n\t${({ expanded }): SimpleInterpolation =>\n\t\texpanded &&\n\t\tcss`\n\t\t\tbackground-color: rgba(0, 0, 0, 0.5);\n\t\t\tpointer-events: auto;\n\t\t`}\n\t${({ minimized }): SimpleInterpolation =>\n\t\tminimized &&\n\t\tcss`\n\t\t\tdisplay: none;\n\t\t`}\n`;\n\nconst OverflowContainer = styled(Container)`\n\toverflow: auto;\n`;\n\nconst Board = styled(Container)<{ expanded: boolean }>`\n\tz-index: 5;\n\tposition: absolute;\n\t${BOARD_DEFAULT_POSITION};\n\n\t${({ width }): SimpleInterpolation =>\n\t\t!width &&\n\t\tcss`\n\t\t\t/* default width and aspect ratio */\n\t\t\taspect-ratio: 4 / 3;\n\t\t\twidth: auto;\n\t\t`}\n\n\t${({ height }): SimpleInterpolation =>\n\t\t!height &&\n\t\tcss`\n\t\t\t/* default height */\n\t\t\theight: 70vh;\n\t\t\t/* on higher screen, reduce the default height */\n\t\t\t@media (min-height: 800px) {\n\t\t\t\theight: 60vh;\n\t\t\t}\n\t\t\t@media (min-height: 1000px) {\n\t\t\t\theight: 50vh;\n\t\t\t}\n\t\t`}\n\n\tmin-height: calc(${BOARD_HEADER_HEIGHT} * 3);\n\tmin-width: calc(${BOARD_TAB_WIDTH} * 2);\n\tbox-shadow: 0 0.125rem 0.3125rem 0 rgba(125, 125, 125, 0.5);\n\tpointer-events: auto;\n\tmax-height: 100%;\n\tmax-width: 100%;\n\t${({ expanded }): SimpleInterpolation =>\n\t\texpanded &&\n\t\tcss`\n\t\t\theight: calc(100% - 1.5rem) !important;\n\t\t\twidth: calc(100% - 3rem) !important;\n\t\t\ttop: 1.5rem !important;\n\t\t\tleft: 1.5rem !important;\n\t\t\tmin-height: auto;\n\t\t`};\n`;\n\nconst BoardHeader = styled(Row)`\n\tposition: relative;\n`;\n\nconst BoardDetailContainer = styled(Row)`\n\tmin-height: 0;\n`;\nconst BackButton = styled(IconButton)``;\nconst Actions = styled(Row)``;\n\ninterface ListItemContentProps {\n\ticon?: string;\n\tlabel: string;\n\tselected?: boolean;\n\tapp?: string;\n\tboardId: string;\n}\n\nfunction ListItemContent({\n\ticon,\n\tlabel,\n\tselected,\n\tapp,\n\tboardId\n}: ListItemContentProps): JSX.Element {\n\tconst t = getT();\n\tconst onClose = useCallback<IconButtonProps['onClick']>(\n\t\t(ev) => {\n\t\t\tev.stopPropagation();\n\t\t\tcloseBoard(boardId);\n\t\t},\n\t\t[boardId]\n\t);\n\treturn (\n\t\t<Container orientation=\"horizontal\" mainAlignment=\"flex-start\" gap={'0.5rem'}>\n\t\t\t{icon && <Icon icon={icon} size={'large'} color={'text'} style={{ pointerEvents: 'none' }} />}\n\t\t\t<OverflowContainer crossAlignment={'flex-start'}>\n\t\t\t\t<Text size={'medium'} weight={selected ? 'bold' : 'regular'} color={'gray0'}>\n\t\t\t\t\t{label}\n\t\t\t\t</Text>\n\t\t\t\t<Text size={'small'} weight={selected ? 'bold' : 'regular'} color={'secondary'}>\n\t\t\t\t\t{app &&\n\t\t\t\t\t\tt('board.from_app', 'From {{app}}', {\n\t\t\t\t\t\t\tapp\n\t\t\t\t\t\t})}\n\t\t\t\t</Text>\n\t\t\t</OverflowContainer>\n\t\t\t<IconButton icon={'CloseOutline'} size={'large'} onClick={onClose} />\n\t\t</Container>\n\t);\n}\n\nfunction calcPositionToRemainVisible(\n\tlastSavedPosition: number,\n\tcontainerSize: number,\n\tminVisibility: number\n): number {\n\tconst limit = containerSize - minVisibility;\n\tif (lastSavedPosition > limit) {\n\t\treturn limit > 0 ? limit : 0;\n\t}\n\treturn lastSavedPosition;\n}\n\nexport const BoardContainer = (): JSX.Element | null => {\n\tconst t = getT();\n\tconst { boards, minimized, expanded, current, orderedBoards } = useBoardStore();\n\n\tconst boardDropdownItems = useMemo(\n\t\t(): DropdownItem[] =>\n\t\t\tmap(\n\t\t\t\torderedBoards,\n\t\t\t\t(boardId): DropdownItem => ({\n\t\t\t\t\tid: boardId,\n\t\t\t\t\tlabel: boards[boardId].title,\n\t\t\t\t\ticon: boards[boardId].icon,\n\t\t\t\t\tonClick: () => setCurrentBoard(boardId),\n\t\t\t\t\tselected: boardId === current,\n\t\t\t\t\tcustomComponent: (\n\t\t\t\t\t\t<ListItemContent\n\t\t\t\t\t\t\tlabel={boards[boardId].title}\n\t\t\t\t\t\t\ticon={boards[boardId].icon}\n\t\t\t\t\t\t\tselected={boardId === current}\n\t\t\t\t\t\t\tapp={getApp(boards[boardId].app)()?.display}\n\t\t\t\t\t\t\tboardId={boardId}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t),\n\t\t[boards, current, orderedBoards]\n\t);\n\n\tconst boardRef = useRef<HTMLDivElement>(null);\n\tconst boardContainerRef = useRef<HTMLDivElement>(null);\n\tconst [lastSavedBoardSizeAndPosition, setLastSavedBoardSizeAndPosition] = useLocalStorage<\n\t\tPartial<SizeAndPosition>\n\t>(LOCAL_STORAGE_BOARD_SIZE, {});\n\tconst [currentBoardSizeAndPosition, setCurrentBoardSizeAndPosition] = useState(\n\t\tlastSavedBoardSizeAndPosition\n\t);\n\tconst lastSavedBoardSizeAndPositionRef = useRef(lastSavedBoardSizeAndPosition);\n\tconst [isMoving, moveElementHandler] = useMove(boardRef, {\n\t\tlocalStorageKey: LOCAL_STORAGE_BOARD_SIZE\n\t});\n\n\tconst isDefaultSizeAndPosition = useMemo(\n\t\t() => size(currentBoardSizeAndPosition) === 0,\n\t\t[currentBoardSizeAndPosition]\n\t);\n\tconst isBoardEmpty = useMemo(() => isEmpty(boards), [boards]);\n\n\tconst resetSizeAndPosition = useCallback(() => {\n\t\tsetLastSavedBoardSizeAndPosition({});\n\t\treduceBoards();\n\t}, [setLastSavedBoardSizeAndPosition]);\n\n\tuseEffect(() => {\n\t\t// reset position when the board is closed\n\t\tif (isBoardEmpty) {\n\t\t\tsetLastSavedBoardSizeAndPosition((prevState) => {\n\t\t\t\tconst newState = { ...prevState };\n\t\t\t\tdelete newState.left;\n\t\t\t\tdelete newState.top;\n\t\t\t\treturn newState;\n\t\t\t});\n\t\t}\n\t}, [isBoardEmpty, setLastSavedBoardSizeAndPosition]);\n\n\tuseEffect(() => {\n\t\tif (boardRef.current) {\n\t\t\tconst boardElement = boardRef.current;\n\t\t\tsetElementSizeAndPosition(boardElement, 'width', currentBoardSizeAndPosition.width);\n\t\t\tsetElementSizeAndPosition(boardElement, 'height', currentBoardSizeAndPosition.height);\n\t\t\tsetElementSizeAndPosition(boardElement, 'top', currentBoardSizeAndPosition.top);\n\t\t\tsetElementSizeAndPosition(boardElement, 'left', currentBoardSizeAndPosition.left);\n\t\t}\n\t}, [currentBoardSizeAndPosition]);\n\n\tconst updateBoardPosition = useMemo(\n\t\t() =>\n\t\t\tdebounce(\n\t\t\t\t() => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tboardContainerRef.current &&\n\t\t\t\t\t\tboardContainerRef.current.clientHeight > 0 &&\n\t\t\t\t\t\tboardContainerRef.current.clientWidth > 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst newSizeAndPosition: Partial<SizeAndPosition> = {};\n\t\t\t\t\t\tif (lastSavedBoardSizeAndPositionRef.current.width !== undefined) {\n\t\t\t\t\t\t\tnewSizeAndPosition.width = lastSavedBoardSizeAndPositionRef.current.width;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (lastSavedBoardSizeAndPositionRef.current.height !== undefined) {\n\t\t\t\t\t\t\tnewSizeAndPosition.height = lastSavedBoardSizeAndPositionRef.current.height;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst boardContainer = boardContainerRef.current;\n\t\t\t\t\t\tif (lastSavedBoardSizeAndPositionRef.current.top !== undefined) {\n\t\t\t\t\t\t\tnewSizeAndPosition.top = calcPositionToRemainVisible(\n\t\t\t\t\t\t\t\tlastSavedBoardSizeAndPositionRef.current.top,\n\t\t\t\t\t\t\t\tboardContainer.clientHeight,\n\t\t\t\t\t\t\t\tBOARD_MIN_VISIBILITY.top\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (lastSavedBoardSizeAndPositionRef.current.left !== undefined) {\n\t\t\t\t\t\t\tnewSizeAndPosition.left = calcPositionToRemainVisible(\n\t\t\t\t\t\t\t\tlastSavedBoardSizeAndPositionRef.current.left,\n\t\t\t\t\t\t\t\tboardContainer.clientWidth,\n\t\t\t\t\t\t\t\tBOARD_MIN_VISIBILITY.left\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetCurrentBoardSizeAndPosition(newSizeAndPosition);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t0,\n\t\t\t\t{ leading: false, trailing: true }\n\t\t\t),\n\t\t[]\n\t);\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('resize', updateBoardPosition);\n\t\treturn (): void => {\n\t\t\twindow.removeEventListener('resize', updateBoardPosition);\n\t\t};\n\t}, [updateBoardPosition]);\n\n\tuseEffect(() => {\n\t\tlastSavedBoardSizeAndPositionRef.current = { ...lastSavedBoardSizeAndPosition };\n\t\t// if there is a board open, then update the size and position based on the window\n\t\tif (boardRef.current) {\n\t\t\tif (size(lastSavedBoardSizeAndPosition) > 0) {\n\t\t\t\tupdateBoardPosition();\n\t\t\t} else {\n\t\t\t\tsetCurrentBoardSizeAndPosition({});\n\t\t\t}\n\t\t} else {\n\t\t\t// otherwise just align the current with the local storage data (refresh case, board is closed)\n\t\t\tsetCurrentBoardSizeAndPosition({ ...lastSavedBoardSizeAndPosition });\n\t\t}\n\n\t\treturn (): void => {\n\t\t\tupdateBoardPosition.cancel();\n\t\t};\n\t}, [lastSavedBoardSizeAndPosition, updateBoardPosition]);\n\n\tconst clickHandler = useCallback<\n\t\t(onClickFn: IconButtonProps['onClick']) => IconButtonProps['onClick']\n\t>(\n\t\t(clickFn) => (event) => {\n\t\t\tif (event.type !== 'click' || !event.defaultPrevented) {\n\t\t\t\tclickFn(event);\n\t\t\t}\n\t\t},\n\t\t[]\n\t);\n\n\treturn (\n\t\t(!isBoardEmpty && current && (\n\t\t\t<BoardContainerComp expanded={expanded} minimized={minimized} ref={boardContainerRef}>\n\t\t\t\t<Board\n\t\t\t\t\tdata-testid=\"NewItemContainer\"\n\t\t\t\t\tbackground={'gray6'}\n\t\t\t\t\tcrossAlignment=\"unset\"\n\t\t\t\t\texpanded={expanded}\n\t\t\t\t\tref={boardRef}\n\t\t\t\t\twidth={currentBoardSizeAndPosition.width}\n\t\t\t\t\theight={currentBoardSizeAndPosition.height}\n\t\t\t\t\tonMouseDown={(!expanded && moveElementHandler) || undefined}\n\t\t\t\t>\n\t\t\t\t\t<ResizableContainer\n\t\t\t\t\t\tcrossAlignment={'unset'}\n\t\t\t\t\t\telementToResize={boardRef}\n\t\t\t\t\t\tlocalStorageKey={LOCAL_STORAGE_BOARD_SIZE}\n\t\t\t\t\t\tdisabled={expanded}\n\t\t\t\t\t>\n\t\t\t\t\t\t<BoardHeader background={'gray5'}>\n\t\t\t\t\t\t\t<Padding all=\"extrasmall\">\n\t\t\t\t\t\t\t\t<Tooltip label={t('board.hide', 'Hide board')} placement=\"top\" disabled={isMoving}>\n\t\t\t\t\t\t\t\t\t<BackButton icon=\"BoardCollapseOutline\" onClick={clickHandler(minimizeBoards)} />\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t<TabsList />\n\t\t\t\t\t\t\t<Actions padding={{ all: 'extrasmall' }}>\n\t\t\t\t\t\t\t\t{boards[current]?.context?.onReturnToApp && (\n\t\t\t\t\t\t\t\t\t<Padding right=\"extrasmall\">\n\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\tlabel={t('board.open_app', 'Open in app')}\n\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\ticon={'DiagonalArrowRightUp'}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={clickHandler(onGoToPanel)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</Padding>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<Container gap={'0.25rem'} orientation={'horizontal'} width={'fit'} height={'fit'}>\n\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\tlabel={t('board.show_tabs', 'Show other tabs')}\n\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Dropdown items={boardDropdownItems}>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton icon={'ChevronDown'} onClick={clickHandler(noop)} />\n\t\t\t\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t\t\tisDefaultSizeAndPosition\n\t\t\t\t\t\t\t\t\t\t\t\t? t('board.reset_size.disabled', 'Board already at the default position')\n\t\t\t\t\t\t\t\t\t\t\t\t: t('board.reset_size.enabled', 'Return to default position and size')\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\ticon={'DiagonalArrowLeftDown'}\n\t\t\t\t\t\t\t\t\t\t\tonClick={clickHandler(resetSizeAndPosition)}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={isDefaultSizeAndPosition}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t\t\texpanded\n\t\t\t\t\t\t\t\t\t\t\t\t? t('board.reduce', 'Reduce board')\n\t\t\t\t\t\t\t\t\t\t\t\t: t('board.enlarge', 'Enlarge board')\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\ticon={expanded ? 'CollapseOutline' : 'ExpandOutline'}\n\t\t\t\t\t\t\t\t\t\t\tonClick={clickHandler(expanded ? reduceBoards : expandBoards)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\tlabel={t('board.close_tabs', 'Close all your tabs')}\n\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\tdisabled={isMoving}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<IconButton icon=\"CloseOutline\" onClick={clickHandler(closeAllBoards)} />\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</Actions>\n\t\t\t\t\t\t</BoardHeader>\n\t\t\t\t\t\t<Divider style={{ height: '0.125rem' }} />\n\t\t\t\t\t\t<BoardDetailContainer takeAvailableSpace>\n\t\t\t\t\t\t\t{map(boards, (b) => (\n\t\t\t\t\t\t\t\t<AppBoard key={b.id} board={b} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</BoardDetailContainer>\n\t\t\t\t\t</ResizableContainer>\n\t\t\t\t</Board>\n\t\t\t</BoardContainerComp>\n\t\t)) ||\n\t\tnull\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { forEach } from 'lodash';\n\nimport { useLocalStorage } from './useLocalStorage';\nimport {\n\tElementPosition,\n\tsetElementSizeAndPosition,\n\tsetGlobalCursor,\n\tSizeAndPosition\n} from '../../utils/utils';\n\ntype UseMoveReturnType = [isMoving: boolean, moveHandler: React.MouseEventHandler];\ntype MoveOptions = {\n\tlocalStorageKey?: string;\n\tkeepSynchedWithStorage?: boolean;\n};\n\nexport const BOARD_CURSOR_TIMEOUT = 250;\n\nfunction calcNewPosition(\n\tfrom: SizeAndPosition & {\n\t\tclientTop: number;\n\t\tclientLeft: number;\n\t\tmouseClientX: number;\n\t\tmouseClientY: number;\n\t},\n\tlimitContainer: HTMLElement,\n\tmouseEvent: MouseEvent\n): ElementPosition {\n\tconst limitClientRect = limitContainer.getBoundingClientRect();\n\tconst clientTopLimit = limitClientRect.top ?? 0;\n\tconst moveTopDelta = mouseEvent.clientY - from.mouseClientY;\n\tconst newClientTop = from.clientTop + moveTopDelta;\n\tconst newTop = from.top + moveTopDelta;\n\tconst clientLeftLimit = limitClientRect.left ?? 0;\n\tconst moveLeftDelta = mouseEvent.clientX - from.mouseClientX;\n\tconst newClientLeft = from.clientLeft + moveLeftDelta;\n\tconst newLeft = from.left + moveLeftDelta;\n\treturn {\n\t\tleft: newClientLeft > clientLeftLimit ? newLeft : 0,\n\t\ttop: newClientTop > clientTopLimit ? newTop : 0\n\t};\n}\n\nexport const useMove = (\n\telementToMoveRef: React.RefObject<HTMLElement>,\n\toptions?: MoveOptions\n): UseMoveReturnType => {\n\tconst [isMoving, setIsMoving] = useState(false);\n\tconst isMoveEnabledRef = useRef(false);\n\tconst initialSizeAndPositionRef = useRef<Parameters<typeof calcNewPosition>[0]>();\n\tconst [lastSavedPosition, setLastSavedPosition] = useLocalStorage<Partial<SizeAndPosition>>(\n\t\toptions?.localStorageKey || 'use-move-data',\n\t\t{},\n\t\t{ keepSynchedWithStorage: options?.keepSynchedWithStorage }\n\t);\n\tconst lastPositionRef = useRef<Partial<ElementPosition>>(lastSavedPosition);\n\tconst globalCursorSetterTimerRef = useRef<ReturnType<typeof setTimeout>>();\n\tconst shouldUpdateLocalStorageRef = useRef(false);\n\n\tconst moveElement = useCallback(\n\t\t({ left, top }: ElementPosition) => {\n\t\t\tif (elementToMoveRef.current) {\n\t\t\t\tconst elementToMove = elementToMoveRef.current;\n\t\t\t\tconst positionToApply: Partial<ElementPosition> = lastPositionRef.current;\n\t\t\t\tif (top >= 0) {\n\t\t\t\t\tpositionToApply.top = top;\n\t\t\t\t}\n\t\t\t\tif (left >= 0) {\n\t\t\t\t\tpositionToApply.left = left;\n\t\t\t\t}\n\t\t\t\tforEach(positionToApply, (value, key) => {\n\t\t\t\t\tsetElementSizeAndPosition(elementToMove, key as keyof ElementPosition, value);\n\t\t\t\t});\n\t\t\t\tlastPositionRef.current = positionToApply;\n\t\t\t}\n\t\t},\n\t\t[elementToMoveRef]\n\t);\n\n\tuseEffect(() => {\n\t\tlastPositionRef.current = { ...lastSavedPosition };\n\t}, [elementToMoveRef, lastSavedPosition]);\n\n\tconst preventClick = useCallback((event: MouseEvent) => {\n\t\tevent.preventDefault();\n\t\tdocument.body.removeEventListener('click', preventClick, { capture: true });\n\t}, []);\n\n\tconst onMouseMove = useCallback(\n\t\t(mouseMoveEvent: MouseEvent) => {\n\t\t\t// prevent clickable elements from being clicked if a move has been made\n\t\t\tdocument.body.addEventListener('click', preventClick, { capture: true });\n\t\t\tif (initialSizeAndPositionRef.current && elementToMoveRef.current) {\n\t\t\t\tconst offsetParent =\n\t\t\t\t\t(elementToMoveRef.current.offsetParent instanceof HTMLElement &&\n\t\t\t\t\t\telementToMoveRef.current.offsetParent) ||\n\t\t\t\t\tdocument.body;\n\n\t\t\t\tconst newPosition = calcNewPosition(\n\t\t\t\t\tinitialSizeAndPositionRef.current,\n\t\t\t\t\toffsetParent,\n\t\t\t\t\tmouseMoveEvent\n\t\t\t\t);\n\t\t\t\tmoveElement({\n\t\t\t\t\tleft: newPosition.left,\n\t\t\t\t\ttop: newPosition.top\n\t\t\t\t});\n\t\t\t\tshouldUpdateLocalStorageRef.current = true;\n\t\t\t}\n\t\t},\n\t\t[elementToMoveRef, moveElement, preventClick]\n\t);\n\n\tconst enableMove = useCallback(() => {\n\t\tif (document.activeElement && document.activeElement instanceof HTMLElement) {\n\t\t\tdocument.activeElement.classList.add('no-active-background');\n\t\t}\n\t\tdocument.body.addEventListener('mousemove', onMouseMove);\n\t\tsetGlobalCursor('move');\n\t\tisMoveEnabledRef.current = true;\n\t\tsetIsMoving(true);\n\t}, [onMouseMove]);\n\n\tconst disableMove = useCallback(() => {\n\t\tif (document.activeElement && document.activeElement instanceof HTMLElement) {\n\t\t\tdocument.activeElement.classList.remove('no-active-background');\n\t\t}\n\t\tdocument.body.removeEventListener('mousemove', onMouseMove);\n\t\tsetGlobalCursor(undefined);\n\t\tisMoveEnabledRef.current = false;\n\t\tsetIsMoving(false);\n\t}, [onMouseMove]);\n\n\tconst onMouseUp = useCallback(() => {\n\t\tif (globalCursorSetterTimerRef.current) {\n\t\t\tclearTimeout(globalCursorSetterTimerRef.current);\n\t\t}\n\t\tif (isMoveEnabledRef.current) {\n\t\t\tdisableMove();\n\t\t}\n\t\tdocument.body.removeEventListener('mouseup', onMouseUp);\n\t\tif (options?.localStorageKey && shouldUpdateLocalStorageRef.current) {\n\t\t\tsetLastSavedPosition(lastPositionRef.current);\n\t\t\tshouldUpdateLocalStorageRef.current = false;\n\t\t}\n\t}, [disableMove, options?.localStorageKey, setLastSavedPosition]);\n\n\tconst moveHandler = useCallback(\n\t\t(mouseDownEvent: React.MouseEvent) => {\n\t\t\tif (!mouseDownEvent.defaultPrevented && elementToMoveRef.current) {\n\t\t\t\tconst clientRect = elementToMoveRef.current.getBoundingClientRect();\n\t\t\t\tinitialSizeAndPositionRef.current = {\n\t\t\t\t\twidth: elementToMoveRef.current.offsetWidth,\n\t\t\t\t\theight: elementToMoveRef.current.offsetHeight,\n\t\t\t\t\tleft: elementToMoveRef.current.offsetLeft,\n\t\t\t\t\ttop: elementToMoveRef.current.offsetTop,\n\t\t\t\t\tclientTop: clientRect.top,\n\t\t\t\t\tclientLeft: clientRect.left,\n\t\t\t\t\tmouseClientY: mouseDownEvent.clientY,\n\t\t\t\t\tmouseClientX: mouseDownEvent.clientX\n\t\t\t\t};\n\t\t\t\tglobalCursorSetterTimerRef.current = setTimeout(enableMove, BOARD_CURSOR_TIMEOUT);\n\t\t\t\tdocument.body.addEventListener('mouseup', onMouseUp);\n\t\t\t}\n\t\t},\n\t\t[elementToMoveRef, enableMove, onMouseUp]\n\t);\n\n\treturn [isMoving, moveHandler];\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useMemo } from 'react';\n\nimport { useScreenMode } from '@zextras/carbonio-design-system';\n\nimport ShellContext from './shell-context';\n\ninterface ShellContextProviderProps {\n\tchildren: React.ReactNode;\n}\n\nconst ShellContextProvider = ({ children }: ShellContextProviderProps): JSX.Element => {\n\tconst screenMode = useScreenMode();\n\n\tconst value = useMemo(\n\t\t() => ({\n\t\t\tisMobile: screenMode === 'mobile'\n\t\t}),\n\t\t[screenMode]\n\t);\n\n\treturn <ShellContext.Provider value={value}>{children}</ShellContext.Provider>;\n};\n\nexport default ShellContextProvider;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC, useCallback, useMemo, useState } from 'react';\n\nimport {\n\tButton,\n\tContainer,\n\tDropdown,\n\ttype DropdownItem,\n\tMultiButton\n} from '@zextras/carbonio-design-system';\nimport { Location } from 'history';\nimport { find, groupBy, noop, reduce } from 'lodash';\nimport { useLocation } from 'react-router-dom';\n\nimport { AppRoute, CarbonioModule } from '../../types';\nimport { ACTION_TYPES } from '../constants';\nimport { useCurrentRoute } from '../history/hooks';\nimport { useAppList } from '../store/app';\nimport { getT } from '../store/i18n';\nimport { useActions } from '../store/integrations/hooks';\n\ninterface CreationButtonProps {\n\tactiveRoute: AppRoute;\n\tlocation: Location;\n}\n\nexport const CreationButtonComponent = ({\n\tactiveRoute,\n\tlocation\n}: CreationButtonProps): JSX.Element => {\n\tconst t = getT();\n\tconst actions = useActions({ activeRoute, location }, ACTION_TYPES.NEW);\n\tconst [open, setOpen] = useState(false);\n\tconst primaryAction = useMemo(\n\t\t() =>\n\t\t\tfind(\n\t\t\t\tactions,\n\t\t\t\t(action) =>\n\t\t\t\t\t(action.group === activeRoute?.id || action.group === activeRoute?.app) &&\n\t\t\t\t\taction.primary === true\n\t\t\t),\n\t\t[actions, activeRoute?.app, activeRoute?.id]\n\t);\n\tconst apps = useAppList();\n\tconst byApp = useMemo(() => groupBy(actions, 'group'), [actions]);\n\n\tconst secondaryActions = useMemo<DropdownItem[]>(\n\t\t(): DropdownItem[] => [\n\t\t\t...(byApp[activeRoute?.app ?? ''] ?? []),\n\t\t\t...reduce<CarbonioModule, DropdownItem[]>(\n\t\t\t\tapps,\n\t\t\t\t(acc, app, i): DropdownItem[] => {\n\t\t\t\t\tif (app.name !== activeRoute?.app && byApp[app.name]?.length > 0) {\n\t\t\t\t\t\tacc.push({ type: 'divider', label: '', id: `divider-${i}` }, ...byApp[app.name]);\n\t\t\t\t\t}\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\t[]\n\t\t\t)\n\t\t],\n\t\t[activeRoute?.app, apps, byApp]\n\t);\n\n\tconst onClose = useCallback(() => {\n\t\tsetOpen(false);\n\t}, []);\n\tconst onOpen = useCallback(() => {\n\t\tsetOpen(true);\n\t}, []);\n\n\treturn primaryAction ? (\n\t\t<Container minWidth=\"80px\">\n\t\t\t<MultiButton\n\t\t\t\tdata-testid=\"NewItemButton\"\n\t\t\t\tsize=\"extralarge\"\n\t\t\t\tbackground={'primary'}\n\t\t\t\tlabel={t('new', 'New')}\n\t\t\t\tonClick={primaryAction.onClick || primaryAction.click || noop}\n\t\t\t\titems={secondaryActions}\n\t\t\t\tdisabledPrimary={!primaryAction || primaryAction?.disabled}\n\t\t\t\tdisabledSecondary={!secondaryActions?.length}\n\t\t\t/>\n\t\t</Container>\n\t) : (\n\t\t<Dropdown items={secondaryActions} onClose={onClose} onOpen={onOpen}>\n\t\t\t<Button\n\t\t\t\tdata-testid=\"NewItemButton\"\n\t\t\t\tsize=\"extralarge\"\n\t\t\t\tbackgroundColor=\"primary\"\n\t\t\t\tlabel={t('new', 'New')}\n\t\t\t\ticon={open ? 'ChevronUp' : 'ChevronDown'}\n\t\t\t\tonClick={noop}\n\t\t\t/>\n\t\t</Dropdown>\n\t);\n};\n\nconst MemoCreationButton = React.memo(CreationButtonComponent);\n\nexport const CreationButton: FC = () => {\n\tconst locationFull = useLocation() as Location;\n\tconst activeRoute = useCurrentRoute() as AppRoute;\n\n\tconst truncateLocation = (location: Location): Location => ({\n\t\t...location,\n\t\tpathname: location?.pathname?.split('/').slice(0, 2).join('/'),\n\t\tkey: ''\n\t});\n\n\tconst location = useMemo(() => truncateLocation(locationFull), [locationFull]);\n\treturn <MemoCreationButton activeRoute={activeRoute} location={location} />;\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React from 'react';\n\nimport { useLogo } from '../store/login/hooks';\nimport { useLoginConfigStore } from '../store/login/store';\n\nexport const Logo = (props: Record<string, unknown>): JSX.Element => {\n\tconst { loaded } = useLoginConfigStore();\n\tconst LogoElement = useLogo();\n\n\treturn loaded ? (\n\t\t(typeof LogoElement === 'string' && <img alt={''} {...props} src={LogoElement} />) || (\n\t\t\t<LogoElement {...props} />\n\t\t)\n\t) : (\n\t\t<></>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport {\n\tContainer,\n\tRow,\n\tText,\n\tIcon,\n\tDropdown,\n\tDropdownItem\n} from '@zextras/carbonio-design-system';\nimport styled from 'styled-components';\n\nimport { useSearchStore } from './search-store';\nimport { SEARCH_APP_ID } from '../constants';\nimport { useCurrentRoute, pushHistory } from '../history/hooks';\nimport { useAppStore } from '../store/app';\n\nconst SelectorContainer = styled(Container)<{ open?: boolean }>`\n\tborder-right: 0.0625rem solid ${({ theme }): string => theme.palette.gray4.regular};\n\tcursor: pointer;\n\tbackground: ${({ theme, open }): string => theme.palette[open ? 'gray5' : 'gray6'].regular};\n\n\t&:hover {\n\t\tbackground: ${({ theme, open }): string => theme.palette[open ? 'gray5' : 'gray6'].hover};\n\t}\n`;\n\ninterface ModuleSelectorProps {\n\tapp: string | undefined;\n}\n\nconst ModuleSelectorComponent = ({ app }: ModuleSelectorProps): JSX.Element | null => {\n\tconst modules = useAppStore((s) => s.views.search);\n\tconst { module, updateModule } = useSearchStore();\n\n\tconst fullModule = useMemo(\n\t\t() => modules.find((m) => m.route === module) ?? modules[0],\n\t\t[module, modules]\n\t);\n\n\tconst [open, setOpen] = useState(false);\n\n\tconst dropdownItems = useMemo(\n\t\t(): DropdownItem[] =>\n\t\t\tmodules.map(\n\t\t\t\t({ id, label, icon, route }): DropdownItem => ({\n\t\t\t\t\tid,\n\t\t\t\t\tlabel,\n\t\t\t\t\ticon,\n\t\t\t\t\tonClick: (): void => {\n\t\t\t\t\t\tupdateModule(route);\n\t\t\t\t\t\tpushHistory({ route: SEARCH_APP_ID, path: `/${route}` });\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t),\n\t\t[modules, updateModule]\n\t);\n\n\tuseEffect(() => {\n\t\tif (app !== SEARCH_APP_ID && (!fullModule || fullModule?.app !== app)) {\n\t\t\tupdateModule((modules.find((m) => m.app === app) ?? modules[0])?.route);\n\t\t}\n\t}, [app, fullModule, modules, updateModule]);\n\n\tconst openDropdown = useCallback(() => {\n\t\tsetOpen(true);\n\t}, []);\n\n\tconst closeDropdown = useCallback(() => {\n\t\tsetOpen(false);\n\t}, []);\n\n\tif (!fullModule) {\n\t\treturn null;\n\t}\n\n\t// TODO: replace the Dropdown with a Select with the customLabelFactory\n\treturn (\n\t\t<Dropdown items={dropdownItems} onOpen={openDropdown} onClose={closeDropdown}>\n\t\t\t<SelectorContainer\n\t\t\t\tdata-testid=\"HeaderModuleSelector\"\n\t\t\t\torientation=\"horizontal\"\n\t\t\t\theight=\"2.625rem\"\n\t\t\t\twidth=\"fit\"\n\t\t\t\tminWidth=\"9.375rem\"\n\t\t\t\tcrossAlignment=\"center\"\n\t\t\t\tmainAlignment=\"space-between\"\n\t\t\t\tborderRadius=\"half\"\n\t\t\t>\n\t\t\t\t<Row takeAvailableSpace mainAlignment=\"unset\" padding={{ left: 'small' }}>\n\t\t\t\t\t<Text size=\"small\" color={open ? 'primary' : 'text'}>\n\t\t\t\t\t\t{fullModule?.label}\n\t\t\t\t\t</Text>\n\t\t\t\t</Row>\n\t\t\t\t<Icon\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\ticon={open ? 'ChevronUpOutline' : 'ChevronDownOutline'}\n\t\t\t\t\tcolor={open ? 'primary' : 'text'}\n\t\t\t\t\tstyle={{ alignSelf: 'center' }}\n\t\t\t\t/>\n\t\t\t</SelectorContainer>\n\t\t</Dropdown>\n\t);\n};\n\nconst MemoModuleSelector = React.memo(ModuleSelectorComponent);\n\nexport const ModuleSelector = (): JSX.Element => {\n\tconst activeRoute = useCurrentRoute();\n\treturn <MemoModuleSelector app={activeRoute?.app} />;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\n\nimport {\n\tChipInput,\n\tChipInputProps,\n\tContainer,\n\tIconButton,\n\tPadding,\n\tTooltip\n} from '@zextras/carbonio-design-system';\nimport { filter, find, map, reduce, some } from 'lodash';\nimport { useHistory } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { ModuleSelector } from './module-selector';\nimport { useSearchStore } from './search-store';\nimport { QueryChip, QueryItem } from '../../types';\nimport { LOCAL_STORAGE_SEARCH_KEY, SEARCH_APP_ID } from '../constants';\nimport { useLocalStorage } from '../shell/hooks/useLocalStorage';\nimport { getT } from '../store/i18n';\n\nconst OutlinedIconButton = styled(IconButton)`\n\tborder: 0.0625rem solid\n\t\t${({ theme, disabled }): string =>\n\t\t\tdisabled ? theme.palette.primary.disabled : theme.palette.primary.regular};\n\tdisplay: block;\n\t& svg {\n\t\tborder: none;\n\t}\n`;\n\nconst StyledChipInput = styled(ChipInput)`\n\tpadding: 0 1rem;\n\t&:hover {\n\t\toutline: none;\n\t\tbackground: ${({ theme, disabled }): string =>\n\t\t\tdisabled ? 'gray5' : theme.palette.gray5.hover};\n\t}\n`;\n\nconst StyledContainer = styled(Container)`\n\theight: 2.625rem;\n\toverflow-y: hidden;\n\t&:first-child {\n\t\ttransform: translateY(-0.125rem);\n\t}\n`;\n\ntype SearchOption = NonNullable<ChipInputProps['options']>[number] & QueryItem;\n\nexport const SearchBar = (): JSX.Element => {\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\tconst t = getT();\n\tconst [storedSuggestions, setStoredSuggestions] = useLocalStorage<SearchOption[]>(\n\t\tLOCAL_STORAGE_SEARCH_KEY,\n\t\t[]\n\t);\n\tconst [inputTyped, setInputTyped] = useState<string>('');\n\tconst history = useHistory();\n\tconst { updateQuery, module, query, searchDisabled, setSearchDisabled, tooltip } =\n\t\tuseSearchStore();\n\n\tconst [isTyping, setIsTyping] = useState(false);\n\n\tconst [options, setOptions] = useState<SearchOption[]>([]);\n\n\tconst [inputHasFocus, setInputHasFocus] = useState(false);\n\n\tconst [searchInputValue, setSearchInputValue] = useState<QueryChip[]>(query);\n\n\tconst showClear = useMemo(\n\t\t() =>\n\t\t\tsearchInputValue.length > 0 ||\n\t\t\t(inputRef.current?.value && inputRef.current?.value?.length > 0),\n\t\t[searchInputValue.length]\n\t);\n\tconst clearSearch = useCallback((): void => {\n\t\tif (inputRef.current) {\n\t\t\tinputRef.current.value = '';\n\t\t\tinputRef.current?.focus();\n\t\t}\n\t\tsetIsTyping(false);\n\t\tsetSearchInputValue([]);\n\t\tsetSearchDisabled(false);\n\t\tupdateQuery([]);\n\t\tsetInputTyped('');\n\t}, [setSearchDisabled, updateQuery]);\n\n\tconst onSearch = useCallback(() => {\n\t\tupdateQuery((currentQuery) => {\n\t\t\tconst ref = inputRef?.current;\n\t\t\tif (ref) {\n\t\t\t\tref.value = '';\n\t\t\t}\n\t\t\tif (inputTyped.length > 0) {\n\t\t\t\tconst newInputValue: typeof searchInputValue = [\n\t\t\t\t\t...searchInputValue,\n\t\t\t\t\t...map(\n\t\t\t\t\t\tinputTyped.split(' '),\n\t\t\t\t\t\t(label, id): QueryChip => ({\n\t\t\t\t\t\t\tid: `${id}`,\n\t\t\t\t\t\t\tlabel,\n\t\t\t\t\t\t\thasAvatar: false\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t];\n\t\t\t\tsetSearchInputValue(newInputValue);\n\t\t\t\tsetInputTyped('');\n\t\t\t\treturn reduce(\n\t\t\t\t\tnewInputValue,\n\t\t\t\t\t(acc, newInputChip) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!some(\n\t\t\t\t\t\t\t\tcurrentQuery,\n\t\t\t\t\t\t\t\t(currentQueryChip) => currentQueryChip.label === newInputChip.label\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tacc.push(newInputChip);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t},\n\t\t\t\t\tfilter(currentQuery, (currentQueryChip) =>\n\t\t\t\t\t\tsome(\n\t\t\t\t\t\t\tsearchInputValue,\n\t\t\t\t\t\t\t(searchInputChip) => searchInputChip.label === currentQueryChip.label\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tsetInputTyped('');\n\n\t\t\treturn reduce(\n\t\t\t\tsearchInputValue,\n\t\t\t\t(acc, searchInputChip) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!some(\n\t\t\t\t\t\t\tcurrentQuery,\n\t\t\t\t\t\t\t(currentQueryChip) => currentQueryChip.label === searchInputChip.label\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tacc.push(searchInputChip);\n\t\t\t\t\t}\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\n\t\t\t\tfilter(currentQuery, (currentQueryChip: QueryChip) =>\n\t\t\t\t\tsome(\n\t\t\t\t\t\tsearchInputValue,\n\t\t\t\t\t\t(searchInputChip) => searchInputChip.label === currentQueryChip.label\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t});\n\t\t// TODO: perform a navigation only when coming from a different module (not the search one)\n\t\thistory.push(`/${SEARCH_APP_ID}/${module}`);\n\t}, [updateQuery, history, module, inputTyped, searchInputValue]);\n\n\tconst appSuggestions = useMemo<SearchOption[]>(\n\t\t() =>\n\t\t\tfilter(storedSuggestions, (v) => v.app === module)\n\t\t\t\t.reverse()\n\t\t\t\t.map(\n\t\t\t\t\t(item): SearchOption => ({\n\t\t\t\t\t\t...item,\n\t\t\t\t\t\tdisabled: searchDisabled,\n\t\t\t\t\t\tonClick: (): void => {\n\t\t\t\t\t\t\tconst newInputChip: QueryChip = { ...item, hasAvatar: false, onClick: undefined };\n\t\t\t\t\t\t\tsetSearchInputValue((prevState) => [...prevState, newInputChip]);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t),\n\t\t[storedSuggestions, module, searchDisabled]\n\t);\n\n\tconst updateOptions = useCallback(\n\t\t(textContent: string, queryChips: QueryChip[]): void => {\n\t\t\tif (textContent.length > 0) {\n\t\t\t\tsetOptions(\n\t\t\t\t\tappSuggestions\n\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t(suggestion) =>\n\t\t\t\t\t\t\t\ttextContent &&\n\t\t\t\t\t\t\t\tsuggestion.label.includes(textContent) &&\n\t\t\t\t\t\t\t\t!some(queryChips, (queryChip) => queryChip.value === suggestion.label)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.slice(0, 5)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tsetOptions(appSuggestions.slice(0, 5));\n\t\t\t}\n\t\t},\n\t\t[appSuggestions]\n\t);\n\n\tconst onQueryChange = useCallback<NonNullable<ChipInputProps['onChange']>>(\n\t\t(newQuery) => {\n\t\t\t// FIXME: move the saving of suggestions after the search occurs.\n\t\t\t// \tThe saving logic should not be placed here because the onChange is called even when a chip is removed from the chipInput.\n\t\t\t//  So, at the moment, keywords never searched for are saved too.\n\t\t\tconst lastChipLabel = newQuery[newQuery.length - 1]?.label;\n\t\t\tif (\n\t\t\t\tlastChipLabel &&\n\t\t\t\ttypeof lastChipLabel === 'string' &&\n\t\t\t\tmodule &&\n\t\t\t\t!find(appSuggestions, (suggestion) => suggestion.label === lastChipLabel)\n\t\t\t) {\n\t\t\t\tsetStoredSuggestions((prevState) => {\n\t\t\t\t\tconst newSuggestion: SearchOption = {\n\t\t\t\t\t\tvalue: lastChipLabel,\n\t\t\t\t\t\tlabel: lastChipLabel,\n\t\t\t\t\t\ticon: 'ClockOutline',\n\t\t\t\t\t\tapp: module,\n\t\t\t\t\t\tid: lastChipLabel\n\t\t\t\t\t};\n\t\t\t\t\treturn [...prevState, newSuggestion];\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// FIXME: remove the cast (by making ChipItem support generics?)\n\t\t\tsetSearchInputValue(newQuery as QueryChip[]);\n\t\t},\n\t\t[appSuggestions, module, setStoredSuggestions]\n\t);\n\n\tconst onInputType = useCallback<NonNullable<ChipInputProps['onInputType']>>(\n\t\t(ev) => {\n\t\t\tif (!ev.textContent) {\n\t\t\t\tsetIsTyping(false);\n\t\t\t} else {\n\t\t\t\tsetIsTyping(true);\n\t\t\t}\n\t\t\tsetInputTyped(ev.textContent || '');\n\t\t\tupdateOptions(ev.textContent || '', query);\n\t\t},\n\t\t[query, updateOptions]\n\t);\n\n\tuseEffect(() => {\n\t\tif (module) {\n\t\t\tconst suggestions = filter(appSuggestions, (suggestion) => suggestion.app === module).slice(\n\t\t\t\t0,\n\t\t\t\t5\n\t\t\t);\n\n\t\t\tsetOptions(suggestions);\n\t\t}\n\t}, [appSuggestions, module]);\n\n\tconst containerRef = useRef<HTMLDivElement>(null);\n\tconst addFocus = useCallback(() => setInputHasFocus(true), []);\n\tconst removeFocus = useCallback(() => setInputHasFocus(false), []);\n\n\t// disabled for now, awaiting refactor of the search bar\n\t// useEffect(() => {\n\t// \tconst handler = (event: KeyboardEvent): unknown =>\n\t// \t\thandleKeyboardShortcuts({\n\t// \t\t\tevent,\n\t// \t\t\tinputRef,\n\t// \t\t\tprimaryAction,\n\t// \t\t\tsecondaryActions,\n\t// \t\t\tcurrentApp\n\t// \t\t});\n\t// \tdocument.addEventListener('keydown', handler);\n\t// \treturn (): void => {\n\t// \t\tdocument.removeEventListener('keydown', handler);\n\t// \t};\n\t// }, [currentApp, inputRef, primaryAction, secondaryActions]);\n\n\tuseEffect(() => {\n\t\tconst ref = inputRef.current;\n\t\tconst runSearchOnKeyUp = (ev: KeyboardEvent): void => {\n\t\t\tif (ev.key === 'Enter') {\n\t\t\t\tonSearch();\n\t\t\t\tremoveFocus();\n\t\t\t}\n\t\t};\n\t\tif (ref) {\n\t\t\tref.addEventListener('keyup', runSearchOnKeyUp);\n\t\t}\n\n\t\treturn (): void => {\n\t\t\tif (ref) {\n\t\t\t\tref.removeEventListener('keyup', runSearchOnKeyUp);\n\t\t\t}\n\t\t};\n\t}, [onSearch, removeFocus]);\n\n\tconst disableOptions = useMemo(() => !(options.length > 0) || isTyping, [options, isTyping]);\n\n\tconst placeholder = useMemo(\n\t\t() =>\n\t\t\tinputHasFocus && module\n\t\t\t\t? t('search.active_input_label', 'Separate your keywords by a comma or pressing TAB')\n\t\t\t\t: t('search.idle_input_label', 'Search in {{module}}', {\n\t\t\t\t\t\tmodule\n\t\t\t\t  }),\n\t\t[inputHasFocus, module, t]\n\t);\n\n\tconst clearButtonPlaceholder = useMemo(\n\t\t() =>\n\t\t\tshowClear || isTyping\n\t\t\t\t? t('search.clear', 'Clear search input')\n\t\t\t\t: t('search.already_clear', 'Search input is already clear'),\n\t\t[showClear, t, isTyping]\n\t);\n\n\tconst searchButtonsAreDisabled = useMemo(\n\t\t() => (isTyping ? false : !showClear),\n\t\t[showClear, isTyping]\n\t);\n\n\tconst searchBtnTooltipLabel = useMemo(() => {\n\t\tif (!searchButtonsAreDisabled && searchInputValue.length > 0) {\n\t\t\treturn t('search.start', 'Start search');\n\t\t}\n\t\tif (inputHasFocus) {\n\t\t\treturn t(\n\t\t\t\t'search.type_or_choose_suggestion',\n\t\t\t\t'Type or choose some keywords to start a search'\n\t\t\t);\n\t\t}\n\t\tif (query.length > 0) {\n\t\t\treturn t('label.edit_to_start_search', 'Edit your search to start a new one');\n\t\t}\n\t\treturn t('search.type_to_start_search', 'Type some keywords to start a search');\n\t}, [searchButtonsAreDisabled, searchInputValue.length, inputHasFocus, query.length, t]);\n\n\tconst onChipAdd = useCallback<NonNullable<ChipInputProps['onAdd']>>(\n\t\t(newChip) => {\n\t\t\tsetIsTyping(false);\n\t\t\tsetInputTyped('');\n\t\t\tif (module) {\n\t\t\t\tconst suggestions = filter(\n\t\t\t\t\tappSuggestions,\n\t\t\t\t\t(suggestion) => suggestion?.app === module\n\t\t\t\t).slice(0, 5);\n\n\t\t\t\tsetOptions(suggestions);\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tlabel: typeof newChip === 'string' ? newChip : '',\n\t\t\t\tvalue: newChip,\n\t\t\t\thasAvatar: false\n\t\t\t};\n\t\t},\n\t\t[appSuggestions, module]\n\t);\n\n\tuseEffect(() => {\n\t\tsetSearchInputValue(map(query, (queryChip) => ({ ...queryChip, disabled: searchDisabled })));\n\t}, [searchDisabled, query]);\n\n\treturn (\n\t\t<Container\n\t\t\tminWidth=\"fit-content\"\n\t\t\twidth=\"fit\"\n\t\t\tflexGrow=\"1\"\n\t\t\torientation=\"horizontal\"\n\t\t\tref={containerRef}\n\t\t>\n\t\t\t<Tooltip\n\t\t\t\tdisabled={!searchDisabled}\n\t\t\t\tmaxWidth=\"100%\"\n\t\t\t\tlabel={\n\t\t\t\t\ttooltip ??\n\t\t\t\t\tt('search.unable_to_parse_query', 'Unable to complete the search, clear it and retry')\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<Container orientation=\"horizontal\" width=\"fill\">\n\t\t\t\t\t<Container minWidth=\"32rem\" width=\"fill\">\n\t\t\t\t\t\t<Container orientation=\"horizontal\" width=\"fill\">\n\t\t\t\t\t\t\t<Container width=\"fit\">\n\t\t\t\t\t\t\t\t<ModuleSelector />\n\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t<StyledContainer orientation=\"horizontal\">\n\t\t\t\t\t\t\t\t<StyledChipInput\n\t\t\t\t\t\t\t\t\tdisabled={searchDisabled}\n\t\t\t\t\t\t\t\t\tinputRef={inputRef}\n\t\t\t\t\t\t\t\t\tvalue={searchInputValue}\n\t\t\t\t\t\t\t\t\tonAdd={onChipAdd}\n\t\t\t\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\t\t\tconfirmChipOnBlur={false}\n\t\t\t\t\t\t\t\t\tseparators={['Enter', 'NumpadEnter', 'Comma', 'Space']}\n\t\t\t\t\t\t\t\t\tbackground={searchDisabled ? 'gray5' : 'gray6'}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\t\t\t\t\t\toverflowX: 'hidden'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonChange={onQueryChange}\n\t\t\t\t\t\t\t\t\tonInputType={onInputType}\n\t\t\t\t\t\t\t\t\tonInputTypeDebounce={0}\n\t\t\t\t\t\t\t\t\tonBlur={removeFocus}\n\t\t\t\t\t\t\t\t\tonFocus={addFocus}\n\t\t\t\t\t\t\t\t\tdisableOptions={disableOptions}\n\t\t\t\t\t\t\t\t\trequireUniqueChips={false}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</StyledContainer>\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t</Container>\n\n\t\t\t\t\t{!searchButtonsAreDisabled && (\n\t\t\t\t\t\t<Padding left=\"small\">\n\t\t\t\t\t\t\t<Tooltip label={clearButtonPlaceholder} placement=\"bottom\">\n\t\t\t\t\t\t\t\t<OutlinedIconButton\n\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\tcustomSize={{\n\t\t\t\t\t\t\t\t\t\ticonSize: 'large',\n\t\t\t\t\t\t\t\t\t\tpaddingSize: 'small'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tdisabled={searchButtonsAreDisabled}\n\t\t\t\t\t\t\t\t\ticon=\"BackspaceOutline\"\n\t\t\t\t\t\t\t\t\ticonColor=\"primary\"\n\t\t\t\t\t\t\t\t\tonClick={clearSearch}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</Padding>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<Padding left=\"small\">\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\tmaxWidth=\"100%\"\n\t\t\t\t\t\t\tdisabled={searchDisabled}\n\t\t\t\t\t\t\tlabel={searchBtnTooltipLabel}\n\t\t\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\tcustomSize={{\n\t\t\t\t\t\t\t\t\ticonSize: 'large',\n\t\t\t\t\t\t\t\t\tpaddingSize: 'small'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ticon=\"Search\"\n\t\t\t\t\t\t\t\tdisabled={searchButtonsAreDisabled}\n\t\t\t\t\t\t\t\tbackgroundColor=\"primary\"\n\t\t\t\t\t\t\t\ticonColor=\"gray6\"\n\t\t\t\t\t\t\t\tonClick={onSearch}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</Padding>\n\t\t\t\t</Container>\n\t\t\t</Tooltip>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React from 'react';\n\nimport {\n\tCatcher,\n\tContainer,\n\tIconButton,\n\tPadding,\n\tResponsive,\n\tuseScreenMode\n} from '@zextras/carbonio-design-system';\nimport styled from 'styled-components';\n\nimport { CreationButton } from './creation-button';\nimport { Logo } from './logo';\nimport { BOARD_CONTAINER_ZINDEX, HEADER_BAR_HEIGHT } from '../constants';\nimport { useDarkMode } from '../dark-mode/use-dark-mode';\nimport { SearchBar } from '../search/search-bar';\nimport { useAppStore } from '../store/app';\n\nconst StyledLogo = styled(Logo)`\n\theight: 2rem;\n`;\n\nconst ShellHeaderContainer = styled(Container)`\n\tz-index: ${BOARD_CONTAINER_ZINDEX + 1};\n`;\n\ninterface ShellHeaderProps {\n\tmobileNavIsOpen: boolean;\n\tonMobileMenuClick: () => void;\n\tchildren: React.ReactNode | React.ReactNode[];\n}\n\nconst ShellHeader = ({\n\tmobileNavIsOpen,\n\tonMobileMenuClick,\n\tchildren\n}: ShellHeaderProps): JSX.Element => {\n\tconst { darkReaderStatus } = useDarkMode();\n\n\tconst screenMode = useScreenMode();\n\tconst searchEnabled = useAppStore((s) => s.views.search.length > 0);\n\treturn (\n\t\t<ShellHeaderContainer\n\t\t\tdata-testid=\"MainHeaderContainer\"\n\t\t\torientation=\"horizontal\"\n\t\t\tbackground={'gray3'}\n\t\t\twidth=\"fill\"\n\t\t\theight={HEADER_BAR_HEIGHT}\n\t\t\tminHeight={HEADER_BAR_HEIGHT}\n\t\t\tmaxHeight={HEADER_BAR_HEIGHT}\n\t\t\tmainAlignment=\"space-between\"\n\t\t\tpadding={{\n\t\t\t\thorizontal: screenMode === 'desktop' ? 'large' : 'extrasmall',\n\t\t\t\tvertical: 'small'\n\t\t\t}}\n\t\t>\n\t\t\t<Catcher>\n\t\t\t\t<Container\n\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\tmaxWidth=\"75%\"\n\t\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\t\tminWidth=\"fit-content\"\n\t\t\t\t\tdata-testid=\"HeaderMainLogoContainer\"\n\t\t\t\t>\n\t\t\t\t\t<Responsive mode=\"mobile\">\n\t\t\t\t\t\t<Padding right=\"small\">\n\t\t\t\t\t\t\t<IconButton icon={mobileNavIsOpen ? 'Close' : 'Menu'} onClick={onMobileMenuClick} />\n\t\t\t\t\t\t</Padding>\n\t\t\t\t\t</Responsive>\n\t\t\t\t\t<Container width=\"15.625rem\" height=\"2rem\" crossAlignment=\"flex-start\">\n\t\t\t\t\t\t{darkReaderStatus && <StyledLogo />}\n\t\t\t\t\t</Container>\n\t\t\t\t\t<Padding horizontal=\"large\">\n\t\t\t\t\t\t<CreationButton />\n\t\t\t\t\t</Padding>\n\t\t\t\t\t<Responsive mode=\"desktop\">{searchEnabled && <SearchBar />}</Responsive>\n\t\t\t\t</Container>\n\t\t\t\t<Container orientation=\"horizontal\" width=\"auto\" mainAlignment=\"flex-end\">\n\t\t\t\t\t<Responsive mode=\"desktop\">{children}</Responsive>\n\t\t\t\t</Container>\n\t\t\t</Catcher>\n\t\t</ShellHeaderContainer>\n\t);\n};\nexport default ShellHeader;\n","/*\n * SPDX-FileCopyrightText: 2023 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { useMemo } from 'react';\n\nimport { useLoginConfigStore } from './store';\nimport DefaultLogo from '../../../assets/carbonio.svg';\nimport { useDarkMode } from '../../dark-mode/use-dark-mode';\n\nexport function useLogo(): string | React.ComponentType {\n\tconst { carbonioWebUiAppLogo, carbonioWebUiDarkAppLogo } = useLoginConfigStore();\n\n\tconst { darkModeEnabled } = useDarkMode();\n\n\treturn useMemo(() => {\n\t\tif (darkModeEnabled) {\n\t\t\treturn carbonioWebUiDarkAppLogo || carbonioWebUiAppLogo || DefaultLogo;\n\t\t}\n\t\treturn carbonioWebUiAppLogo || carbonioWebUiDarkAppLogo || DefaultLogo;\n\t}, [carbonioWebUiDarkAppLogo, carbonioWebUiAppLogo, darkModeEnabled]);\n}\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { ComponentType, FC, FunctionComponent } from 'react';\n\nimport { Accordion, Collapse, Container, Padding } from '@zextras/carbonio-design-system';\nimport { reduce, find } from 'lodash';\nimport { useHistory } from 'react-router-dom';\n\nimport { AppRoute, SecondaryBarComponentProps } from '../../types';\nimport AppContextProvider from '../boot/app/app-context-provider';\nimport { getCurrentRoute } from '../history/hooks';\nimport { useAppStore } from '../store/app';\n\ntype SidebarComponentProps = {\n\titem: ShellMobileNavComponent;\n};\n\nconst SidebarComponent: FC<SidebarComponentProps> = ({ item }) =>\n\titem.secondary ? (\n\t\t<AppContextProvider pkg={item.id}>\n\t\t\t<item.secondary expanded={!!item.expanded} />\n\t\t</AppContextProvider>\n\t) : null;\n\ntype ShellMobileNavComponentProps = {\n\tmobileNavIsOpen: boolean;\n\tmenuTree: AppRoute;\n};\n\ntype ShellMobileNavComponent = {\n\tid: string;\n\tlabel: string;\n\ticon: string;\n\tsecondary?: ComponentType<SecondaryBarComponentProps>;\n\tonClick?: () => void;\n\tCustomComponent?: FunctionComponent<SidebarComponentProps> | null;\n\titems?: Array<ShellMobileNavComponent> | [];\n\texpanded?: boolean;\n};\n\nconst ShellMobileNavComponent: FC<ShellMobileNavComponentProps> = ({\n\tmobileNavIsOpen,\n\tmenuTree\n}) => {\n\tconst history = useHistory();\n\tconst views = useAppStore<any>((s) =>\n\t\treduce(\n\t\t\ts.routes,\n\t\t\t(acc: Array<ShellMobileNavComponent>, val) => {\n\t\t\t\tconst primary = find(s.views.primaryBar, (item) => item.id === val.id);\n\t\t\t\tconst secondary = find(s.views.secondaryBar, (item) => item.id === val.id);\n\t\t\t\tif (primary && primary.visible) {\n\t\t\t\t\tacc.push({\n\t\t\t\t\t\tid: `${val.app}-wrap`,\n\t\t\t\t\t\tlabel: primary.label,\n\t\t\t\t\t\ticon: typeof primary.component === 'string' ? primary.component : 'Cube',\n\t\t\t\t\t\tonClick: () => history.push(`/${val.route}`),\n\t\t\t\t\t\titems: secondary\n\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tid: secondary.id,\n\t\t\t\t\t\t\t\t\t\tlabel: secondary.id,\n\t\t\t\t\t\t\t\t\t\ticon: 'Cube',\n\t\t\t\t\t\t\t\t\t\tsecondary: secondary.component,\n\t\t\t\t\t\t\t\t\t\tCustomComponent: SidebarComponent\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t: []\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn acc;\n\t\t\t},\n\t\t\t[]\n\t\t)\n\t);\n\n\treturn (\n\t\t<Container\n\t\t\theight=\"fill\"\n\t\t\twidth=\"fit\"\n\t\t\tbackground=\"gray5\"\n\t\t\tstyle={{\n\t\t\t\tposition: 'absolute',\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0,\n\t\t\t\tzIndex: 3\n\t\t\t}}\n\t\t>\n\t\t\t<Collapse orientation=\"horizontal\" open={mobileNavIsOpen} crossSize=\"100%\">\n\t\t\t\t<Container\n\t\t\t\t\twidth={256 + 48 + 12}\n\t\t\t\t\theight=\"fill\"\n\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\tmainAlignment=\"space-between\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmaxHeight: 'calc(100vh - 3rem)',\n\t\t\t\t\t\toverflowY: 'auto'\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Container width=\"fill\" height=\"fit\" orientation=\"vertical\" mainAlignment=\"space-between\">\n\t\t\t\t\t\t<Accordion items={views} />\n\t\t\t\t\t</Container>\n\t\t\t\t\t<Container width=\"fill\" height=\"fit\" orientation=\"vertical\" mainAlignment=\"flex-end\">\n\t\t\t\t\t\t<Accordion items={[menuTree]} />\n\t\t\t\t\t\t<Padding vertical=\"medium\">{/* <UserQuota mobileView={true}/> */}</Padding>\n\t\t\t\t\t</Container>\n\t\t\t\t</Container>\n\t\t\t</Collapse>\n\t\t</Container>\n\t);\n};\n\nconst ShellMobileNavMemo = React.memo(ShellMobileNavComponent);\n\ntype ShellMobileNavProps = {\n\tmobileNavIsOpen: boolean;\n};\n\nconst ShellMobileNav: FC<ShellMobileNavProps> = ({ mobileNavIsOpen }) => {\n\tconst menuTree = getCurrentRoute() as AppRoute;\n\treturn <ShellMobileNavMemo menuTree={menuTree} mobileNavIsOpen={mobileNavIsOpen} />;\n};\n\nexport default ShellMobileNav;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, forwardRef } from 'react';\n\nimport { Container, Text } from '@zextras/carbonio-design-system';\nimport styled from 'styled-components';\n\nimport { BadgeInfo } from '../../types';\n\nconst MiniBadge = styled(Container)<{ badge: BadgeInfo }>`\n\tposition: absolute;\n\tbottom: 25%;\n\tright: 25%;\n\ttransform: translate(30%, 30%);\n\tbackground: ${({ badge, theme }): string => theme.palette[badge?.color ?? 'primary'].regular};\n\tmin-width: 0.75rem;\n\tmin-height: 0.75rem;\n\tline-height: 0.75rem;\n\tborder-radius: 0.5rem;\n\tuser-select: none;\n\tcursor: pointer;\n\tpointer-events: none;\n\tz-index: 99;\n`;\n\n// eslint-disable-next-line react/display-name\nconst BadgeWrap: FC<{ badge: BadgeInfo }> = forwardRef<HTMLDivElement, { badge: BadgeInfo }>(\n\t({ badge, children }, ref) => (\n\t\t<Container width={'3rem'} height={'3rem'} style={{ position: 'relative' }} ref={ref}>\n\t\t\t{badge.show && (\n\t\t\t\t<MiniBadge badge={badge} height=\"fit\" width=\"fit\">\n\t\t\t\t\t{badge.showCount ? (\n\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\tsize=\"extrasmall\"\n\t\t\t\t\t\t\tstyle={{ padding: '0.125rem 0.25rem', fontSize: '0.625rem' }}\n\t\t\t\t\t\t\tcolor=\"gray6\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{badge.count ?? 0}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t) : null}\n\t\t\t\t</MiniBadge>\n\t\t\t)}\n\t\t\t{children}\n\t\t</Container>\n\t)\n);\n\nexport default BadgeWrap;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { useMemo } from 'react';\n\nimport { filter, intersection, omit } from 'lodash';\n\nimport { AppRoute, PrimaryAccessoryView, SecondaryAccessoryView, UtilityView } from '../../types';\nimport { useCurrentRoute } from '../history/hooks';\nimport { useAppStore } from '../store/app';\n\nexport const checkList = (l1: Array<string>, l2?: Array<string>): boolean =>\n\tintersection(l1, l2).length > 0;\n\nexport const checkRoute = (\n\tview: UtilityView | PrimaryAccessoryView | SecondaryAccessoryView,\n\tactiveRoute?: AppRoute\n): boolean => {\n\tconst activeRouteValues = Object.values(omit(activeRoute, 'standalone') ?? {});\n\tif (view.blacklistRoutes) return !checkList(activeRouteValues, view.blacklistRoutes);\n\tif (view.whitelistRoutes) return checkList(activeRouteValues, view.whitelistRoutes);\n\treturn true;\n};\nexport const useUtilityViews = (): Array<UtilityView> => {\n\tconst utilityViews = useAppStore((s) => s.views.utilityBar);\n\n\tconst activeRoute = useCurrentRoute();\n\treturn useMemo(\n\t\t() => filter(utilityViews, (v) => checkRoute(v, activeRoute)),\n\t\t[activeRoute, utilityViews]\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useEffect, useMemo, useRef } from 'react';\n\nimport { Container, IconButton, Row, Tooltip } from '@zextras/carbonio-design-system';\nimport { map, isEmpty, trim, filter, sortBy, noop } from 'lodash';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport BadgeWrap from './badge-wrap';\nimport { AppRoute, PrimaryAccessoryView, PrimaryBarView } from '../../types';\nimport AppContextProvider from '../boot/app/app-context-provider';\nimport {\n\tBOARD_CONTAINER_ZINDEX,\n\tIS_STANDALONE,\n\tPRIMARY_BAR_WIDTH,\n\tSEARCH_APP_ID\n} from '../constants';\nimport { useCurrentRoute } from '../history/hooks';\nimport { useAppStore } from '../store/app';\nimport { minimizeBoards, reopenBoards, useBoardStore } from '../store/boards';\nimport { checkRoute } from '../utility-bar/utils';\n\nconst PrimaryBarContainer = styled(Container)`\n\tborder-right: 0.0625rem solid ${({ theme }): string => theme.palette.gray3.regular};\n\tz-index: ${BOARD_CONTAINER_ZINDEX + 1};\n`;\n\nconst ToggleBoardIcon = (): JSX.Element | null => {\n\tconst { minimized, boards } = useBoardStore();\n\n\treturn isEmpty(boards) ? null : (\n\t\t<Container width={'3rem'} height={'3rem'}>\n\t\t\t<IconButton\n\t\t\t\ticonColor=\"primary\"\n\t\t\t\ticon={minimized ? 'BoardOpen' : 'BoardCollapse'}\n\t\t\t\tonClick={minimized ? reopenBoards : minimizeBoards}\n\t\t\t\tsize=\"large\"\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n\ntype PrimaryBarItemProps = {\n\tview: PrimaryBarView;\n\tactive: boolean;\n\tonClick: () => void;\n};\n\ntype PrimaryBarAccessoryItemProps = {\n\tview: PrimaryAccessoryView;\n};\n\nconst PrimaryBarElement = ({ view, active, onClick }: PrimaryBarItemProps): JSX.Element => (\n\t<Tooltip label={view.label} placement=\"right\" key={view.id}>\n\t\t<BadgeWrap badge={view.badge}>\n\t\t\t{typeof view.component === 'string' ? (\n\t\t\t\t<IconButton\n\t\t\t\t\ticon={view.component}\n\t\t\t\t\tbackgroundColor={active ? 'gray4' : 'gray6'}\n\t\t\t\t\ticonColor={active ? 'primary' : 'text'}\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\tdata-isselected={active}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<view.component active={active} />\n\t\t\t)}\n\t\t</BadgeWrap>\n\t</Tooltip>\n);\n\nconst PrimaryBarAccessoryElement = ({ view }: PrimaryBarAccessoryItemProps): JSX.Element => (\n\t<Tooltip label={view.label} placement=\"right\" key={view.id}>\n\t\t<AppContextProvider key={view.id} pkg={view.app}>\n\t\t\t{typeof view.component === 'string' ? (\n\t\t\t\t<IconButton\n\t\t\t\t\ticon={view.component}\n\t\t\t\t\tbackgroundColor=\"gray6\"\n\t\t\t\t\ticonColor=\"text\"\n\t\t\t\t\tonClick={view.onClick ?? noop}\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<view.component />\n\t\t\t)}\n\t\t</AppContextProvider>\n\t</Tooltip>\n);\n\nconst OverlayRow = styled(Row)`\n\tmin-height: 0.0625rem;\n\toverflow-y: auto;\n\toverflow-y: overlay;\n`;\n\ninterface ShellPrimaryBarComponentProps {\n\tactiveRoute: AppRoute | undefined;\n}\nconst ShellPrimaryBarComponent = ({\n\tactiveRoute\n}: ShellPrimaryBarComponentProps): JSX.Element | null => {\n\tconst primaryBarViews = useAppStore((s) => s.views.primaryBar);\n\tconst { push } = useHistory();\n\n\tconst { pathname, search } = useLocation();\n\tconst routesRef = useRef<Record<string, string>>({});\n\n\tuseEffect(() => {\n\t\troutesRef.current = primaryBarViews.reduce((accumulator, view) => {\n\t\t\tif (!accumulator[view.id]) {\n\t\t\t\taccumulator[view.id] = view.route;\n\t\t\t}\n\t\t\treturn accumulator;\n\t\t}, routesRef.current);\n\t}, [primaryBarViews]);\n\n\tuseEffect(() => {\n\t\tif (activeRoute && activeRoute.id !== SEARCH_APP_ID) {\n\t\t\troutesRef.current = {\n\t\t\t\t...routesRef.current,\n\t\t\t\t[activeRoute.id]: `${trim(pathname, '/')}${search}`\n\t\t\t};\n\t\t}\n\t}, [activeRoute, pathname, search, primaryBarViews]);\n\tconst primaryBarAccessoryViews = useAppStore((s) => s.views.primaryBarAccessories);\n\n\tconst accessoryViews = useMemo(\n\t\t() =>\n\t\t\tsortBy(\n\t\t\t\tfilter(primaryBarAccessoryViews, (v) => checkRoute(v, activeRoute)),\n\t\t\t\t'position'\n\t\t\t),\n\t\t[activeRoute, primaryBarAccessoryViews]\n\t);\n\n\tconst primaryBarItems = useMemo(\n\t\t() =>\n\t\t\tmap(primaryBarViews, (view) =>\n\t\t\t\tview.visible ? (\n\t\t\t\t\t<PrimaryBarElement\n\t\t\t\t\t\tkey={view.id}\n\t\t\t\t\t\tonClick={(): void => push(`/${routesRef.current[view.id]}`)}\n\t\t\t\t\t\tview={view}\n\t\t\t\t\t\tactive={activeRoute?.id === view.id}\n\t\t\t\t\t/>\n\t\t\t\t) : null\n\t\t\t),\n\t\t[activeRoute?.id, push, primaryBarViews]\n\t);\n\n\tconst accessoryItems = useMemo(\n\t\t() => accessoryViews.map((view) => <PrimaryBarAccessoryElement view={view} key={view.id} />),\n\t\t[accessoryViews]\n\t);\n\n\tif (IS_STANDALONE && activeRoute?.standalone?.hidePrimaryBar) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<PrimaryBarContainer\n\t\t\twidth={PRIMARY_BAR_WIDTH}\n\t\t\theight=\"fill\"\n\t\t\tbackground={'gray6'}\n\t\t\torientation=\"vertical\"\n\t\t\tmainAlignment=\"flex-start\"\n\t\t\tcrossAlignment=\"flex-start\"\n\t\t\tdata-testid=\"SideMenuContainer\"\n\t\t>\n\t\t\t<OverlayRow\n\t\t\t\tmainAlignment=\"flex-start\"\n\t\t\t\tcrossAlignment=\"flex-start\"\n\t\t\t\torientation=\"vertical\"\n\t\t\t\ttakeAvailableSpace\n\t\t\t\twrap=\"nowrap\"\n\t\t\t>\n\t\t\t\t{primaryBarItems}\n\t\t\t\t<ToggleBoardIcon />\n\t\t\t</OverlayRow>\n\t\t\t<OverlayRow mainAlignment=\"flex-end\" orientation=\"vertical\" wrap=\"nowrap\">\n\t\t\t\t{accessoryItems}\n\t\t\t</OverlayRow>\n\t\t</PrimaryBarContainer>\n\t);\n};\n\nconst MemoShellPrimaryBarComponent = React.memo(ShellPrimaryBarComponent);\n\nconst ShellPrimaryBar = (): JSX.Element => {\n\tconst activeRoute = useCurrentRoute();\n\treturn <MemoShellPrimaryBarComponent activeRoute={activeRoute} />;\n};\n\nexport default ShellPrimaryBar;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FunctionComponent } from 'react';\n\nimport { Icon } from '@zextras/carbonio-design-system';\nimport styled from 'styled-components';\n\nconst VerticalDivider = styled.div`\n\tposition: relative;\n\toverflow: visible;\n\theight: 100%;\n\twidth: 0.0625rem;\n\tmax-width: 0.0625rem;\n\tmin-width: 0.0625rem;\n\tbackground-color: ${({ theme }): string => theme.palette.gray2.regular};\n\ttransition: background 0.2s;\n\t&:hover {\n\t\tbackground-color: ${({ theme }): string => theme.palette.gray2.hover};\n\t}\n`;\n\nconst Bubble = styled.div<{ open: boolean }>`\n\tcursor: pointer;\n\tz-index: 2;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: absolute;\n\ttop: 50%;\n\tleft: -0.75rem;\n\twidth: 1.5rem;\n\theight: 1.5rem;\n\tborder-radius: 50%;\n\tbackground-color: ${({ theme }): string => theme.palette.gray2.regular};\n\ttransition: background-color 0.2s, transform 0.2s;\n\ttransform: scaleX(${({ open }): number => (open ? 1 : -1)});\n\t&:hover {\n\t\tbackground-color: ${({ theme }): string => theme.palette.gray2.hover};\n\t}\n\t&:active {\n\t\tbackground-color: ${({ theme }): string => theme.palette.gray2.active};\n\t}\n`;\n\nexport const Collapser: FunctionComponent<{ open: boolean; onClick: () => void }> = ({\n\topen,\n\tonClick\n}) => (\n\t<VerticalDivider>\n\t\t<Bubble onClick={onClick} open={open}>\n\t\t\t<Icon size=\"medium\" icon=\"ChevronLeft\" />\n\t\t</Bubble>\n\t</VerticalDivider>\n);\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport { create } from 'zustand';\n\nimport type { UtilityBarStore } from '../../types';\n\n// extra currying as suggested in https://github.com/pmndrs/zustand/blob/main/docs/guides/typescript.md#basic-usage\nexport const useUtilityBarStore = create<UtilityBarStore>()((set) => ({\n\tmode: 'closed',\n\tcurrent: undefined,\n\tsecondaryBarState: true,\n\tsetMode: (mode): void =>\n\t\tset((s) => ({ mode, secondaryBarState: mode === 'open' ? false : s.secondaryBarState })),\n\tsetCurrent: (current): void => set({ current }),\n\tsetSecondaryBarState: (secondaryBarState: boolean): void => set({ secondaryBarState })\n}));\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC, useCallback, useMemo } from 'react';\n\nimport { Container, ContainerProps } from '@zextras/carbonio-design-system';\nimport { filter, findIndex, map, sortBy } from 'lodash';\nimport { Route, Switch } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { Collapser } from './collapser';\nimport { AppRoute } from '../../types';\nimport AppContextProvider from '../boot/app/app-context-provider';\nimport { useCurrentRoute } from '../history/hooks';\nimport { useAppStore } from '../store/app';\nimport { useUtilityBarStore } from '../utility-bar/store';\nimport { checkRoute } from '../utility-bar/utils';\n\nconst SidebarContainer = styled(Container)<ContainerProps & { sidebarIsOpen?: boolean }>`\n\tmin-width: 3rem;\n\tmax-width: 19.625rem;\n\twidth: ${({ sidebarIsOpen }): number => (sidebarIsOpen ? 19.625 : 3)}rem;\n\ttransition: width 300ms;\n\toverflow-x: hidden;\n`;\n\nconst ShellSecondaryBarComponent: FC<{ activeRoute: AppRoute }> = ({ activeRoute }) => {\n\tconst isOpen = useUtilityBarStore((s) => s.secondaryBarState);\n\tconst setIsOpen = useUtilityBarStore((s) => s.setSecondaryBarState);\n\tconst onCollapserClick = useCallback(() => setIsOpen(!isOpen), [isOpen, setIsOpen]);\n\tconst secondaryBarViews = useAppStore((s) => s.views.secondaryBar);\n\tconst secondaryBarAccessoryViews = useAppStore((s) => s.views.secondaryBarAccessories);\n\tconst accessories = useMemo(\n\t\t() =>\n\t\t\tsortBy(\n\t\t\t\tfilter(secondaryBarAccessoryViews, (v) => checkRoute(v, activeRoute)),\n\t\t\t\t'position'\n\t\t\t),\n\t\t[activeRoute, secondaryBarAccessoryViews]\n\t);\n\tconst disabled = useMemo(\n\t\t() => findIndex(secondaryBarViews, (view) => view.id === activeRoute?.id) < 0,\n\t\t[activeRoute?.id, secondaryBarViews]\n\t);\n\treturn disabled ? null : (\n\t\t<>\n\t\t\t<SidebarContainer\n\t\t\t\tdata-testid=\"SideSecondaryBarContainer\"\n\t\t\t\tsidebarIsOpen={isOpen}\n\t\t\t\trole=\"menu\"\n\t\t\t\theight=\"fill\"\n\t\t\t\torientation=\"vertical\"\n\t\t\t\tmainAlignment=\"space-between\"\n\t\t\t\tonClick={isOpen ? undefined : onCollapserClick}\n\t\t\t\tstyle={{\n\t\t\t\t\tmaxHeight: 'calc(100vh - 3.75rem)',\n\t\t\t\t\toverflowY: 'auto'\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Container mainAlignment=\"flex-start\">\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t{map(secondaryBarViews, (view) => (\n\t\t\t\t\t\t\t<Route key={view.id} path={`/${view.route}`}>\n\t\t\t\t\t\t\t\t<AppContextProvider pkg={view.app}>\n\t\t\t\t\t\t\t\t\t<view.component expanded={isOpen} />\n\t\t\t\t\t\t\t\t</AppContextProvider>\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Switch>\n\t\t\t\t</Container>\n\t\t\t\t<Container mainAlignment=\"flex-end\" height=\"fit\">\n\t\t\t\t\t{accessories.map((view) => (\n\t\t\t\t\t\t<AppContextProvider key={view.id} pkg={view.app}>\n\t\t\t\t\t\t\t<view.component expanded={isOpen} />\n\t\t\t\t\t\t</AppContextProvider>\n\t\t\t\t\t))}\n\t\t\t\t</Container>\n\t\t\t</SidebarContainer>\n\t\t\t<Collapser onClick={onCollapserClick} open={isOpen} />\n\t\t</>\n\t);\n};\n\nconst MemoShellSecondaryBar = React.memo(ShellSecondaryBarComponent);\n\nconst ShellSecondaryBar: FC = () => {\n\tconst activeRoute = useCurrentRoute() as AppRoute;\n\treturn <MemoShellSecondaryBar activeRoute={activeRoute} />;\n};\n\nexport default ShellSecondaryBar;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC } from 'react';\n\nimport { Responsive, Container } from '@zextras/carbonio-design-system';\n\nimport ShellMobileNav from './shell-mobile-nav';\nimport ShellPrimaryBar from './shell-primary-bar';\nimport ShellSecondaryBar from './shell-secondary-bar';\n\ntype ShellNavigationBarProps = {\n\tmobileNavIsOpen: boolean;\n};\n\nconst ShellNavigationBar: FC<ShellNavigationBarProps> = ({ mobileNavIsOpen }) => (\n\t<Container\n\t\torientation=\"horizontal\"\n\t\tbackground=\"gray5\"\n\t\twidth=\"fit\"\n\t\theight=\"fill\"\n\t\tmainAlignment=\"flex-start\"\n\t\tcrossAlignment=\"flex-start\"\n\t>\n\t\t<Responsive mode=\"desktop\">\n\t\t\t<ShellPrimaryBar />\n\t\t\t<ShellSecondaryBar />\n\t\t</Responsive>\n\t\t<Responsive mode=\"mobile\">\n\t\t\t<ShellMobileNav mobileNavIsOpen={mobileNavIsOpen} />\n\t\t</Responsive>\n\t</Container>\n);\n\nexport default ShellNavigationBar;\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, useCallback, useMemo } from 'react';\n\nimport {\n\tContainer,\n\tDropdown,\n\tDropdownItem,\n\tIconButton,\n\tTooltip\n} from '@zextras/carbonio-design-system';\nimport { map, noop } from 'lodash';\n\nimport { useUtilityBarStore } from './store';\nimport { useUtilityViews } from './utils';\nimport type { UtilityView } from '../../types';\nimport { SHELL_APP_ID } from '../constants';\nimport { fetchNoOp } from '../network/fetch';\nimport { logout } from '../network/logout';\nimport { useUserAccount } from '../store/account';\nimport { addBoard } from '../store/boards';\nimport { getT } from '../store/i18n';\n\nconst UtilityBarItem: FC<{ view: UtilityView }> = ({ view }) => {\n\tconst { mode, setMode, current, setCurrent } = useUtilityBarStore();\n\tconst onClick = useCallback((): void => {\n\t\t// eslint-disable-next-line no-nested-ternary\n\t\tsetMode(current !== view.id ? 'open' : mode !== 'open' ? 'open' : 'closed');\n\t\tsetCurrent(view.id);\n\t}, [current, mode, setCurrent, setMode, view.id]);\n\tif (typeof view.button === 'string') {\n\t\treturn (\n\t\t\t<Tooltip label={view.label} placement=\"bottom-end\">\n\t\t\t\t<IconButton\n\t\t\t\t\ticon={view.button}\n\t\t\t\t\ticonColor={current === view.id ? 'primary' : 'text'}\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t/>\n\t\t\t</Tooltip>\n\t\t);\n\t}\n\treturn <view.button mode={mode} setMode={setMode} />;\n};\n\nexport const ShellUtilityBar = (): JSX.Element => {\n\tconst views = useUtilityViews();\n\tconst t = getT();\n\tconst account = useUserAccount();\n\tconst accountItems = useMemo(\n\t\t(): DropdownItem[] => [\n\t\t\t{\n\t\t\t\tid: 'account',\n\t\t\t\tlabel: account?.displayName ?? 'Account',\n\t\t\t\tdisabled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'email',\n\t\t\t\tlabel: account?.name ?? '',\n\t\t\t\tdisabled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'divider',\n\t\t\t\tid: 'divider',\n\t\t\t\tlabel: 'divider'\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'feedback',\n\t\t\t\tlabel: t('label.feedback', 'Feedback'),\n\t\t\t\tonClick: (): void => {\n\t\t\t\t\taddBoard(SHELL_APP_ID)({\n\t\t\t\t\t\turl: 'feedback',\n\t\t\t\t\t\ttitle: t('label.feedback', 'Feedback'),\n\t\t\t\t\t\ticon: 'MessageSquareOutline'\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\ticon: 'MessageSquareOutline'\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'update',\n\t\t\t\tlabel: t('label.update_view', 'Update view'),\n\t\t\t\tonClick: fetchNoOp,\n\t\t\t\ticon: 'Refresh'\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'docs',\n\t\t\t\tlabel: t('label.documentation', 'Documentation'),\n\t\t\t\tonClick: noop,\n\t\t\t\tdisabled: true,\n\t\t\t\ticon: 'InfoOutline'\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'logout',\n\t\t\t\tlabel: t('label.logout', 'Logout'),\n\t\t\t\tonClick: logout,\n\t\t\t\ticon: 'LogOut'\n\t\t\t}\n\t\t],\n\t\t[account, t]\n\t);\n\n\tconst viewItems = useMemo(\n\t\t() => map(views, (view) => <UtilityBarItem view={view} key={view.id} />),\n\t\t[views]\n\t);\n\n\treturn (\n\t\t<Container orientation=\"horizontal\" width=\"fit\">\n\t\t\t{viewItems}\n\t\t\t<Tooltip label={account?.displayName ?? account?.name} placement=\"bottom-end\">\n\t\t\t\t<Dropdown items={accountItems} maxWidth=\"18.75rem\" disableAutoFocus>\n\t\t\t\t\t<IconButton icon=\"PersonOutline\" size=\"large\" onClick={noop} />\n\t\t\t\t</Dropdown>\n\t\t\t</Tooltip>\n\t\t</Container>\n\t);\n};\n","/*\n * SPDX-FileCopyrightText: 2022 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React, { FC, useEffect, useMemo } from 'react';\n\nimport { Container, Responsive } from '@zextras/carbonio-design-system';\nimport { find } from 'lodash';\nimport styled from 'styled-components';\n\nimport { useUtilityBarStore } from './store';\nimport { useUtilityViews } from './utils';\nimport AppContextProvider from '../boot/app/app-context-provider';\n\nconst Panel = styled(Container)<{ mode: string }>`\n\twidth: ${({ mode }): number => (mode !== 'closed' ? 16 : 3)}rem;\n\tborder-radius: 0;\n\theight: 100%;\n\tposition: absolute;\n\tright: 0;\n\ttop: 0;\n\tbottom: 0;\n\ttransition: width 0.2s;\n\tborder-left: 0.0625rem solid ${({ theme }): string => theme.palette.gray2.regular};\n`;\nconst Spacer = styled.div<{ mode: string }>`\n\tposition: relative;\n\twidth: ${({ mode }): number => (mode === 'open' ? 16 : 3)}rem;\n\theight: 100%;\n\ttransition: width 0.2s;\n`;\n\nexport const ShellUtilityPanel: FC = () => {\n\tconst { mode, setMode, current, setCurrent } = useUtilityBarStore();\n\tconst views = useUtilityViews();\n\tconst currentPanel = useMemo(() => find(views, (view) => view.id === current), [current, views]);\n\tuseEffect(() => {\n\t\tif (!(current && currentPanel)) {\n\t\t\tsetCurrent(views[0]?.id);\n\t\t}\n\t}, [current, currentPanel, setCurrent, views]);\n\treturn currentPanel ? (\n\t\t<Responsive mode=\"desktop\">\n\t\t\t<Spacer mode={mode}>\n\t\t\t\t<Panel mode={mode} mainAlignment=\"flex-start\">\n\t\t\t\t\t{currentPanel && (\n\t\t\t\t\t\t<AppContextProvider pkg={currentPanel?.id}>\n\t\t\t\t\t\t\t<currentPanel.component mode={mode} setMode={setMode} />\n\t\t\t\t\t\t</AppContextProvider>\n\t\t\t\t\t)}\n\t\t\t\t</Panel>\n\t\t\t</Spacer>\n\t\t</Responsive>\n\t) : null;\n};\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useContext, useEffect, useState } from 'react';\n\nimport { Row } from '@zextras/carbonio-design-system';\nimport { PreviewManager } from '@zextras/carbonio-ui-preview';\nimport styled from 'styled-components';\n\nimport AppViewContainer from './app-view-container';\nimport { BoardContainer } from './boards/board-container';\nimport ShellContextProvider from './shell-context-provider';\nimport ShellHeader from './shell-header';\nimport ShellNavigationBar from './shell-navigation-bar';\nimport { ThemeCallbacksContext } from '../boot/theme-provider';\nimport { IS_STANDALONE } from '../constants';\nimport { useDarkReaderResultValue } from '../dark-mode/use-dark-reader-result-value';\nimport { useCurrentRoute } from '../history/hooks';\nimport { goToLogin } from '../network/utils';\nimport { useAccountStore } from '../store/account';\nimport { ShellUtilityBar } from '../utility-bar/bar';\nimport { ShellUtilityPanel } from '../utility-bar/panel';\n\nconst Background = styled.div`\n\tbackground: ${({ theme }): string => theme.palette.gray6.regular};\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tmin-height: 100%;\n\tmax-height: 100%;\n\twidth: 100%;\n\tmin-width: 100%;\n\tmax-width: 100%;\n`;\n\nfunction DarkReaderListener(): null {\n\tconst { setDarkReaderState } = useContext(ThemeCallbacksContext);\n\tconst darkReaderResultValue = useDarkReaderResultValue();\n\tuseEffect(() => {\n\t\tif (darkReaderResultValue) {\n\t\t\tsetDarkReaderState(darkReaderResultValue);\n\t\t}\n\t}, [darkReaderResultValue, setDarkReaderState]);\n\treturn null;\n}\n\nconst useLoginRedirection = (allowUnauthenticated?: boolean): void => {\n\tconst auth = useAccountStore((s) => s.authenticated);\n\tuseEffect(() => {\n\t\tif (IS_STANDALONE && !auth && !allowUnauthenticated) {\n\t\t\tgoToLogin();\n\t\t}\n\t}, [allowUnauthenticated, auth]);\n};\n\ninterface ShellComponentProps {\n\tallowUnauthenticated?: boolean;\n\thideShellHeader?: boolean;\n}\n\nconst ShellComponent = ({\n\tallowUnauthenticated,\n\thideShellHeader\n}: ShellComponentProps): JSX.Element => {\n\tconst [mobileNavOpen, setMobileNavOpen] = useState(false);\n\tuseLoginRedirection(allowUnauthenticated);\n\treturn (\n\t\t<Background>\n\t\t\t<DarkReaderListener />\n\t\t\t{/* <MainAppRerouter /> */}\n\t\t\t{!(IS_STANDALONE && hideShellHeader) && (\n\t\t\t\t<ShellHeader\n\t\t\t\t\tmobileNavIsOpen={mobileNavOpen}\n\t\t\t\t\tonMobileMenuClick={(): void => setMobileNavOpen(!mobileNavOpen)}\n\t\t\t\t>\n\t\t\t\t\t<ShellUtilityBar />\n\t\t\t\t</ShellHeader>\n\t\t\t)}\n\t\t\t<Row crossAlignment=\"unset\" style={{ position: 'relative', flexGrow: '1' }}>\n\t\t\t\t<ShellNavigationBar mobileNavIsOpen={mobileNavOpen} />\n\t\t\t\t<AppViewContainer />\n\t\t\t\t<ShellUtilityPanel />\n\t\t\t</Row>\n\t\t\t<BoardContainer />\n\t\t</Background>\n\t);\n};\n\nconst MemoShell = React.memo(ShellComponent);\n\nconst ShellView = (): JSX.Element => {\n\tconst activeRoute = useCurrentRoute();\n\tconst allowUnauthenticated = activeRoute?.standalone?.allowUnauthenticated;\n\tconst hideShellHeader = activeRoute?.standalone?.hideShellHeader;\n\treturn (\n\t\t<ShellContextProvider>\n\t\t\t<PreviewManager>\n\t\t\t\t<MemoShell allowUnauthenticated={allowUnauthenticated} hideShellHeader={hideShellHeader} />\n\t\t\t</PreviewManager>\n\t\t</ShellContextProvider>\n\t);\n};\n\nexport default ShellView;\n","/*\n * SPDX-FileCopyrightText: 2021 Zextras <https://www.zextras.com>\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { FC, useEffect } from 'react';\n\nimport {\n\tModalManager,\n\tSnackbarManager,\n\tuseModal,\n\tuseSnackbar\n} from '@zextras/carbonio-design-system';\nimport { useTranslation } from 'react-i18next';\nimport { BrowserRouter, Route, Switch, useHistory, useParams } from 'react-router-dom';\n\nimport AppLoaderMounter from './app/app-loader-mounter';\nimport { registerDefaultViews } from './app/default-views';\nimport { Loader } from './loader';\nimport ShellI18nextProvider from './shell-i18n-provider';\nimport { ThemeProvider } from './theme-provider';\nimport { BASENAME, IS_STANDALONE } from '../constants';\nimport { NotificationPermissionChecker } from '../notification/NotificationPermissionChecker';\nimport ShellView from '../shell/shell-view';\nimport { useAppStore } from '../store/app';\nimport { useBridge } from '../store/context-bridge';\n\nconst ContextBridge = (): null => {\n\tconst history = useHistory();\n\tconst createSnackbar = useSnackbar();\n\tconst createModal = useModal();\n\tuseBridge({\n\t\tfunctions: {\n\t\t\tgetHistory: () => history,\n\t\t\tcreateSnackbar,\n\t\t\tcreateModal\n\t\t}\n\t});\n\treturn null;\n};\n\nconst StandaloneListener = (): null => {\n\tconst { route } = useParams<{ route?: string }>();\n\tuseEffect(() => {\n\t\tif (route) useAppStore.setState({ standalone: route });\n\t}, [route]);\n\treturn null;\n};\n\nexport const DefaultViewsRegister = (): null => {\n\tconst [t] = useTranslation();\n\tuseEffect(() => {\n\t\tregisterDefaultViews(t);\n\t}, [t]);\n\treturn null;\n};\n\nconst Bootstrapper: FC = () => (\n\t<ThemeProvider>\n\t\t<ShellI18nextProvider>\n\t\t\t<BrowserRouter basename={BASENAME}>\n\t\t\t\t<SnackbarManager>\n\t\t\t\t\t<ModalManager>\n\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t{IS_STANDALONE && (\n\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t<Route path={'/:route'}>\n\t\t\t\t\t\t\t\t\t<StandaloneListener />\n\t\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<DefaultViewsRegister />\n\t\t\t\t\t\t<NotificationPermissionChecker />\n\t\t\t\t\t\t<ContextBridge />\n\t\t\t\t\t\t<AppLoaderMounter />\n\t\t\t\t\t\t<ShellView />\n\t\t\t\t\t</ModalManager>\n\t\t\t\t</SnackbarManager>\n\t\t\t</BrowserRouter>\n\t\t</ShellI18nextProvider>\n\t</ThemeProvider>\n);\n\nexport default Bootstrapper;\n","var map = {\n\t\"./de/index.js\": [\n\t\t97816,\n\t\t816\n\t],\n\t\"./en-US/index.js\": [\n\t\t84491,\n\t\t491\n\t],\n\t\"./es/index.js\": [\n\t\t40087,\n\t\t87\n\t],\n\t\"./fr/index.js\": [\n\t\t90455,\n\t\t455\n\t],\n\t\"./hi/index.js\": [\n\t\t49069,\n\t\t69\n\t],\n\t\"./it/index.js\": [\n\t\t18879,\n\t\t138,\n\t\t879\n\t],\n\t\"./ja/index.js\": [\n\t\t33206,\n\t\t206\n\t],\n\t\"./nl/index.js\": [\n\t\t79465,\n\t\t465\n\t],\n\t\"./pl/index.js\": [\n\t\t44691,\n\t\t138,\n\t\t691\n\t],\n\t\"./pt-BR/index.js\": [\n\t\t37839,\n\t\t839\n\t],\n\t\"./pt/index.js\": [\n\t\t2277,\n\t\t277\n\t],\n\t\"./ro/index.js\": [\n\t\t17339,\n\t\t339\n\t],\n\t\"./ru/index.js\": [\n\t\t2172,\n\t\t138,\n\t\t172\n\t],\n\t\"./th/index.js\": [\n\t\t10329,\n\t\t329\n\t],\n\t\"./tr/index.js\": [\n\t\t94471,\n\t\t471\n\t],\n\t\"./vi/index.js\": [\n\t\t51297,\n\t\t297\n\t],\n\t\"./zh-CN/index.js\": [\n\t\t91361,\n\t\t138,\n\t\t361\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(() => {\n\t\treturn __webpack_require__.t(id, 7 | 16);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 95804;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./af\": 6678,\n\t\"./af.js\": 6678,\n\t\"./ar\": 25295,\n\t\"./ar-dz\": 45476,\n\t\"./ar-dz.js\": 45476,\n\t\"./ar-kw\": 31348,\n\t\"./ar-kw.js\": 31348,\n\t\"./ar-ly\": 22025,\n\t\"./ar-ly.js\": 22025,\n\t\"./ar-ma\": 33478,\n\t\"./ar-ma.js\": 33478,\n\t\"./ar-sa\": 71018,\n\t\"./ar-sa.js\": 71018,\n\t\"./ar-tn\": 57371,\n\t\"./ar-tn.js\": 57371,\n\t\"./ar.js\": 25295,\n\t\"./az\": 63895,\n\t\"./az.js\": 63895,\n\t\"./be\": 10796,\n\t\"./be.js\": 10796,\n\t\"./bg\": 99983,\n\t\"./bg.js\": 99983,\n\t\"./bm\": 3740,\n\t\"./bm.js\": 3740,\n\t\"./bn\": 67013,\n\t\"./bn-bd\": 5046,\n\t\"./bn-bd.js\": 5046,\n\t\"./bn.js\": 67013,\n\t\"./bo\": 30393,\n\t\"./bo.js\": 30393,\n\t\"./br\": 30965,\n\t\"./br.js\": 30965,\n\t\"./bs\": 5228,\n\t\"./bs.js\": 5228,\n\t\"./ca\": 49744,\n\t\"./ca.js\": 49744,\n\t\"./cs\": 73141,\n\t\"./cs.js\": 73141,\n\t\"./cv\": 79831,\n\t\"./cv.js\": 79831,\n\t\"./cy\": 38153,\n\t\"./cy.js\": 38153,\n\t\"./da\": 15477,\n\t\"./da.js\": 15477,\n\t\"./de\": 63062,\n\t\"./de-at\": 84080,\n\t\"./de-at.js\": 84080,\n\t\"./de-ch\": 71626,\n\t\"./de-ch.js\": 71626,\n\t\"./de.js\": 63062,\n\t\"./dv\": 72168,\n\t\"./dv.js\": 72168,\n\t\"./el\": 56800,\n\t\"./el.js\": 56800,\n\t\"./en-au\": 43047,\n\t\"./en-au.js\": 43047,\n\t\"./en-ca\": 10033,\n\t\"./en-ca.js\": 10033,\n\t\"./en-gb\": 25383,\n\t\"./en-gb.js\": 25383,\n\t\"./en-ie\": 90853,\n\t\"./en-ie.js\": 90853,\n\t\"./en-il\": 65665,\n\t\"./en-il.js\": 65665,\n\t\"./en-in\": 31886,\n\t\"./en-in.js\": 31886,\n\t\"./en-nz\": 36072,\n\t\"./en-nz.js\": 36072,\n\t\"./en-sg\": 86350,\n\t\"./en-sg.js\": 86350,\n\t\"./eo\": 88684,\n\t\"./eo.js\": 88684,\n\t\"./es\": 48898,\n\t\"./es-do\": 78613,\n\t\"./es-do.js\": 78613,\n\t\"./es-mx\": 6587,\n\t\"./es-mx.js\": 6587,\n\t\"./es-us\": 4654,\n\t\"./es-us.js\": 4654,\n\t\"./es.js\": 48898,\n\t\"./et\": 78351,\n\t\"./et.js\": 78351,\n\t\"./eu\": 71733,\n\t\"./eu.js\": 71733,\n\t\"./fa\": 12401,\n\t\"./fa.js\": 12401,\n\t\"./fi\": 47303,\n\t\"./fi.js\": 47303,\n\t\"./fil\": 98889,\n\t\"./fil.js\": 98889,\n\t\"./fo\": 86588,\n\t\"./fo.js\": 86588,\n\t\"./fr\": 10500,\n\t\"./fr-ca\": 78579,\n\t\"./fr-ca.js\": 78579,\n\t\"./fr-ch\": 21445,\n\t\"./fr-ch.js\": 21445,\n\t\"./fr.js\": 10500,\n\t\"./fy\": 20235,\n\t\"./fy.js\": 20235,\n\t\"./ga\": 98789,\n\t\"./ga.js\": 98789,\n\t\"./gd\": 93110,\n\t\"./gd.js\": 93110,\n\t\"./gl\": 22881,\n\t\"./gl.js\": 22881,\n\t\"./gom-deva\": 26778,\n\t\"./gom-deva.js\": 26778,\n\t\"./gom-latn\": 55522,\n\t\"./gom-latn.js\": 55522,\n\t\"./gu\": 59273,\n\t\"./gu.js\": 59273,\n\t\"./he\": 53979,\n\t\"./he.js\": 53979,\n\t\"./hi\": 29356,\n\t\"./hi.js\": 29356,\n\t\"./hr\": 72592,\n\t\"./hr.js\": 72592,\n\t\"./hu\": 52674,\n\t\"./hu.js\": 52674,\n\t\"./hy-am\": 76846,\n\t\"./hy-am.js\": 76846,\n\t\"./id\": 30029,\n\t\"./id.js\": 30029,\n\t\"./is\": 28255,\n\t\"./is.js\": 28255,\n\t\"./it\": 9085,\n\t\"./it-ch\": 34451,\n\t\"./it-ch.js\": 34451,\n\t\"./it.js\": 9085,\n\t\"./ja\": 5864,\n\t\"./ja.js\": 5864,\n\t\"./jv\": 95688,\n\t\"./jv.js\": 95688,\n\t\"./ka\": 31848,\n\t\"./ka.js\": 31848,\n\t\"./kk\": 8786,\n\t\"./kk.js\": 8786,\n\t\"./km\": 33226,\n\t\"./km.js\": 33226,\n\t\"./kn\": 51243,\n\t\"./kn.js\": 51243,\n\t\"./ko\": 98852,\n\t\"./ko.js\": 98852,\n\t\"./ku\": 77226,\n\t\"./ku.js\": 77226,\n\t\"./ky\": 10896,\n\t\"./ky.js\": 10896,\n\t\"./lb\": 37104,\n\t\"./lb.js\": 37104,\n\t\"./lo\": 86111,\n\t\"./lo.js\": 86111,\n\t\"./lt\": 91059,\n\t\"./lt.js\": 91059,\n\t\"./lv\": 7962,\n\t\"./lv.js\": 7962,\n\t\"./me\": 74899,\n\t\"./me.js\": 74899,\n\t\"./mi\": 26642,\n\t\"./mi.js\": 26642,\n\t\"./mk\": 68949,\n\t\"./mk.js\": 68949,\n\t\"./ml\": 49043,\n\t\"./ml.js\": 49043,\n\t\"./mn\": 12241,\n\t\"./mn.js\": 12241,\n\t\"./mr\": 23022,\n\t\"./mr.js\": 23022,\n\t\"./ms\": 29403,\n\t\"./ms-my\": 4188,\n\t\"./ms-my.js\": 4188,\n\t\"./ms.js\": 29403,\n\t\"./mt\": 27104,\n\t\"./mt.js\": 27104,\n\t\"./my\": 87673,\n\t\"./my.js\": 87673,\n\t\"./nb\": 74363,\n\t\"./nb.js\": 74363,\n\t\"./ne\": 49995,\n\t\"./ne.js\": 49995,\n\t\"./nl\": 25363,\n\t\"./nl-be\": 62352,\n\t\"./nl-be.js\": 62352,\n\t\"./nl.js\": 25363,\n\t\"./nn\": 89574,\n\t\"./nn.js\": 89574,\n\t\"./oc-lnc\": 41822,\n\t\"./oc-lnc.js\": 41822,\n\t\"./pa-in\": 40430,\n\t\"./pa-in.js\": 40430,\n\t\"./pl\": 56165,\n\t\"./pl.js\": 56165,\n\t\"./pt\": 51781,\n\t\"./pt-br\": 66584,\n\t\"./pt-br.js\": 66584,\n\t\"./pt.js\": 51781,\n\t\"./ro\": 83145,\n\t\"./ro.js\": 83145,\n\t\"./ru\": 23270,\n\t\"./ru.js\": 23270,\n\t\"./sd\": 22181,\n\t\"./sd.js\": 22181,\n\t\"./se\": 86638,\n\t\"./se.js\": 86638,\n\t\"./si\": 88434,\n\t\"./si.js\": 88434,\n\t\"./sk\": 28634,\n\t\"./sk.js\": 28634,\n\t\"./sl\": 38661,\n\t\"./sl.js\": 38661,\n\t\"./sq\": 75890,\n\t\"./sq.js\": 75890,\n\t\"./sr\": 41865,\n\t\"./sr-cyrl\": 42155,\n\t\"./sr-cyrl.js\": 42155,\n\t\"./sr.js\": 41865,\n\t\"./ss\": 12220,\n\t\"./ss.js\": 12220,\n\t\"./sv\": 34292,\n\t\"./sv.js\": 34292,\n\t\"./sw\": 56803,\n\t\"./sw.js\": 56803,\n\t\"./ta\": 65669,\n\t\"./ta.js\": 65669,\n\t\"./te\": 50774,\n\t\"./te.js\": 50774,\n\t\"./tet\": 28794,\n\t\"./tet.js\": 28794,\n\t\"./tg\": 50652,\n\t\"./tg.js\": 50652,\n\t\"./th\": 48819,\n\t\"./th.js\": 48819,\n\t\"./tk\": 19620,\n\t\"./tk.js\": 19620,\n\t\"./tl-ph\": 28767,\n\t\"./tl-ph.js\": 28767,\n\t\"./tlh\": 10812,\n\t\"./tlh.js\": 10812,\n\t\"./tr\": 23935,\n\t\"./tr.js\": 23935,\n\t\"./tzl\": 40080,\n\t\"./tzl.js\": 40080,\n\t\"./tzm\": 96112,\n\t\"./tzm-latn\": 99882,\n\t\"./tzm-latn.js\": 99882,\n\t\"./tzm.js\": 96112,\n\t\"./ug-cn\": 68037,\n\t\"./ug-cn.js\": 68037,\n\t\"./uk\": 8358,\n\t\"./uk.js\": 8358,\n\t\"./ur\": 73244,\n\t\"./ur.js\": 73244,\n\t\"./uz\": 4535,\n\t\"./uz-latn\": 55334,\n\t\"./uz-latn.js\": 55334,\n\t\"./uz.js\": 4535,\n\t\"./vi\": 45622,\n\t\"./vi.js\": 45622,\n\t\"./x-pseudo\": 21161,\n\t\"./x-pseudo.js\": 21161,\n\t\"./yo\": 11517,\n\t\"./yo.js\": 11517,\n\t\"./zh-cn\": 9902,\n\t\"./zh-cn.js\": 9902,\n\t\"./zh-hk\": 17658,\n\t\"./zh-hk.js\": 17658,\n\t\"./zh-mo\": 29702,\n\t\"./zh-mo.js\": 29702,\n\t\"./zh-tw\": 73465,\n\t\"./zh-tw.js\": 73465\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 46700;"],"names":["_ref","children","onError","useCallback","error","console","React","Catcher","ZIMBRA_STANDARD_COLORS","zValue","hex","zLabel","FOLDERS","USER_ROOT","INBOX","TRASH","SPAM","SENT","DRAFTS","CONTACTS","TAGS","CONVERSATIONS","CALENDAR","ROOT","NOTEBOOK","AUTO_CONTACTS","IM_LOGS","TASKS","BRIEFCASE","LAST_SYSTEM_FOLDER_POSITION","SHELL_APP_ID","SETTINGS_APP_ID","ACCOUNTS_APP_ID","SEARCH_APP_ID","ACTION_TYPES","CONVERSATION","CONVERSATION_lIST","MESSAGE","MESSAGE_lIST","CONTACT","CONTACT_lIST","INVITE","INVITE_lIST","APPOINTMENT","APPOINTMENT_lIST","FOLDER","FOLDER_lIST","CALENDAR_lIST","NEW","darkReaderDynamicThemeFixes","ignoreImageAnalysis","invert","css","ignoreInlineStyle","disableStyleSheetsProxy","base","standaloneBase","concat","IS_STANDALONE","window","location","pathname","startsWith","BASENAME","EMAIL_VALIDATION_REGEX","ROOT_NAME","DARK_READER_VALUES","FOLDER_VIEW","search_folder","tag","conversation","message","contact","document","appointment","virtual_conversation","remote_folder","wiki","task","chat","LOCAL_STORAGE_SETTINGS_KEY","LOCAL_STORAGE_LAST_PRIMARY_KEY","LOCAL_STORAGE_SEARCH_KEY","LOCAL_STORAGE_BOARD_SIZE","SCALING_OPTIONS","value","label","BASE_FONT_SIZE","SCALING_LIMIT","WIDTH","HEIGHT","DPR","LOGIN_V3_CONFIG_PATH","DARK_READER_PROP_KEY","SENTRY_SHELL_DSN","SENTRY_FEEDBACK_DNS","ResultLabelType","HEADER_BAR_HEIGHT","PRIMARY_BAR_WIDTH","BOARD_HEADER_HEIGHT","BOARD_TAB_WIDTH","BOARD_CONTAINER_ZINDEX","BOARD_MIN_VISIBILITY","top","left","DELEGATED_SEND_SAVE_TARGET","useAccountStore","create","authenticated","account","undefined","version","settings","prefs","attrs","props","usedQuota","lastNotificationTime","Date","now","useUserAccount","s","useUserAccounts","acct","useMemo","useUserRights","_s$account$rights","_s$account","rights","targets","useUserRight","right","_find$target","_find","find","target","useUserSettings","useUserSetting","_len","arguments","length","path","Array","_key","get","join","getUserAccount","getState","getUserAccounts","getUserSettings","getUserSetting","_len2","_key2","getUserRights","_useAccountStore$getS","_useAccountStore$getS2","getUserRight","_find$target2","_find2","defaultLng","_ref2","_settings$prefs","zimbraPrefLocale","_settings$attrs","zimbraLocale","defaultI18n","i18next","lng","defaultI18nInitOptions","returnEmptyString","returnNull","compatibilityJSON","fallbackLng","debug","interpolation","escapeValue","missingKeyHandler","_","__","key","warn","backend","loadPath","BASE_PATH","useI18nStore","set","instances","locale","setters","setLocale","produce","state","forEach","i18nInst","changeLanguage","getters","getLocale","actions","addI18n","apps","appsWithShell","_toConsumableArray","commit","description","js_entrypoint","name","priority","type","attrKey","icon","display","addShell","reduce","acc","app","newI18n","use","Backend","init","_objectSpread","dropRight","split","t","initReactI18next","getTFunction","_instances$app$t","_instances$app2","_useI18nStore$getStat2","getT","_instances$SHELL_APP_","_instances$SHELL_APP_2","_useI18nStore$getStat3","_instances$pkg","pkg","_useI18nStore$getStat","i18n","I18nextProvider","AppErrorCatcher","FallbackView","normalizeBadgeInfo","badge","_badge$show","_badge$count","_badge$showCount","_badge$color","show","count","showCount","color","filterById","items","id","filter","item","STANDALONE_RESPONSE","useAppStore","standalone","appContexts","shell","entryPoints","routes","views","primaryBar","secondaryBar","appView","board","utilityBar","search","primaryBarAccessories","secondaryBarAccessories","addApps","_defineProperty","_app$commit","_app$description","_app$js_entrypoint","_app$name","_app$priority","_app$version","_app$type","_app$icon","_app$display","sentryDsn","normalizeApp","val","setAppContext","context","merge","addRoute","routeData","route","sortBy","unionWith","component","position","visible","a","b","setRouteVisibility","idx","findIndex","view","removeRoute","omit","addBoardView","data","unionBy","removeBoardView","addSettingsView","removeSettingsView","addSearchView","removeSearchView","addUtilityView","removeUtilityView","addPrimaryAccessoryView","removePrimaryAccessoryView","addSecondaryAccessoryView","removeSecondaryAccessoryView","updatePrimaryBadge","bar","updateUtilityBadge","useApp","appId","useAppList","getApp","getAppContext","getRoutes","useRoutes","Mounter","AppContextProvider","Suspense","fallback","entries","map","Comp","hidden","style","height","overflow","useReporter","_clients","clients","Hub","BrowserClient","transport","makeFetchTransport","stackParser","defaultStackParser","integrations","defaultIntegrations","dsn","release","maxValueLength","setClients","report","hint","_reporter$clients$app","eventId","captureException","info","useBoardStore","orderedBoards","boards","expanded","minimized","addBoard","_board$id","uniqueId","setState","_board$icon","_getApp","url","trimStart","current","unshift","closeBoard","_state$boards$id","_state$boards$id$onCl","onClose","call","index","boardId","splice","closeAllBoards","_b$onClose","onGoToPanel","_state$boards$id2","_state$boards$id2$onG","minimizeBoards","reopenBoards","expandBoards","reduceBoards","setCurrentBoard","updateBoard","updateBoardContext","useBoardById","getBoardById","useBoardContextById","getBoardContextById","boardContext","createContext","boardHooksContext","BoardProvider","callbacks","getBoardContext","getBoard","Provider","useBoardHooks","useContext","useBoard","TextArea","styled","textarea","withConfig","displayName","componentId","theme","palette","gray5","regular","text","_ref3","fonts","_ref4","size","sizes","font","_ref5","gray4","TextContainer","Container","ButtonContainer","TAContainer","_ref6","_ref7","_ref8","primary","SubHeadingText","Text","_ref9","lineHeight","LabelContainer","_ref10","disabled","gray2","emptyEvent","level","extra","topic","user","reducer","_ref11","payload","ModuleLabelFactory","_ref12","selected","open","focus","orientation","width","crossAlignment","mainAlignment","borderRadius","background","padding","all","Row","takeAvailableSpace","Icon","alignSelf","FeedbackLabelFactory","_ref13","showErr","useSearchStore","query","searchDisabled","tooltip","setSearchDisabled","updateQuery","isFunction","updateModule","module","useQuery","useDisableSearch","ResultsHeader","_ref$labelType","labelType","NORMAL","_useQuery","_useQuery2","_slicedToArray","_useDisableSearch","setDisabled","resetQuery","labelTypeElem","_getIconAndColor","WARNING","ERROR","getIconAndColor","_getIconAndColor2","Padding","chipItems","queryChip","Chip","_extends","minHeight","maxHeight","horizontal","vertical","wrap","Button","onClick","Divider","GEN_TIME_FORMAT","getGenTimeMoment","date","moment","dateToGenTime","format","startOfDay","setHours","endOfDay","localeList","localName","defaultValue","dateFnsLocale","getAutoScalingFontSize","screen","devicePixelRatio","baseFontIndex","option","upsertPrefOnUnsavedChanges","addModifiedValueCallback","prefKey","prefValue","isBoolean","isPrimary","identity","List","ListV2","getNewPersonaNextIdentityName","numberToCheck","unavailableIdentityNames","newPersonaNextIdentityName","includes","accountName","selectedIdentityId","identities","identitiesDefault","setSelectedIdentityId","removeIdentity","addIdentity","_useTranslation","useTranslation","createModal","ModalManagerContext","createListRequestIdRef","useRef","addNewPersona","_identities$0$_attrs","_identities$0$_attrs2","newPersonaName","_item$_attrs","_attrs","zimbraPrefIdentityName","zimbraPrefFromDisplay","zimbraPrefFromAddress","zimbraPrefFromAddressType","zimbraPrefReplyToEnabled","onConfirmDelete","onDelete","closeModal","title","onConfirm","confirmLabel","confirmColor","showCloseIcon","ListItem","active","_item$_attrs2","_item$_attrs3","_item$_attrs4","role","zimbraPrefIdentityId","weight","minWidth","bottom","useReset","ref","resetFn","useImperativeHandle","reset","delegatedSendSaveTarget","updateDelegatedSendSaveTarget","resetRef","delegates","_useState","useState","_useState2","activeDelegate","setActiveDelegate","_useState3","_useState4","activeValue","setActiveValue","radioGroupOnChange","newValue","arg","Error","ItemComponent","setActiveDelegateCallback","email","noop","RadioGroup","justifyContent","onChange","Radio","identityAttrs","updateIdentities","personaValue","setPersonaValue","personaLabel","useEffect","ev","Input","_identity$_attrs","_identity$_attrs3","emailLabel","accountNameValue","setAccountNameValue","_identity$_attrs2","accountLabel","onChangeDisabled","blankItem","availableEmailAddresses","replyToEnabledValue","setReplyToEnabledValue","zimbraPrefReplyToAddress","replyToAddress","setReplyToAddress","_useState5","_useState6","dropdownOpen","setDropdownOpen","_useState7","_useState8","fromDisplayValue","setFromDisplayValue","_useState9","zimbraPrefReplyToDisplay","_useState10","replyToDisplay","setReplyToDisplay","fromAddressArray","address","_useState11","_useState12","fromAddress","setFromAddress","_identityAttrs$zimbra","onClickReplyToEnabled","prevState","newState","fromDisplayLabel","fromAddressLabel","onChangeFromAddress","newAddress","replyToEnabledLabel","replyToDisplayLabel","onChangePrefReplyToDisplay","e","replyToAddressLabel","onChangeReplyToAddress","replyToAddressArray","_identityAttrs$zimbra2","_identityAttrs$zimbra3","isValidEmail","test","Select","selection","showCheckbox","Checkbox","Dropdown","placement","flexGrow","onOpen","hasError","CustomIcon","RouteLeavingGuard","when","onSave","_ref$dataHasError","dataHasError","history","useHistory","lastLocationInitial","modalVisible","setModalVisible","lastLocation","setLastLocation","confirmedNavigation","setConfirmedNavigation","cancel","onSecondaryAction","push","Prompt","nextLocation","Modal","closeIconTooltip","then","results","rejected","result","status","reason","secondaryActionLabel","optionalFooter","_history$location","onCancel","isDirty","params","useParams","crumbs","setTimeout","_document$querySelect","querySelector","replace","scrollIntoView","Breadcrumbs","_UAParser","UAParser","os","browser","userAgent","goToLogin","assign","origin","useNetworkStore","pollingInterval","seq","useNotify","_s$notify","notify","useRefresh","_s$refresh","refresh","tagWorker","Worker","URL","folderWorker","useFolderStore","folders","roots","searches","onmessage","sortFolders","f","_parts$","parts","getOriginalId","parseInt","toLowerCase","isRoot","oname","folderViewFilter","v","deep","filterNodes","sortFunction","i","mapNodes","mapFunction","filterFunction","recursionKey","folder","useFolder","_s$folders","getFolder","_useFolderStore$getSt","useFolders","getFolders","useRoot","_s$roots","getRoot","_useFolderStore$getSt2","useRoots","getRoots","useRootByUser","userId","getRootByUser","useSearchFolder","_s$searches","getSearchFolder","useSearchFolders","getSearchFolders","useFoldersByView","Object","values","useFoldersAccordionByView","CustomComponent","itemProps","_itemProps","disableHover","useTagStore","tags","useTags","ids","pick","getTags","parsePollingInterval","_settings$prefs$zimbr","pollingPref","zimbraPrefMailPollingInterval","pollingValue","Number","isNaN","fetchNoOp","getSoapFetch","_jsns","limitToOneBlocked","wait","getAccount","otherAccount","by","_content","getXmlAccount","handleResponse","api","res","_res$Header","_res$Body","_Body$Fault$Detail2","_Body$Fault$Reason","noOpTimeout","clearTimeout","Body","Fault","code","_Body$Fault$Detail","Detail","Code","Reason","Header","_res$Header$context$r","_res$Header$context","_res$Header$context2","_maxBy$seq","_maxBy","responseUsedQuota","mbx","modified","_context","_notify$deleted","deleted","maxBy","Promise","r","_refresh$folder","postMessage","op","handleSync","nextPollingInterval","_res$Body2","waitDisallowed","fault","getPollingInterval","body","signal","_notify$","_notify$2","zimbraVersion","_useNetworkStore$getS3","session","fetch","method","headers","JSON","stringify","json","getXmlSoapFetch","_useNetworkStore$getS","sessionId","_useAccountStore$getS3","AccountsSettings","createSnackbar","useSnackbar","createRecordRef","deleteArrayRef","modifyRecordRef","delegatedSendSaveTargetRef","zimbraPrefDelegatedSendSaveTarget","setIsDirty","calculateIsDirty","isEmpty","updatedValue","resetLists","defaultIdx","cloneDeep","defaultIdentity","defaultAsFirstOrderIdentities","setIdentities","maxIdentities","zimbraIdentityMaxNumEntries","actualIdentity","identityId","autoHideTimeout","hideButton","allSettled","reject","modifyPrefsRequest","createRecord","deleteArray","modifyRecord","createIdentityRequests","deleteRequests","requestId","toString","modifyIdentityRequests","promise","DeleteIdentityRequest","CreateIdentityRequest","ModifyIdentityRequest","ModifyPrefsRequest","_prevState$account2","currentIdentities","deletedIdentities","addedIdentities","modifiedIdentitiesAttrs","filteredIdentities","filteredAndModified","CreateIdentityResponse","accumulator","propIndex","apply","_prevState$account","_account$rights","_account$rights2","addr","zimbraMailAlias","isArray","String","uniq","getAvailableEmailAddresses","delegatesSettingsSectionRef","_delegatesSettingsSec","setDelegates","ace","d","personaSettings","PersonaSettings","settingsSentMessages","SettingsSentMessages","SettingsHeader","AccountsList","PrimaryAccountSettings","Delegates","appearanceSubSection","timezoneAndLanguageSubSection","outOfOfficeSubSection","searchPrefsSubSection","versionsSubSection","quotaSubSection","accountSubSection","settingsSubSections","subSection","gap","useLoginConfigStore","loaded","carbonioWebUiTitle","carbonioWebUiFavicon","useDarkReaderResultValue","carbonioWebUiDarkMode","settingReceived","prop","zimlet","getPrefersColorSchemeDarkMedia","matchMedia","useDarkMode","darkReaderResultValue","darkModeEnabled","setDarkModeEnabled","matches","setCallback","event","addEventListener","removeEventListener","darkReaderStatus","setGlobalCursor","cursor","_document$body$classL","cursors","classList","remove","add","setElementSizeAndPosition","element","stopPropagation","createExportForTestOnly","objToExport","useLocalStorageStore","storage","readValue","localStorageItem","localStorage","getItem","parse","setValue","valueA","valueB","valueToStore","Function","setItem","DEFAULT_OPTIONS","keepSynchedWithStorage","useLocalStorage","initialValue","options","storedValue","shouldDispatchStorageEventRef","localStorageOptions","readValueForKey","setValueForKey","dispatchEvent","Event","setFetchMethod","ThemeCallbacksContext","addExtension","setDarkReaderState","paletteExtension","customTheme","shared","hover","linked","iconExtension","icons","Shared","ArrowCircleRight","Linked","ArrowCircleLeft","globalCursorsExtension","globalCursors","GlobalStyle","createGlobalStyle","baseFontSize","ThemeProvider","_useLocalStorage","localStorageSettings","extensions","setExtensions","primaryColor","_useLocalStorage2","localStorageLastPrimary","setLocalStorageLastPrimary","_useLoginConfigStore","carbonioWebUiPrimaryColor","carbonioWebUiDarkPrimaryColor","_useDarkMode","useTheme","dark","light","useGetPrimaryColor","useLayoutEffect","customThemePalette","generateColorSet","extension","darkReaderState","auto","disable","enable","aggregatedExtensions","themeAccumulator","themeExtensionFn","newExtension","ext","savedScalingValueSetting","themeCallbacksContextValue","UIThemeProvider","addMod","removeMod","setSelection","setSelectNewValue","onSelectionChange","maybeDarkReaderPropValue","logout","logoff","redirect","customLogoutUrl","carbonioWebUiLogoutURL","Logout","sectionTitle","FormSubSection","copyToClipboard","preventDefault","HTMLElement","navigator","clipboard","writeText","innerText","filteredList","Tooltip","Badge","backgroundColor","success","gray6","coerceGenTime","genTime","local","toDate","genTimeToDate","OutOfOfficeTimePeriodSection","prefOutOfOfficeFromDate","prefOutOfOfficeUntilDate","fromDate","setFromDate","untilDate","setUntilDate","allDayEnabled","setAllDayEnabled","editTimeIsDisabled","updatePref","initPrefs","fromDatePref","untilDatePref","fromDateAllDay","untilDateAllDay","getTime","outOfOfficeFromDateOnChange","newFromDate","newUntilDate","outOfOfficeUntilDateOnChange","toggleAllDay","prevWasEnabled","nowIsEnabled","startOfFromDate","endOfUntilDate","DateTimePicker","dateFormat","includeTime","timeLabel","showTimeSelect","showTimeSelectOnly","buildItemsExternalSenders","SEND_AUTO_REPLY","SHOW_EXTERNAL_INPUT","SEND_NOT_IN_ORG","SUPPRESS_EXTERNAL","getExternalSendersPrefsData","itemsExternalSenders","zimbraPrefOutOfOfficeSuppressExternalReply","zimbraPrefOutOfOfficeExternalReplyEnabled","zimbraPrefExternalSendersType","OutOfOfficeSettings","_settings$prefs$zimbr2","outOfOfficeSectionTitle","zimbraPrefOutOfOfficeReplyEnabled","prefOutOfOfficeReplyEnabled","setPrefOutOfOfficeReplyEnabled","zimbraPrefOutOfOfficeReply","prefOutOfOfficeReply","setPrefOutOfOfficeReply","prefOutOfOfficeExternalReplyEnabled","setPrefOutOfOfficeExternalReplyEnabled","zimbraPrefOutOfOfficeExternalReply","prefOutOfOfficeExternalReply","setPrefOutOfOfficeExternalReply","externalSendersSelectedItem","setExternalSendersSelectedItem","zimbraPrefOutOfOfficeFromDate","zimbraPrefOutOfOfficeUntilDate","sendAutoReplyTimePeriodEnabled","setSendAutoReplyTimePeriodEnabled","outOfOfficeTimePeriodResetRef","_settings$prefs$zimbr3","_settings$prefs$zimbr4","_outOfOfficeTimePerio","prefOutOfOfficeReplyEnabledSelectItems","buildItemsPrefOutOfOfficeReplyEnabled","prefOutOfOfficeReplyEnabledSelectedValue","prefOutOfOfficeReplyEnabledOnChange","externalSendersSelectItems","externalSendersHandler","externalSendersOnChange","newSelectItem","prefOutOfOfficeReplyOnChange","prefOutOfOfficeExternalReplyOnChange","toggleSendAutoReplyTimePeriod","nextState","dropdownWidth","dropdownMaxWidth","ScalingSliderContainer","ExampleContainer","$fontSize","ExampleText","BASE_FONT_OPTION_INDEX","AUTOSCALING_FONT_SIZE","AUTOSCALING_FONT_OPTION_INDEX","ScalingSettingSection","_scalingSettings$sett","scalingSettings","addLocalStoreChange","cleanLocalStoreChange","_useMemo","labels","_useMemo2","scalingOptionValues","scalingOptionLabels","savedOptionIndex","optionIndex","autoScaling","setAutoScaling","scalingValue","setScalingValue","increaseScalingByStep","decreaseScalingByStep","toggleAutoScaling","onChangeScalingValue","newValueIndex","_scalingSettings$sett2","exampleText","exampleFontSize","Math","round","maxWidth","Slider","SearchSettings","zimbraPrefIncludeSpamInSearch","searchInSpamFolder","setSearchInSpamFolder","zimbraPrefIncludeTrashInSearch","searchInTrashFolder","setSearchInTrashFolder","zimbraPrefIncludeSharedItemsInSearch","searchInSharedFolder","setSearchInSharedFolder","setMode","onClickSpam","onClickTrash","onClickShared","_settings$attrs2","mobileView","used","quota","userQuota","zimbraMailQuota","filledQuota","fillBackground","Quota","fill","setOpen","locales","timezones","timeZoneList","updatePrefs","defaultLocale","onLocaleChange","defaultTimeZone","zimbraPrefTimeZoneId","onTimeZoneChange","keys","defaultSelection","dropdownMaxHeight","selectedBackgroundColor","dismissLabel","reload","mods","setMods","userSettings","localStorageUnAppliedChanges","setLocalStorageUnAppliedChanges","setLocalStorageSettings","prevType","nextType","unAppliedPrevState","localStorageSettingsPrevState","modifyPropertiesRequest","zimbraPrefMailTrustedSenderList","ModifyPropertiesRequest","pref","p","resolve","scalingSettingSectionRef","outOfOfficeSettingsSectionRef","searchSettingsSectionRef","_outOfOfficeSettingsS","_searchSettingsSectio","_scalingSettingSectio","AppearanceSettings","DarkThemeSettingSection","LanguageAndTimeZoneSettings","ModuleVersionSettings","UserQuota","settingsRoute","settingsPrimaryBar","settingsSecondaryBar","settingsViews","useLocation","subSections","collapsedItems","IconButton","Accordion","settingsAppView","Route","exact","Switch","Redirect","from","strict","to","settingsGeneralView","GeneralSettings","settingsAccountsView","searchRoute","searchPrimaryBar","searchAppView","_searchViews$","searchViews","modules","fullModule","m","feedbackBoardView","_sentryEvent$extra4","_sentryEvent$extra5","_sentryEvent$extra7","allApps","appItems","_useReducer","useReducer","_useReducer2","sentryEvent","dispatch","setShowErr","limit","setLimit","onAppSelect","onTopicSelect","onInputChange","scrollHeight","checkTopicSelect","_sentryEvent$extra","_sentryEvent$message","confirmHandler","feedbackId","feedbacks","captureEvent","_account$displayName","disabledSend","_sentryEvent$message$","_sentryEvent$message2","_sentryEvent$extra2","_sentryEvent$extra3","LabelFactory","topics","getTopics","defaultTopic","_sentryEvent$extra6","multiple","onKeyUp","placeholder","useContextBridge","packageDependentFunctions","functions","useCurrentRoute","trim","getCurrentRoute","_useContextBridge$get","_useContextBridge$get2","getHistory","parseParams","_getCurrentRoute","routeToApply","hash","usePushHistoryCallback","useReplaceHistoryCallback","useGoBackHistoryCallback","goBack","pushHistory","_useContextBridge$get3","_useContextBridge$get4","replaceHistory","_useContextBridge$get5","_useContextBridge$get6","goBackHistory","_useContextBridge$get7","_useContextBridge$get8","createTag","deleteTag","action","renameTag","changeTagColor","rgb","getFavicon","NotificationManager","_this","_classCallCheck","vibrate","sound","defaultAudio","this","PopupNotificationDefaultConfig","AudioNotificationDefaultConfig","showPopup","playSound","Map","has","debounce","Audio","play","DEBOUNCE_TIME","config","defConfig","getAudioFileFunction","n","Notification","NotificationDefaultConfig","conf","_createClass","instance","getNotificationManager","getInstance","runSearch","isMobile","useIsMobile","ShellContext","FileInput","input","onEditorChange","onFileSelect","_ref$inline","inline","customInitOptions","rest","_objectWithoutProperties","_excluded","_onEditorChange","newContent","editor","getContent","defaultStyle","zimbraPrefHtmlEditorDefaultFontFamily","fontSize","zimbraPrefHtmlEditorDefaultFontSize","zimbraPrefHtmlEditorDefaultFontColor","inputRef","onFileClick","click","inlineLabel","setupCallback","ui","registry","addMenuButton","callback","onAction","editorInitConfig","content_css","language_url","language","setup","min_height","auto_focus","menubar","statusbar","branding","resize","font_size_formats","object_resizing","style_formats","block","wrapper","merge_siblings","plugins","toolbar","quickbars_insert_toolbar","quickbars_selection_toolbar","contextmenu","toolbar_mode","content_style","visualblocks_default_state","end_container_on_empty_block","relative_urls","remove_script_host","newline_behavior","fileInputOnChange","_inputRef$current","tinymce","files","overflowY","accept","Editor","useIntegrationsStore","components","composer","Composer","registerActions","registerComponents","registerFunctions","_len3","_key3","fn","removeActions","_len4","_key4","actionTypeMap","actionFactory","actionFactoryId","removeComponents","_len5","_key5","removeFunctions","_len6","_key6","getIntegratedFunction","_useIntegrationsStore","integration","getIntegratedComponent","_useIntegrationsStore2","Integration","getActions","factories","compact","getActionsFactory","getAction","_useIntegrationsStore3","factory","getActionFactory","_useIntegrationsStore4","useIntegratedFunction","_s$functions","useIntegratedComponent","_s$components","useActions","_compact","useActionsFactory","useAction","useActionFactory","AppLink","_to","RRLink","textDecoration","Spinner","loading","_scripts","_scriptId","loadApps","__ZAPP_SHARED_LIBRARIES__","react","ReactDOM","ReactI18n","ReactRedux","lodash","Lodash","ReactRouterDom","Moment","StyledComponents","ReduxJSToolkit","ZappUI","Preview","__ZAPP_HMR_EXPORT__","appsToLoad","log","localeObj","localeDateFnsKey","getDateFnsLocale","localeDateFns","registerLocale","setDefaultLocale","appPkg","appSetters","_data$route","_data$id","_data$badge","_data$position","_data$visible","_data$label","_data$primaryBar","_data$appView","_data$standalone","_data$standalone2","_data$standalone3","hidePrimaryBar","hideShellHeader","allowUnauthenticated","normalizeRoute","routeId","_data$route4","_data$id7","_data$component6","normalizeBoardView","_data$route2","_data$id2","_data$component","_data$label2","_data$icon","_data$position2","_data$subSections","normalizeSettingsView","_data$route3","_data$id3","_data$component2","_data$label3","_data$icon2","_data$position3","normalizeSearchView","_data$id4","_data$component3","_data$button","_data$badge2","_data$position4","_data$label4","whitelistRoutes","blacklistRoutes","button","normalizeUtilityView","_data$label5","_data$position5","_data$id5","_data$component4","normalizePrimaryAccessoryView","_data$position6","_data$id6","_data$component5","normalizeSecondaryAccessoryView","editSettings","_mods$identity","_mods$identity2","_mods$identity3","_mods$permissions3","_prop$app","modifyList","deleteList","createList","zimbraPrefDefaultSignatureId","zimbraPrefForwardReplySignatureId","zimbraPrefWhenSentToEnabled","zimbraPrefWhenInFoldersEnabled","permissions","freeBusy","gt","zid","deny","inviteRight","u","_mods$permissions","_mods$permissions2","_mods$identity4","_s$account2","_mods$identity5","itemMods","indexAccount","_mods$identity6","_mods$identity7","getAppSetters","getI18n","_instances$app","soapFetch","xmlSoapFetch","useAppContext","getAppViews","getBridgedFunctions","getAppFunctions","CONSTANTS","appComponent","memo","script","createElement","setAttribute","appendChild","err","isPromiseRejectedResult","promiseSettledResult","LoaderFailureModal","closeHandler","Loader","response","favicon","getElementById","HTMLLinkElement","href","ok","statusText","_normalizeAccount","signatures","_settings$props$prop","normalizeSettings","normalizeAccount","promiseSettledResultArray","_promiseSettledResult","getComponentsPromiseSettledResult","getInfoPromiseSettledResult","promiseRejectedResult","forOwn","parentNode","removeChild","NotificationPermissionChecker","requestPermission","_BoardsRouterContainer","FirstAppRedirect","mainRoute","_apps$","appViews","BoardContainer","div","gray3","AppBoard","createMemoryHistory","initialEntries","boardViews","windowHistory","unlisten","listen","l","onMouseDown","Router","TabContainer","CloseContainer","TabIcon","CustomText","overflowing","VerticalDivider","AppBoardTab","firstTab","defaultPrevented","onRemove","textRef","textOverflowing","setTextOverflowing","resizeObserverRef","ResizeObserver","requestAnimationFrame","offsetWidth","scrollWidth","observe","_resizeObserverRef$cu","disconnect","triggerRef","className","iconColor","CustomRow","TabsList","_useBoardStore","BORDERS","getCursorFromBorder","border","direction","borders","calcNewSizeAndPosition","mouseEvent","newSizeAndPosition","heightDifference","clientTop","clientY","clientX","clientLeft","widthDifference","MainContainer","BorderWithResize","$cursor","$width","$height","$position","$translateTransform","x","y","ResizableBorder","elementToResize","localStorageKey","borderRef","resizeHandler","elementToResizeRef","initialSizeAndPositionRef","lastSavedSizeAndPosition","setLastSavedSizeAndPosition","lastSizeAndPositionRef","resizeElement","sizeAndPositionToApply","computedStyle","getComputedStyle","parseFloat","onMouseMove","mouseMoveEvent","onMouseUp","mouseDownEvent","clientRect","getBoundingClientRect","offsetHeight","offsetTop","offsetLeft","useResize","positions","ResizableContainer","_ref7$disabled","BoardContainerComp","OverflowContainer","Board","BoardHeader","BoardDetailContainer","BackButton","Actions","ListItemContent","pointerEvents","calcPositionToRemainVisible","lastSavedPosition","containerSize","minVisibility","_boards$current","boardDropdownItems","customComponent","boardRef","boardContainerRef","lastSavedBoardSizeAndPosition","setLastSavedBoardSizeAndPosition","currentBoardSizeAndPosition","setCurrentBoardSizeAndPosition","lastSavedBoardSizeAndPositionRef","_useMove","elementToMoveRef","isMoving","setIsMoving","isMoveEnabledRef","setLastSavedPosition","lastPositionRef","globalCursorSetterTimerRef","shouldUpdateLocalStorageRef","moveElement","elementToMove","positionToApply","preventClick","capture","offsetParent","newPosition","clientTopLimit","_limitClientRect$top","limitClientRect","moveTopDelta","mouseClientY","newClientTop","newTop","clientLeftLimit","_limitClientRect$left","moveLeftDelta","mouseClientX","newClientLeft","newLeft","enableMove","activeElement","disableMove","useMove","_useMove2","moveElementHandler","isDefaultSizeAndPosition","isBoardEmpty","resetSizeAndPosition","boardElement","updateBoardPosition","clientHeight","clientWidth","boardContainer","leading","trailing","clickHandler","clickFn","onReturnToApp","screenMode","useScreenMode","CreationButtonComponent","activeRoute","primaryAction","group","byApp","groupBy","secondaryActions","_byApp","_activeRoute$app","_byApp$app$name","MultiButton","disabledPrimary","disabledSecondary","MemoCreationButton","CreationButton","locationFull","_location$pathname","slice","truncateLocation","SelectorContainer","ModuleSelectorComponent","_useSearchStore","_modules$find","dropdownItems","_modules$find2","openDropdown","closeDropdown","MemoModuleSelector","ModuleSelector","OutlinedIconButton","StyledChipInput","ChipInput","StyledContainer","SearchBar","storedSuggestions","setStoredSuggestions","inputTyped","setInputTyped","isTyping","setIsTyping","setOptions","inputHasFocus","setInputHasFocus","searchInputValue","setSearchInputValue","showClear","_inputRef$current2","clearSearch","_inputRef$current3","onSearch","currentQuery","newInputValue","hasAvatar","newInputChip","some","currentQueryChip","searchInputChip","appSuggestions","reverse","updateOptions","textContent","queryChips","suggestion","onQueryChange","newQuery","_newQuery","lastChipLabel","newSuggestion","onInputType","suggestions","containerRef","addFocus","removeFocus","runSearchOnKeyUp","disableOptions","clearButtonPlaceholder","searchButtonsAreDisabled","searchBtnTooltipLabel","onChipAdd","newChip","onAdd","confirmChipOnBlur","separators","overflowX","onInputTypeDebounce","onBlur","onFocus","requireUniqueChips","customSize","iconSize","paddingSize","StyledLogo","carbonioWebUiAppLogo","carbonioWebUiDarkAppLogo","LogoElement","DefaultLogo","alt","src","ShellHeaderContainer","mobileNavIsOpen","onMobileMenuClick","searchEnabled","Responsive","mode","SidebarComponent","secondary","ShellMobileNavComponent","menuTree","zIndex","Collapse","crossSize","ShellMobileNavMemo","MiniBadge","BadgeWrap","forwardRef","checkList","l1","l2","intersection","checkRoute","_omit","activeRouteValues","useUtilityViews","utilityViews","PrimaryBarContainer","ToggleBoardIcon","PrimaryBarElement","PrimaryBarAccessoryElement","_view$onClick","OverlayRow","ShellPrimaryBarComponent","_activeRoute$standalo","primaryBarViews","_useLocation","routesRef","primaryBarAccessoryViews","accessoryViews","primaryBarItems","accessoryItems","MemoShellPrimaryBarComponent","Bubble","Collapser","useUtilityBarStore","secondaryBarState","setCurrent","setSecondaryBarState","SidebarContainer","sidebarIsOpen","ShellSecondaryBarComponent","isOpen","setIsOpen","onCollapserClick","secondaryBarViews","secondaryBarAccessoryViews","accessories","MemoShellSecondaryBar","ShellPrimaryBar","ShellSecondaryBar","ShellMobileNav","UtilityBarItem","_useUtilityBarStore","ShellUtilityBar","_account$displayName2","accountItems","_account$name","viewItems","disableAutoFocus","Panel","Spacer","ShellUtilityPanel","currentPanel","_views$","Background","DarkReaderListener","ShellComponent","mobileNavOpen","setMobileNavOpen","auth","useLoginRedirection","ShellHeader","ShellNavigationBar","AppViewContainer","MemoShell","_activeRoute$standalo2","ShellContextProvider","PreviewManager","ContextBridge","content","addFunctions","useModal","StandaloneListener","DefaultViewsRegister","_s$routes2","zimbraFeatureOptionsEnabled","registerDefaultViews","ShellI18nextProvider","BrowserRouter","basename","SnackbarManager","ModalManager","AppLoaderMounter","ShellView","webpackAsyncContext","req","__webpack_require__","o","exports","webpackContext","webpackContextResolve"],"sourceRoot":""}